
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>viper package &#8212; Viper Infrastructure Commander  documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />

  <link rel="stylesheet" href="_static/custom.css" type="text/css" />


  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>


    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">


          <div class="body" role="main">

  <div class="section" id="viper-package">
<h1>viper package<a class="headerlink" href="#viper-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-viper.cli">
<span id="viper-cli-module"></span><h2>viper.cli module<a class="headerlink" href="#module-viper.cli" title="Permalink to this headline">¶</a></h2>
<div class="section" id="the-viper-command-line-interface">
<h3>The Viper Command-line Interface<a class="headerlink" href="#the-viper-command-line-interface" title="Permalink to this headline">¶</a></h3>
<div class="section" id="the-concept">
<h4>The Concept<a class="headerlink" href="#the-concept" title="Permalink to this headline">¶</a></h4>
<p>After we define the tasks, actions, jobs etc. in the workspace,
we need a way to execute them. Dropping into a Python shell and
using the Python API is one way to do that. However, that might
not be the most preferred approach for everyone.</p>
<p>Viper provides a command-line interface through the <code class="docutils literal notranslate"><span class="pre">viper</span></code>
command to interact with the Python API without dropping into
a Python shell.</p>
</div>
<div class="section" id="similarity-between-the-python-api-and-command-line-interface">
<h4>Similarity Between the Python API and Command-line Interface<a class="headerlink" href="#similarity-between-the-python-api-and-command-line-interface" title="Permalink to this headline">¶</a></h4>
<p>The CLI interface closely follows the Python API. Each of the
subcommands with a colon (<code class="docutils literal notranslate"><span class="pre">:</span></code>) represents a method of a class or
object. When we run <code class="docutils literal notranslate"><span class="pre">viper</span> <span class="pre">--help</span></code>, we can see the signatures of
the methods/subcommands.</p>
<p>For example, the subcommand <code class="docutils literal notranslate"><span class="pre">viper</span> <span class="pre">hosts:from-file</span></code> represents the
class method <a class="reference internal" href="#viper.Hosts.from_file" title="viper.Hosts.from_file"><code class="xref py py-meth docutils literal notranslate"><span class="pre">viper.Hosts.from_file()</span></code></a>,</p>
<p>In the help menu the signature of this subcommand is defined as
<code class="docutils literal notranslate"><span class="pre">[Hosts]</span></code> which means that it returns a text (JSON)
representation of a <a class="reference internal" href="#viper.Hosts" title="viper.Hosts"><code class="xref py py-class docutils literal notranslate"><span class="pre">Hosts</span></code></a>, object which can be
passed (piped) to another subcommand that expects the same via
standard input.</p>
<p>On the other hand, the <code class="docutils literal notranslate"><span class="pre">results:order-by</span></code> has the signature
<code class="docutils literal notranslate"><span class="pre">[Results</span> <span class="pre">-&gt;</span> <span class="pre">Results]</span></code>. The subcommand represents the method
<a class="reference internal" href="#viper.Results.order_by" title="viper.Results.order_by"><code class="xref py py-meth docutils literal notranslate"><span class="pre">viper.Results.order_by()</span></code></a> and the signature
<code class="docutils literal notranslate"><span class="pre">[Results</span> <span class="pre">-&gt;</span> <span class="pre">Results]</span></code> means that the subcommand expects the text
(JSON) representation of a <a class="reference internal" href="#viper.Results" title="viper.Results"><code class="xref py py-class docutils literal notranslate"><span class="pre">Results</span></code></a> object.</p>
</div>
<div class="section" id="example-output-piping-as-method-chaining">
<h4>Example: Output Piping as Method Chaining<a class="headerlink" href="#example-output-piping-as-method-chaining" title="Permalink to this headline">¶</a></h4>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>viper hosts:from-file<span class="o">(</span><span class="s2">&quot;hosts.csv&quot;</span><span class="o">)</span> <span class="se">\</span>
        <span class="p">|</span> viper hosts:task task.ping <span class="se">\</span>
        <span class="p">|</span> viper runners:run --max-workers <span class="m">50</span> <span class="se">\</span>
        <span class="p">|</span> viper results:final <span class="se">\</span>
        <span class="p">|</span> viper results:order-by host.hostname host.ip <span class="se">\</span>
        <span class="p">|</span> viper results:to-file results.csv <span class="se">\</span>
        <span class="p">|</span> viper results:format <span class="s2">&quot;{host.hostname}: {stdout}&quot;</span>
</pre></div>
</div>
<p>In the above example, following things are happening:</p>
<ul class="simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">hosts:from-file</span></code> subcommand with signature
<code class="docutils literal notranslate"><span class="pre">[Hosts]</span></code> returns the text representation of a <a class="reference internal" href="#viper.Hosts" title="viper.Hosts"><code class="xref py py-class docutils literal notranslate"><span class="pre">Hosts</span></code></a> object.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">hosts:task</span></code> reads the output of <code class="docutils literal notranslate"><span class="pre">hosts:from-file</span></code> from standard input
as it has the signature of <code class="docutils literal notranslate"><span class="pre">[Hosts</span> <span class="pre">-&gt;</span> <span class="pre">Runners]</span></code> and returns
<a class="reference internal" href="#viper.Runners" title="viper.Runners"><code class="xref py py-class docutils literal notranslate"><span class="pre">Runners</span></code></a>.</p></li>
<li><p>Then the <code class="docutils literal notranslate"><span class="pre">runners:run</span></code> subcommand with signature <code class="docutils literal notranslate"><span class="pre">[Runners</span> <span class="pre">-&gt;</span> <span class="pre">Results]</span></code>
reads the output of <code class="docutils literal notranslate"><span class="pre">hosts:task</span></code> from standard input and returns
<a class="reference internal" href="#viper.Results" title="viper.Results"><code class="xref py py-class docutils literal notranslate"><span class="pre">Results</span></code></a>.</p></li>
<li><p>Finally <code class="docutils literal notranslate"><span class="pre">results:format</span></code> with signature <code class="docutils literal notranslate"><span class="pre">[Results</span> <span class="pre">-&gt;</span> <span class="pre">str]</span></code> turns the
<a class="reference internal" href="#viper.Results" title="viper.Results"><code class="xref py py-class docutils literal notranslate"><span class="pre">Results</span></code></a> into a string which cannot be passed (piped) to any
further subcommand.</p></li>
</ul>
<p>The data flow diagram:</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">hosts:from-file</span></code> -&gt; <a class="reference internal" href="#viper.Hosts" title="viper.Hosts"><code class="xref py py-class docutils literal notranslate"><span class="pre">Hosts</span></code></a> | <code class="docutils literal notranslate"><span class="pre">hosts:task</span></code> -&gt; <a class="reference internal" href="#viper.Runners" title="viper.Runners"><code class="xref py py-class docutils literal notranslate"><span class="pre">Runners</span></code></a>
| <code class="docutils literal notranslate"><span class="pre">runners:run</span></code> -&gt; <a class="reference internal" href="#viper.Results" title="viper.Results"><code class="xref py py-class docutils literal notranslate"><span class="pre">Results</span></code></a> | <code class="docutils literal notranslate"><span class="pre">results:final</span></code> -&gt; <a class="reference internal" href="#viper.Results" title="viper.Results"><code class="xref py py-class docutils literal notranslate"><span class="pre">Results</span></code></a>
| <code class="docutils literal notranslate"><span class="pre">results:order-by</span></code> -&gt; <a class="reference internal" href="#viper.Results" title="viper.Results"><code class="xref py py-class docutils literal notranslate"><span class="pre">Results</span></code></a> | <code class="docutils literal notranslate"><span class="pre">results:to-file</span></code> -&gt;
<a class="reference internal" href="#viper.Results" title="viper.Results"><code class="xref py py-class docutils literal notranslate"><span class="pre">Results</span></code></a> | <code class="docutils literal notranslate"><span class="pre">results:format</span></code> -&gt; <cite>str</cite></p>
</div></blockquote>
<p>The above CLI example is equivalent to the following Python example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">viper</span> <span class="kn">import</span> <span class="n">Hosts</span>
<span class="kn">import</span> <span class="nn">task</span>

<span class="nb">print</span><span class="p">(</span>
    <span class="n">Hosts</span><span class="o">.</span><span class="n">from_file</span><span class="p">(</span><span class="s2">&quot;hosts.csv&quot;</span><span class="p">)</span>
    <span class="o">.</span><span class="n">task</span><span class="p">(</span><span class="n">task</span><span class="o">.</span><span class="n">ping</span><span class="p">())</span>
    <span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">max_workers</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>
    <span class="o">.</span><span class="n">final</span><span class="p">()</span>
    <span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="s2">&quot;host.hostname&quot;</span><span class="p">,</span> <span class="s2">&quot;host.ip&quot;</span><span class="p">)</span>
    <span class="o">.</span><span class="n">to_file</span><span class="p">(</span><span class="s2">&quot;results.csv&quot;</span><span class="p">)</span>
    <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{host.hostname}</span><span class="s2">: </span><span class="si">{stdout}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Refer to <a class="reference internal" href="getting_started.html"><span class="doc">Getting Started</span></a> to see how <code class="docutils literal notranslate"><span class="pre">task.ping</span></code> and <code class="docutils literal notranslate"><span class="pre">hosts.csv</span></code> are written.</p>
</div>
</div>
<div class="section" id="defining-actions">
<h4>Defining Actions<a class="headerlink" href="#defining-actions" title="Permalink to this headline">¶</a></h4>
<p>Actions are simple Python functions that can be invoked using the <code class="docutils literal notranslate"><span class="pre">viper</span> <span class="pre">lets</span></code> subcommand.</p>
<p>Example:</p>
<p>Define an action in <code class="docutils literal notranslate"><span class="pre">action.py</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cat &gt; action.py &lt;&lt; EOF
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">add_them</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="o">+</span> <span class="nb">int</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>EOF
</pre></div>
</div>
<p>Now invoke the action:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>viper lets action.add_them <span class="m">5</span> <span class="m">10</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">15</span>
</pre></div>
</div>
</div>
<div class="section" id="defining-viper-objects-hosts-task">
<h4>Defining Viper Objects: Hosts, Task<a class="headerlink" href="#defining-viper-objects-hosts-task" title="Permalink to this headline">¶</a></h4>
<p>Similar to actions, we can also define functions that return an instance of
<a class="reference internal" href="#viper.Task" title="viper.Task"><code class="xref py py-class docutils literal notranslate"><span class="pre">Task</span></code></a> or <a class="reference internal" href="#viper.Hosts" title="viper.Hosts"><code class="xref py py-class docutils literal notranslate"><span class="pre">Hosts</span></code></a>. The <code class="docutils literal notranslate"><span class="pre">*:from-func</span></code>
subcommands will invoke the function to get the object it returns.</p>
<p>Example: Define a host group in <code class="docutils literal notranslate"><span class="pre">hosts.py</span></code></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cat &gt; hosts.py &lt;&lt; EOF
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">viper</span> <span class="kn">import</span> <span class="n">Hosts</span><span class="p">,</span> <span class="n">Host</span>

<span class="k">def</span> <span class="nf">group1</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">Hosts</span><span class="o">.</span><span class="n">from_items</span><span class="p">(</span>
        <span class="n">Host</span><span class="p">(</span><span class="s2">&quot;192.168.0.11&quot;</span><span class="p">,</span> <span class="n">hostname</span><span class="o">=</span><span class="s2">&quot;host11&quot;</span><span class="p">),</span>
        <span class="n">Host</span><span class="p">(</span><span class="s2">&quot;192.168.0.12&quot;</span><span class="p">,</span> <span class="n">hostname</span><span class="o">=</span><span class="s2">&quot;host12&quot;</span><span class="p">),</span>
        <span class="n">Host</span><span class="p">(</span><span class="s2">&quot;192.168.0.13&quot;</span><span class="p">,</span> <span class="n">hostname</span><span class="o">=</span><span class="s2">&quot;host13&quot;</span><span class="p">),</span>
        <span class="n">Host</span><span class="p">(</span><span class="s2">&quot;192.168.0.14&quot;</span><span class="p">,</span> <span class="n">hostname</span><span class="o">=</span><span class="s2">&quot;host14&quot;</span><span class="p">),</span>
        <span class="n">Host</span><span class="p">(</span><span class="s2">&quot;192.168.0.15&quot;</span><span class="p">,</span> <span class="n">hostname</span><span class="o">=</span><span class="s2">&quot;host15&quot;</span><span class="p">),</span>
    <span class="p">)</span>
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>EOF
</pre></div>
</div>
<p>Get the hosts count in terminal:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>viper hosts hosts.group1 <span class="p">|</span> viper hosts:count
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">5</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">viper</span> <span class="pre">hosts</span></code> is an alias of <code class="docutils literal notranslate"><span class="pre">viper</span> <span class="pre">hosts:from-func</span></code>.
Similarly, <code class="docutils literal notranslate"><span class="pre">viper</span> <span class="pre">task</span></code> is an alias of <code class="docutils literal notranslate"><span class="pre">viper</span> <span class="pre">task:from-func</span></code>.</p>
<p>However, <code class="docutils literal notranslate"><span class="pre">viper</span> <span class="pre">results</span></code> is an alias of <code class="docutils literal notranslate"><span class="pre">viper</span> <span class="pre">results:from-history</span></code>
as there’s no reason to write results ourselves. It should come from
the database.</p>
<p>So there’s no <code class="docutils literal notranslate"><span class="pre">results:from-func</span></code>, neither <code class="docutils literal notranslate"><span class="pre">runners:from-func</span></code> and so on.</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Refer to <a class="reference internal" href="getting_started.html"><span class="doc">Getting Started</span></a> to find the example of task and job definitions.</p>
</div>
</div>
<div class="section" id="defining-utilities-handlers-filters-sort-keys">
<h4>Defining Utilities: Handlers, Filters, Sort Keys<a class="headerlink" href="#defining-utilities-handlers-filters-sort-keys" title="Permalink to this headline">¶</a></h4>
<p>Defining handlers, filters and sort keys are similar to
defining actions but the first argument of the defined function
is reserved for an instance of viper data type which
it receives from the standard input.</p>
<p>Example:</p>
<p>Define a general handler in <code class="docutils literal notranslate"><span class="pre">handler.py</span></code> that operates on
all <a class="reference internal" href="#viper.collections.Items" title="viper.collections.Items"><code class="xref py py-class docutils literal notranslate"><span class="pre">Items</span></code></a> instances:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cat &gt; handler.py &lt;&lt; EOF
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">sys</span>

<span class="k">def</span> <span class="nf">log_count</span><span class="p">(</span><span class="n">items</span><span class="p">,</span> <span class="n">arg1</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;There are {items.count()} </span><span class="si">{arg1}</span><span class="s2">.&quot;</span><span class="p">,</span> <span class="n">file</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">items</span>
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>EOF
</pre></div>
</div>
<p>Use the handler:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>viper hosts hosts.group1 <span class="se">\</span>
        <span class="p">|</span> viper hosts:pipe handler.log_count hosts <span class="se">\</span>
        <span class="p">|</span> viper hosts:count
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">There</span> <span class="n">are</span> <span class="mi">5</span> <span class="n">hosts</span><span class="o">.</span>
<span class="mi">5</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Here <code class="docutils literal notranslate"><span class="pre">arg1</span></code> recieves the second argument passed to <code class="docutils literal notranslate"><span class="pre">hosts:pipe</span></code> i.e. “hosts”.</p>
</div>
<p>Similarly filters and sort keys can be defined using functions having
the first argument reserved for the object it will operate on, and the
subsequent arguments for the variables that will be passed while invoking
the <code class="docutils literal notranslate"><span class="pre">*:filter</span></code> and <code class="docutils literal notranslate"><span class="pre">*:sort</span></code> subcommands.</p>
<p>However, we hardly will need to really define filters and sort keys like this
as most of the requirements of sorting and filtering should be satisfied with
the <code class="docutils literal notranslate"><span class="pre">*:order-by</span></code> and <code class="docutils literal notranslate"><span class="pre">*:where</span></code> subcommands respectively.</p>
<dl class="function">
<dt id="viper.cli.func">
<code class="sig-prename descclassname">viper.cli.</code><code class="sig-name descname">func</code><span class="sig-paren">(</span><em class="sig-param">objpath: str</em><span class="sig-paren">)</span> &#x2192; function<a class="reference internal" href="_modules/viper/cli.html#func"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.cli.func" title="Permalink to this definition">¶</a></dt>
<dd><p>Resolved Python function from given string.</p>
</dd></dl>

<dl class="function">
<dt id="viper.cli.run">
<code class="sig-prename descclassname">viper.cli.</code><code class="sig-name descname">run</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; int<a class="reference internal" href="_modules/viper/cli.html#run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.cli.run" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
</div>
</div>
<div class="section" id="module-viper.cli_base">
<span id="viper-cli-base-module"></span><h2>viper.cli_base module<a class="headerlink" href="#module-viper.cli_base" title="Permalink to this headline">¶</a></h2>
<p>Base classes for the viper.cli module.</p>
<dl class="class">
<dt id="viper.cli_base.SubCommand">
<em class="property">class </em><code class="sig-prename descclassname">viper.cli_base.</code><code class="sig-name descname">SubCommand</code><span class="sig-paren">(</span><em class="sig-param">subparser: argparse.ArgumentParser</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/viper/cli_base.html#SubCommand"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.cli_base.SubCommand" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Base class for the subcommand parsers.</p>
<dl class="method">
<dt id="viper.cli_base.SubCommand.add_arguments">
<code class="sig-name descname">add_arguments</code><span class="sig-paren">(</span><em class="sig-param">parser: argparse.ArgumentParser</em><span class="sig-paren">)</span> &#x2192; None<a class="reference internal" href="_modules/viper/cli_base.html#SubCommand.add_arguments"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.cli_base.SubCommand.add_arguments" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="viper.cli_base.SubCommand.aliases">
<code class="sig-name descname">aliases</code><em class="property"> = ()</em><a class="headerlink" href="#viper.cli_base.SubCommand.aliases" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="viper.cli_base.SubCommand.attach_to">
<em class="property">classmethod </em><code class="sig-name descname">attach_to</code><span class="sig-paren">(</span><em class="sig-param">subparsers: argparse._SubParsersAction</em><span class="sig-paren">)</span> &#x2192; None<a class="reference internal" href="_modules/viper/cli_base.html#SubCommand.attach_to"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.cli_base.SubCommand.attach_to" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="viper.cli_base.SubCommand.name">
<code class="sig-name descname">name</code><em class="property"> = None</em><a class="headerlink" href="#viper.cli_base.SubCommand.name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-viper.collections">
<span id="viper-collections-module"></span><h2>viper.collections module<a class="headerlink" href="#module-viper.collections" title="Permalink to this headline">¶</a></h2>
<div class="section" id="the-viper-python-api">
<h3>The Viper Python API<a class="headerlink" href="#the-viper-python-api" title="Permalink to this headline">¶</a></h3>
<div class="section" id="id1">
<h4>The Concept<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h4>
<p>Viper provides a powerful collection of data types such as <a class="reference internal" href="#viper.Hosts" title="viper.Hosts"><code class="xref py py-class docutils literal notranslate"><span class="pre">Hosts</span></code></a>,
<a class="reference internal" href="#viper.Runners" title="viper.Runners"><code class="xref py py-class docutils literal notranslate"><span class="pre">Runners</span></code></a>, <a class="reference internal" href="#viper.Results" title="viper.Results"><code class="xref py py-class docutils literal notranslate"><span class="pre">Results</span></code></a> etc. and uses <em>method chaining</em>
to perform different operations. The <a class="reference internal" href="#module-viper.collections" title="viper.collections"><code class="xref py py-mod docutils literal notranslate"><span class="pre">viper.collections</span></code></a> module contains the
collection of such data types. These data types share some common properties as
all they inherit from the <a class="reference internal" href="#viper.collections.Collection" title="viper.collections.Collection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Collection</span></code></a> class.</p>
</div>
<div class="section" id="example-method-chaining">
<h4>Example: Method Chaining<a class="headerlink" href="#example-method-chaining" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">viper</span> <span class="kn">import</span> <span class="n">Hosts</span>
<span class="kn">import</span> <span class="nn">task</span>

<span class="nb">print</span><span class="p">(</span>
    <span class="n">Hosts</span><span class="o">.</span><span class="n">from_file</span><span class="p">(</span><span class="s2">&quot;hosts.csv&quot;</span><span class="p">)</span>
    <span class="o">.</span><span class="n">task</span><span class="p">(</span><span class="n">task</span><span class="o">.</span><span class="n">ping</span><span class="p">())</span>
    <span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">max_workers</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>
    <span class="o">.</span><span class="n">final</span><span class="p">()</span>
    <span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="s2">&quot;host.hostname&quot;</span><span class="p">,</span> <span class="s2">&quot;host.ip&quot;</span><span class="p">)</span>
    <span class="o">.</span><span class="n">to_file</span><span class="p">(</span><span class="s2">&quot;results.csv&quot;</span><span class="p">)</span>
    <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{host.hostname}</span><span class="s2">: </span><span class="si">{stdout}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Refer to <a class="reference internal" href="getting_started.html"><span class="doc">Getting Started</span></a> to see how <code class="docutils literal notranslate"><span class="pre">task.ping</span></code> and <code class="docutils literal notranslate"><span class="pre">hosts.csv</span></code> are written.</p>
</div>
</div>
<div class="section" id="unit-vs-container-types">
<h4>Unit vs Container Types<a class="headerlink" href="#unit-vs-container-types" title="Permalink to this headline">¶</a></h4>
<p>The above mentioned data types can be categorised as unit and container types.
The unit ones inherit from the <a class="reference internal" href="#viper.collections.Item" title="viper.collections.Item"><code class="xref py py-class docutils literal notranslate"><span class="pre">Item</span></code></a> class, while the
container types inherit from <a class="reference internal" href="#viper.collections.Items" title="viper.collections.Items"><code class="xref py py-class docutils literal notranslate"><span class="pre">Items</span></code></a> class.</p>
<p>Below are the list of unit types and their container type counterparts:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 49%" />
<col style="width: 51%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Unit Types</p></th>
<th class="head"><p>Container Types</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><a class="reference internal" href="#viper.Task" title="viper.Task"><code class="xref py py-class docutils literal notranslate"><span class="pre">Task</span></code></a></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#viper.Host" title="viper.Host"><code class="xref py py-class docutils literal notranslate"><span class="pre">Host</span></code></a></p></td>
<td><p><a class="reference internal" href="#viper.Hosts" title="viper.Hosts"><code class="xref py py-class docutils literal notranslate"><span class="pre">Hosts</span></code></a></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#viper.Runner" title="viper.Runner"><code class="xref py py-class docutils literal notranslate"><span class="pre">Runner</span></code></a></p></td>
<td><p><a class="reference internal" href="#viper.Runners" title="viper.Runners"><code class="xref py py-class docutils literal notranslate"><span class="pre">Runners</span></code></a></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#viper.Result" title="viper.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a></p></td>
<td><p><a class="reference internal" href="#viper.Results" title="viper.Results"><code class="xref py py-class docutils literal notranslate"><span class="pre">Results</span></code></a></p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="useful-common-properties-abilities">
<h4>Useful Common Properties &amp; Abilities<a class="headerlink" href="#useful-common-properties-abilities" title="Permalink to this headline">¶</a></h4>
<p>The properties mentioned below are common to both unit and container type objects.</p>
<ul>
<li><p><strong>Immutable:</strong> All the datatypes are immutable i.e. they cannot be modified
once initialized. This is to prevent any unexpected behaviour caused due to
stateful-ness.</p></li>
<li><p><strong>.from_json() and .to_json():</strong> All the objects can be initialized from JSON
texts using the <code class="docutils literal notranslate"><span class="pre">.from_json()</span></code> factory method and can be dumped back to JSON
using the <code class="docutils literal notranslate"><span class="pre">.to_json()</span></code> method. This enables the objects to use a wide range of
mediums such as the Unix pipes.</p></li>
<li><p><strong>.format():</strong> The objects can be converted to a string with a custof format
using the <code class="docutils literal notranslate"><span class="pre">.format()</span></code> method.</p>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>host.format<span class="o">(</span><span class="s2">&quot;{ip} {hostname} {meta.tag}&quot;</span><span class="o">)</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="useful-abilities-common-to-the-unit-types">
<h4>Useful Abilities Common to the Unit Types<a class="headerlink" href="#useful-abilities-common-to-the-unit-types" title="Permalink to this headline">¶</a></h4>
<p>These abilities are common to <a class="reference internal" href="#viper.Task" title="viper.Task"><code class="xref py py-class docutils literal notranslate"><span class="pre">Task</span></code></a>, <a class="reference internal" href="#viper.Host" title="viper.Host"><code class="xref py py-class docutils literal notranslate"><span class="pre">Host</span></code></a>,
<a class="reference internal" href="#viper.Runner" title="viper.Runner"><code class="xref py py-class docutils literal notranslate"><span class="pre">Runner</span></code></a> and <a class="reference internal" href="#viper.Result" title="viper.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> unit type objects.</p>
<ul class="simple">
<li><p><strong>.from_dict() and .to_dict():</strong> Helps representing the objects as Python dictionaries.</p></li>
</ul>
</div>
<div class="section" id="useful-abilities-common-to-the-container-types">
<h4>Useful Abilities Common to the Container Types<a class="headerlink" href="#useful-abilities-common-to-the-container-types" title="Permalink to this headline">¶</a></h4>
<p>These abilities are common to <a class="reference internal" href="#viper.Hosts" title="viper.Hosts"><code class="xref py py-class docutils literal notranslate"><span class="pre">Hosts</span></code></a>, <a class="reference internal" href="#viper.Runners" title="viper.Runners"><code class="xref py py-class docutils literal notranslate"><span class="pre">Runners</span></code></a>
and <a class="reference internal" href="#viper.Results" title="viper.Results"><code class="xref py py-class docutils literal notranslate"><span class="pre">Results</span></code></a> container type objects.</p>
<ul>
<li><p><strong>.from_items() and .to_items():</strong> The <code class="docutils literal notranslate"><span class="pre">.from_items()</span></code> factory method is the
recommended way to initialize container type objects. Although it can be a little slower,
it removes duplicate items and performs other important checks before initializing
the object. It supports sequences, generators, unit objects or all at once.</p>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Bad</span>
<span class="n">Hosts</span><span class="p">((</span><span class="n">host1</span><span class="p">,</span> <span class="n">host2</span><span class="p">,</span> <span class="n">host3</span><span class="p">))</span>

<span class="c1"># Good</span>
<span class="n">Hosts</span><span class="o">.</span><span class="n">from_items</span><span class="p">(</span><span class="n">host1</span><span class="p">,</span> <span class="n">host2</span><span class="p">,</span> <span class="n">host3</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">.to_items()</span></code> or the alias <code class="docutils literal notranslate"><span class="pre">.all()</span></code> returns the tuple of unit items back.</p>
<p>Example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Hosts</span><span class="o">.</span><span class="n">from_items</span><span class="p">(</span>
    <span class="n">host1</span><span class="p">,</span> <span class="n">host2</span>                      <span class="c1"># Unit objects</span>
    <span class="p">[</span><span class="n">host3</span><span class="p">,</span> <span class="n">host4</span><span class="p">],</span>                   <span class="c1"># Sequence of objects</span>
    <span class="p">(</span><span class="n">host</span> <span class="k">for</span> <span class="n">host</span> <span class="ow">in</span> <span class="n">list_of_hosts</span><span class="p">)</span>  <span class="c1"># Generator of objects</span>
<span class="p">)</span><span class="o">.</span><span class="n">to_items</span><span class="p">()</span>
</pre></div>
</div>
</li>
<li><p><strong>.from_file() and .to_file():</strong> Container type objects can be initialized from text
files and dumped back to text files with certain formats (currently supported <cite>json</cite>,
<cite>yml</cite> and <cite>csv</cite>) using these methods.</p>
<p>Example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Hosts</span><span class="o">.</span><span class="n">from_file</span><span class="p">(</span><span class="s2">&quot;hosts.json&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">to_file</span><span class="p">(</span><span class="s2">&quot;hosts.csv&quot;</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p><strong>.from_list() and .to_list():</strong> Similar to unit types’ <code class="docutils literal notranslate"><span class="pre">.from_dict()</span></code> and <code class="docutils literal notranslate"><span class="pre">.to_dict()</span></code>
but operates with list of dictionaries that represent the unit type objects.</p></li>
<li><p><strong>.count():</strong> Returns the count of items it holds.</p></li>
<li><p><strong>.head() and .tail():</strong> Returns an instance of the same container type object
containing first or last n items (n defaults to 10).</p>
<p>Example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Get the set of last 5 items from the set of first 10 items.</span>
<span class="n">hosts</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="o">.</span><span class="n">tail</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p><strong>.range():</strong> Similar to <code class="docutils literal notranslate"><span class="pre">.head()</span></code> or <code class="docutils literal notranslate"><span class="pre">.tail()</span></code> but enables us to define a range
(like Python’s <code class="docutils literal notranslate"><span class="pre">list[i:j]</span></code> indexing).</p>
<p>Example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Exclude the last item (like like Python&#39;s list[0:-1])</span>
<span class="n">hosts</span><span class="o">.</span><span class="n">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p><strong>.sort():</strong> Similar to Python’s <code class="docutils literal notranslate"><span class="pre">list.sort()</span></code> but returns a new instance instead of
making changes to the existing object (which is impossible because of immutability).</p>
<p>Example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Reverse sort by IP, then by hostname</span>
<span class="n">hosts</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">host</span><span class="p">:</span> <span class="p">[</span><span class="n">host</span><span class="o">.</span><span class="n">ip</span><span class="p">,</span> <span class="n">host</span><span class="o">.</span><span class="n">hostname</span><span class="p">],</span> <span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p><strong>.order_by():</strong> Similar to <code class="docutils literal notranslate"><span class="pre">.sort()</span></code> but expects the field names instead of a function.
Inspired by SQL.</p>
<p>Example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Reverse sort by ip, then by hostname</span>
<span class="n">hosts</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="s2">&quot;ip&quot;</span><span class="p">,</span> <span class="s2">&quot;hostname&quot;</span><span class="p">,</span> <span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p><strong>.filter():</strong> Similar to Python’s <code class="docutils literal notranslate"><span class="pre">filter()</span></code> but returns an instance of the same
container type object containing the filtered items.</p>
<p>Example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Filter hosts where hostname starts with &quot;foo&quot;</span>
<span class="n">hosts</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">host</span><span class="p">:</span> <span class="n">host</span><span class="o">.</span><span class="n">hostname</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;foo&quot;</span><span class="p">))</span>
</pre></div>
</div>
</li>
<li><p><strong>.where():</strong> Similar to filter, but expects the field name, the condition and the value
instead of a function. Inspired by SQL.</p>
<p>Example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Filter hosts where the hostname starts with &quot;foo&quot;</span>
<span class="n">hosts</span><span class="o">.</span><span class="n">where</span><span class="p">(</span>
    <span class="s2">&quot;hostname&quot;</span><span class="p">,</span> <span class="n">WhereConditions</span><span class="o">.</span><span class="n">startswith</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;foo&quot;</span><span class="p">]</span>
<span class="p">)</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="more-on-task-command-factories-output-processors-callbacks-and">
<h4>More on Task: Command Factories, Output Processors, Callbacks and …<a class="headerlink" href="#more-on-task-command-factories-output-processors-callbacks-and" title="Permalink to this headline">¶</a></h4>
<p>The minimum requirements of defining a <a class="reference internal" href="#viper.Task" title="viper.Task"><code class="xref py py-class docutils literal notranslate"><span class="pre">Task</span></code></a> is to pass
the task name and the command factory. Optionally, we can also pass the stdout and
stderr processors, and also the pre and post run callbacks.</p>
<p>The command factory expects a <a class="reference internal" href="#viper.Host" title="viper.Host"><code class="xref py py-class docutils literal notranslate"><span class="pre">Host</span></code></a> object and returns a tuple of
string.</p>
<p>Example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">ping_command</span><span class="p">(</span><span class="n">host</span><span class="p">):</span>
    <span class="k">return</span> <span class="s2">&quot;ping&quot;</span><span class="p">,</span> <span class="s2">&quot;-c&quot;</span><span class="p">,</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span> <span class="n">host</span><span class="o">.</span><span class="n">ip</span>
</pre></div>
</div>
<p>The stdout and stderr processors expect a string and return a string.</p>
<p>Example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">strip_output</span><span class="p">(</span><span class="n">txt</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">txt</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</pre></div>
</div>
<p>The pre run callback expects a <a class="reference internal" href="#viper.Runner" title="viper.Runner"><code class="xref py py-class docutils literal notranslate"><span class="pre">Runner</span></code></a> object and doesn’t return
anything. While the post run callback expects a <a class="reference internal" href="#viper.Result" title="viper.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> object and
doesn’t return anything either.</p>
<p>Example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">sys</span>

<span class="k">def</span> <span class="nf">log_command_pre_run</span><span class="p">(</span><span class="n">runner</span><span class="p">):</span>
    <span class="n">command</span> <span class="o">=</span> <span class="n">runner</span><span class="o">.</span><span class="n">task</span><span class="o">.</span><span class="n">command_factory</span><span class="p">(</span><span class="n">runner</span><span class="o">.</span><span class="n">host</span><span class="p">,</span> <span class="o">*</span><span class="n">runner</span><span class="o">.</span><span class="n">args</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Running command:&quot;</span><span class="p">,</span> <span class="n">command</span><span class="p">,</span> <span class="n">file</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">log_result_post_run</span><span class="p">(</span><span class="n">result</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;OK:&quot;</span> <span class="k">if</span> <span class="n">result</span><span class="o">.</span><span class="n">ok</span><span class="p">()</span> <span class="k">else</span> <span class="s2">&quot;ERROR:&quot;</span><span class="p">,</span> <span class="n">result</span><span class="o">.</span><span class="n">host</span><span class="o">.</span><span class="n">hostname</span><span class="p">,</span> <span class="n">file</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Logs are being printed to <cite>stderr</cite> as <cite>stdout</cite> is for the JSON encoded
<a class="reference internal" href="#viper.Results" title="viper.Results"><code class="xref py py-class docutils literal notranslate"><span class="pre">Results</span></code></a> object.</p>
</div>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<p>The arguments <code class="docutils literal notranslate"><span class="pre">command_factory</span></code>, <code class="docutils literal notranslate"><span class="pre">stdout_processor</span></code>, <code class="docutils literal notranslate"><span class="pre">stderr_processor</span></code>,
<code class="docutils literal notranslate"><span class="pre">pre_run</span></code> and <code class="docutils literal notranslate"><span class="pre">post_run</span></code> callbacks expect normal functions, not lambdas.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Bad</span>
<span class="k">def</span> <span class="nf">ping</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">Task</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Ping once&quot;</span><span class="p">,</span>
        <span class="n">command_factory</span><span class="o">=</span><span class="k">lambda</span> <span class="n">host</span><span class="p">:</span> <span class="s2">&quot;ping&quot;</span><span class="p">,</span> <span class="s2">&quot;-c&quot;</span><span class="p">,</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span> <span class="n">host</span><span class="o">.</span><span class="n">ip</span><span class="p">,</span>
        <span class="n">stdout_processor</span><span class="o">=</span><span class="k">lambda</span> <span class="n">txt</span><span class="p">:</span> <span class="n">txt</span><span class="o">.</span><span class="n">strip</span><span class="p">(),</span>
        <span class="n">stderr_processor</span><span class="o">=</span><span class="k">lambda</span> <span class="n">txt</span><span class="p">:</span> <span class="n">txt</span><span class="o">.</span><span class="n">strip</span><span class="p">(),</span>
        <span class="n">pre_run</span><span class="o">=</span><span class="k">lambda</span> <span class="n">runner</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="n">runner</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(),</span> <span class="n">file</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">),</span>
        <span class="n">post_run</span><span class="o">=</span><span class="k">lambda</span> <span class="n">result</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(),</span> <span class="n">file</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">),</span>
    <span class="p">)</span>

<span class="c1"># Good</span>
<span class="k">def</span> <span class="nf">ping</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">Task</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Ping once&quot;</span><span class="p">,</span>
        <span class="n">command_factory</span><span class="o">=</span><span class="n">ping_command</span><span class="p">,</span>
        <span class="n">stdout_processor</span><span class="o">=</span><span class="n">strip_output</span><span class="p">,</span>
        <span class="n">stderr_processor</span><span class="o">=</span><span class="n">strip_output</span><span class="p">,</span>
        <span class="n">pre_run</span><span class="o">=</span><span class="n">log_command_pre_run</span><span class="p">,</span>
        <span class="n">post_run</span><span class="o">=</span><span class="n">log_result_post_run</span><span class="p">,</span>
    <span class="p">)</span>
</pre></div>
</div>
</div>
<p>Apart from these, a <a class="reference internal" href="#viper.Task" title="viper.Task"><code class="xref py py-class docutils literal notranslate"><span class="pre">Task</span></code></a> also optionally expects <code class="docutils literal notranslate"><span class="pre">timeout</span></code>,
<code class="docutils literal notranslate"><span class="pre">retry</span></code> and <code class="docutils literal notranslate"><span class="pre">meta</span></code>.</p>
<ul>
<li><p><strong>timeout:</strong> The execution will timeout after the specified seconds if timeout is
defined.</p>
<p>The countdown doesn’t count the time spent on the pre and post run
callbacks, neither the command factory invocation. It only counts time spent on
executing the generated command.</p>
</li>
<li><p><strong>retry:</strong> It defaults to 0. If more than 0, The runner will re-invoke the
<a class="reference internal" href="#viper.Runner.run" title="viper.Runner.run"><code class="xref py py-meth docutils literal notranslate"><span class="pre">run()</span></code></a> method with the updated retry value if the
command execution fails. The results generated for these retries will be stored
in DB and will be available in history. They will have the same <code class="docutils literal notranslate"><span class="pre">trigger_time</span></code> but
different <code class="docutils literal notranslate"><span class="pre">start</span></code> and <code class="docutils literal notranslate"><span class="pre">end</span></code> time values.</p>
<p>However, if the failure is caused by any reason other than the actual command
execution, such as while invoking the command factory or output processors or
pre/post run callbacks, a Python error will be raised which won’t be stored in DB.
If any such error occurs while running the task in batch, it will be ignored with
the traceback printed to stderr.</p>
</li>
<li><p><strong>meta:</strong> It is the same as the <code class="docutils literal notranslate"><span class="pre">meta</span></code> field in <a class="reference internal" href="#viper.Host" title="viper.Host"><code class="xref py py-class docutils literal notranslate"><span class="pre">Host</span></code></a>. The value should
be generated only using the <a class="reference internal" href="#viper.meta" title="viper.meta"><code class="xref py py-func docutils literal notranslate"><span class="pre">viper.meta()</span></code></a> function.</p>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Bad</span>
<span class="k">def</span> <span class="nf">ping</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">Task</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Ping once&quot;</span><span class="p">,</span>
        <span class="n">command_factory</span><span class="o">=</span><span class="n">ping_command</span><span class="p">,</span>
        <span class="n">meta</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;tag&quot;</span><span class="p">:</span> <span class="s2">&quot;foo&quot;</span><span class="p">},</span>
    <span class="p">)</span>

<span class="c1"># Good</span>
<span class="k">def</span> <span class="nf">ping</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">Task</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Ping once&quot;</span><span class="p">,</span>
        <span class="n">command_factory</span><span class="o">=</span><span class="n">ping_command</span><span class="p">,</span>
        <span class="n">meta</span><span class="o">=</span><span class="n">meta</span><span class="p">(</span><span class="n">tag</span><span class="o">=</span><span class="s2">&quot;foo&quot;</span><span class="p">)</span>
    <span class="p">)</span>
</pre></div>
</div>
</div>
</li>
</ul>
<dl class="class">
<dt id="viper.collections.WhereConditions">
<em class="property">class </em><code class="sig-prename descclassname">viper.collections.</code><code class="sig-name descname">WhereConditions</code><a class="reference internal" href="_modules/viper/collections.html#WhereConditions"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.collections.WhereConditions" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">enum.Enum</span></code></p>
<p>Where query conditions for viper Items.</p>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Hosts</span><span class="o">.</span><span class="n">from_items</span><span class="p">(</span>
    <span class="n">Hosts</span><span class="p">(</span><span class="s1">&#39;1.1.1.1&#39;</span><span class="p">),</span>
    <span class="n">Hosts</span><span class="p">(</span><span class="s1">&#39;2.2.2.2&#39;</span><span class="p">),</span>
<span class="p">)</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="s2">&quot;ip&quot;</span><span class="p">,</span> <span class="n">WhereConditions</span><span class="o">.</span><span class="n">is_</span><span class="p">,</span> <span class="s1">&#39;1.1.1.1&#39;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="attribute">
<dt id="viper.collections.WhereConditions.contains">
<code class="sig-name descname">contains</code><em class="property"> = 'CONTAINS'</em><a class="headerlink" href="#viper.collections.WhereConditions.contains" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="viper.collections.WhereConditions.endswith">
<code class="sig-name descname">endswith</code><em class="property"> = 'ENDSWITH'</em><a class="headerlink" href="#viper.collections.WhereConditions.endswith" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="viper.collections.WhereConditions.is_">
<code class="sig-name descname">is_</code><em class="property"> = 'IS'</em><a class="headerlink" href="#viper.collections.WhereConditions.is_" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="viper.collections.WhereConditions.is_not">
<code class="sig-name descname">is_not</code><em class="property"> = 'IS_NOT'</em><a class="headerlink" href="#viper.collections.WhereConditions.is_not" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="viper.collections.WhereConditions.not_contains">
<code class="sig-name descname">not_contains</code><em class="property"> = 'NOT_CONTAINS'</em><a class="headerlink" href="#viper.collections.WhereConditions.not_contains" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="viper.collections.WhereConditions.not_endswith">
<code class="sig-name descname">not_endswith</code><em class="property"> = 'NOT_ENDSWITH'</em><a class="headerlink" href="#viper.collections.WhereConditions.not_endswith" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="viper.collections.WhereConditions.not_startswith">
<code class="sig-name descname">not_startswith</code><em class="property"> = 'NOT_STARTSWITH'</em><a class="headerlink" href="#viper.collections.WhereConditions.not_startswith" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="viper.collections.WhereConditions.startswith">
<code class="sig-name descname">startswith</code><em class="property"> = 'STARTSWITH'</em><a class="headerlink" href="#viper.collections.WhereConditions.startswith" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="viper.collections.Collection">
<em class="property">class </em><code class="sig-prename descclassname">viper.collections.</code><code class="sig-name descname">Collection</code><a class="reference internal" href="_modules/viper/collections.html#Collection"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.collections.Collection" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>The base collection class.</p>
<p>This is the parent class for all Viper native objects such as
<a class="reference internal" href="#viper.collections.Host" title="viper.collections.Host"><code class="xref py py-class docutils literal notranslate"><span class="pre">viper.collections.Host</span></code></a>, <a class="reference internal" href="#viper.collections.Results" title="viper.collections.Results"><code class="xref py py-class docutils literal notranslate"><span class="pre">viper.collections.Results</span></code></a> etc.</p>
<dl class="method">
<dt id="viper.collections.Collection.from_func">
<em class="property">classmethod </em><code class="sig-name descname">from_func</code><span class="sig-paren">(</span><em class="sig-param">funcpath: str</em><span class="sig-paren">)</span> &#x2192; CollectionType<a class="reference internal" href="_modules/viper/collections.html#Collection.from_func"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.collections.Collection.from_func" title="Permalink to this definition">¶</a></dt>
<dd><p>Load the object from the given Python function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>funcpath</strong> (<em>str</em>) – The path to a Python function that returns an
instance of this class.</p>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Task</span><span class="o">.</span><span class="n">from_func</span><span class="p">(</span><span class="s2">&quot;task.ping&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Collection.from_json">
<em class="property">classmethod </em><code class="sig-name descname">from_json</code><span class="sig-paren">(</span><em class="sig-param">json: str</em>, <em class="sig-param">*args: Any</em>, <em class="sig-param">unflatten: bool = False</em>, <em class="sig-param">**kwargs: Any</em><span class="sig-paren">)</span> &#x2192; CollectionType<a class="reference internal" href="_modules/viper/collections.html#Collection.from_json"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.collections.Collection.from_json" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialise a new object of this class from the given JSON string.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>json</strong> (<em>str</em>) – The JSON data to parse.</p></li>
<li><p><strong>and **kwargs</strong> (<em>*args</em>) – These will be passed to <cite>json.laods</cite>.</p></li>
</ul>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Hosts</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="s1">&#39;[{&quot;ip&quot;: &quot;1.1.1.1&quot;}]&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Collection.hash">
<code class="sig-name descname">hash</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; int<a class="reference internal" href="_modules/viper/collections.html#Collection.hash"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.collections.Collection.hash" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the hash value.</p>
<p>By convention all Viper native objects are frozen and thus hashable.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Collection.pipe">
<code class="sig-name descname">pipe</code><span class="sig-paren">(</span><em class="sig-param">handler: Any</em>, <em class="sig-param">*args: Any</em><span class="sig-paren">)</span> &#x2192; T<a class="reference internal" href="_modules/viper/collections.html#Collection.pipe"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.collections.Collection.pipe" title="Permalink to this definition">¶</a></dt>
<dd><p>Pipe this object to the given function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>handler</strong> (<em>callable</em>) – A callable that expects this object.</p></li>
<li><p><strong>args</strong> (<em>object</em>) – Arguments to be passed to the handler for decision making.</p></li>
</ul>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Hosts</span><span class="o">.</span><span class="n">from_items</span><span class="p">(</span><span class="n">Host</span><span class="p">(</span><span class="s2">&quot;1.2.3.4&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">pipe</span><span class="p">(</span><span class="n">hosts2csv</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Collection.to_json">
<code class="sig-name descname">to_json</code><span class="sig-paren">(</span><em class="sig-param">*args: Any</em>, <em class="sig-param">flatten: bool = False</em>, <em class="sig-param">**kwargs: Any</em><span class="sig-paren">)</span> &#x2192; str<a class="reference internal" href="_modules/viper/collections.html#Collection.to_json"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.collections.Collection.to_json" title="Permalink to this definition">¶</a></dt>
<dd><p>Represent the collection as JSON data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>*args and **kwargs</strong> (<em>object</em>) – These will be passed to <code class="docutils literal notranslate"><span class="pre">json.laods</span></code>.</p>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Host</span><span class="p">(</span><span class="s2">&quot;1.2.3.4&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="viper.collections.meta">
<code class="sig-prename descclassname">viper.collections.</code><code class="sig-name descname">meta</code><span class="sig-paren">(</span><em class="sig-param">**mapping: Union[str, bool, int, float, None]</em><span class="sig-paren">)</span> &#x2192; Any<a class="reference internal" href="_modules/viper/collections.html#meta"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.collections.meta" title="Permalink to this definition">¶</a></dt>
<dd><p>Meta data object creator.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>**mapping</strong> – key-value pairs as the meta data.</p>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">viper</span> <span class="kn">import</span> <span class="n">Host</span><span class="p">,</span> <span class="n">meta</span>

<span class="n">host</span> <span class="o">=</span> <span class="n">Host</span><span class="p">(</span><span class="s1">&#39;1.1.1.1&#39;</span><span class="p">,</span> <span class="n">meta</span><span class="o">=</span><span class="n">meta</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;aws&quot;</span><span class="p">))</span>
<span class="n">host</span><span class="o">.</span><span class="n">meta</span><span class="o">.</span><span class="n">provider</span>
<span class="c1"># &#39;aws&#39;</span>
<span class="n">host</span><span class="o">.</span><span class="n">meta</span><span class="p">[</span><span class="s1">&#39;provider&#39;</span><span class="p">]</span>
<span class="c1"># &#39;aws&#39;</span>
<span class="n">host</span><span class="p">[</span><span class="s1">&#39;meta&#39;</span><span class="p">][</span><span class="s1">&#39;provider&#39;</span><span class="p">]</span>
<span class="c1"># &#39;aws&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="class">
<dt id="viper.collections.Item">
<em class="property">class </em><code class="sig-prename descclassname">viper.collections.</code><code class="sig-name descname">Item</code><a class="reference internal" href="_modules/viper/collections.html#Item"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.collections.Item" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#viper.collections.Collection" title="viper.collections.Collection"><code class="xref py py-class docutils literal notranslate"><span class="pre">viper.collections.Collection</span></code></a></p>
<p>The base class for a single Viper object.</p>
<p><a class="reference internal" href="#viper.collections.Host" title="viper.collections.Host"><code class="xref py py-class docutils literal notranslate"><span class="pre">viper.collections.Host</span></code></a>, <a class="reference internal" href="#viper.collections.Task" title="viper.collections.Task"><code class="xref py py-class docutils literal notranslate"><span class="pre">viper.collections.Task</span></code></a> etc. inherits this base class.</p>
<dl class="method">
<dt id="viper.collections.Item.format">
<code class="sig-name descname">format</code><span class="sig-paren">(</span><em class="sig-param">template: str</em><span class="sig-paren">)</span> &#x2192; str<a class="reference internal" href="_modules/viper/collections.html#Item.format"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.collections.Item.format" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a custom string representation of this object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>template</strong> (<em>str</em>) – The template to be used as <cite>“template”.format(**vars(self))</cite></p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>str</p>
</dd>
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Host</span><span class="p">(</span><span class="s2">&quot;1.2.3.4&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{ip}</span><span class="s2"> </span><span class="si">{hostname}</span><span class="s2"> </span><span class="si">{meta.tag}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Item.from_dict">
<em class="property">classmethod </em><code class="sig-name descname">from_dict</code><span class="sig-paren">(</span><em class="sig-param">dict_: Dict[object, object], *, unflatten: bool = False</em><span class="sig-paren">)</span> &#x2192; ItemType<a class="reference internal" href="_modules/viper/collections.html#Item.from_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.collections.Item.from_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize item from the given dict.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>dict</strong> (<em>dict</em>) – The dictionary containing the properties for this object.</p>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Host</span><span class="o">.</span><span class="n">from_dict</span><span class="p">({</span><span class="s2">&quot;ip&quot;</span><span class="p">:</span> <span class="s2">&quot;1.2.3.4&quot;</span><span class="p">})</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Item.from_func">
<em class="property">classmethod </em><code class="sig-name descname">from_func</code><span class="sig-paren">(</span><em class="sig-param">funcpath: str</em><span class="sig-paren">)</span> &#x2192; CollectionType<a class="headerlink" href="#viper.collections.Item.from_func" title="Permalink to this definition">¶</a></dt>
<dd><p>Load the object from the given Python function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>funcpath</strong> (<em>str</em>) – The path to a Python function that returns an
instance of this class.</p>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Task</span><span class="o">.</span><span class="n">from_func</span><span class="p">(</span><span class="s2">&quot;task.ping&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Item.from_json">
<em class="property">classmethod </em><code class="sig-name descname">from_json</code><span class="sig-paren">(</span><em class="sig-param">json: str</em>, <em class="sig-param">*args: Any</em>, <em class="sig-param">unflatten: bool = False</em>, <em class="sig-param">**kwargs: Any</em><span class="sig-paren">)</span> &#x2192; ItemType<a class="reference internal" href="_modules/viper/collections.html#Item.from_json"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.collections.Item.from_json" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialise a new object of this class from the given JSON string.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>json</strong> (<em>str</em>) – The JSON data to parse.</p></li>
<li><p><strong>and **kwargs</strong> (<em>*args</em>) – These will be passed to <cite>json.laods</cite>.</p></li>
</ul>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Hosts</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="s1">&#39;[{&quot;ip&quot;: &quot;1.1.1.1&quot;}]&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Item.hash">
<code class="sig-name descname">hash</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; int<a class="headerlink" href="#viper.collections.Item.hash" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the hash value.</p>
<p>By convention all Viper native objects are frozen and thus hashable.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Item.pipe">
<code class="sig-name descname">pipe</code><span class="sig-paren">(</span><em class="sig-param">handler: Any</em>, <em class="sig-param">*args: Any</em><span class="sig-paren">)</span> &#x2192; T<a class="headerlink" href="#viper.collections.Item.pipe" title="Permalink to this definition">¶</a></dt>
<dd><p>Pipe this object to the given function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>handler</strong> (<em>callable</em>) – A callable that expects this object.</p></li>
<li><p><strong>args</strong> (<em>object</em>) – Arguments to be passed to the handler for decision making.</p></li>
</ul>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Hosts</span><span class="o">.</span><span class="n">from_items</span><span class="p">(</span><span class="n">Host</span><span class="p">(</span><span class="s2">&quot;1.2.3.4&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">pipe</span><span class="p">(</span><span class="n">hosts2csv</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Item.to_dict">
<code class="sig-name descname">to_dict</code><span class="sig-paren">(</span><em class="sig-param">*</em>, <em class="sig-param">flatten: bool = False</em><span class="sig-paren">)</span> &#x2192; Dict[str, Any]<a class="reference internal" href="_modules/viper/collections.html#Item.to_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.collections.Item.to_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Represent the item as dict.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>flatten</strong> (<em>bool</em>) – If true, the dict won’t be nested.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>dict</p>
</dd>
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Host</span><span class="p">(</span><span class="s2">&quot;1.2.3.4&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Item.to_json">
<code class="sig-name descname">to_json</code><span class="sig-paren">(</span><em class="sig-param">*args: Any</em>, <em class="sig-param">flatten: bool = False</em>, <em class="sig-param">**kwargs: Any</em><span class="sig-paren">)</span> &#x2192; str<a class="reference internal" href="_modules/viper/collections.html#Item.to_json"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.collections.Item.to_json" title="Permalink to this definition">¶</a></dt>
<dd><p>Represent the collection as JSON data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>*args and **kwargs</strong> (<em>object</em>) – These will be passed to <code class="docutils literal notranslate"><span class="pre">json.laods</span></code>.</p>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Host</span><span class="p">(</span><span class="s2">&quot;1.2.3.4&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="viper.collections.Items">
<em class="property">class </em><code class="sig-prename descclassname">viper.collections.</code><code class="sig-name descname">Items</code><span class="sig-paren">(</span><em class="sig-param">_all: Sequence[T] = &lt;factory&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/viper/collections.html#Items"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.collections.Items" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#viper.collections.Collection" title="viper.collections.Collection"><code class="xref py py-class docutils literal notranslate"><span class="pre">viper.collections.Collection</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">typing.Generic</span></code></p>
<p>The base class for collection objects for a group of similar items.</p>
<p><a class="reference internal" href="#viper.collections.Hosts" title="viper.collections.Hosts"><code class="xref py py-class docutils literal notranslate"><span class="pre">viper.collections.Hosts</span></code></a>, <a class="reference internal" href="#viper.collections.Results" title="viper.collections.Results"><code class="xref py py-class docutils literal notranslate"><span class="pre">viper.collections.Results</span></code></a> etc. inherits this base class.</p>
<dl class="method">
<dt id="viper.collections.Items.all">
<code class="sig-name descname">all</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; Sequence[T]<a class="reference internal" href="_modules/viper/collections.html#Items.all"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.collections.Items.all" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for .to_items()</p>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Items.count">
<code class="sig-name descname">count</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; int<a class="reference internal" href="_modules/viper/collections.html#Items.count"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.collections.Items.count" title="Permalink to this definition">¶</a></dt>
<dd><p>Count the number of items.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Items.filter">
<code class="sig-name descname">filter</code><span class="sig-paren">(</span><em class="sig-param">filter_: Any</em>, <em class="sig-param">*args: object</em><span class="sig-paren">)</span> &#x2192; ItemsType<a class="reference internal" href="_modules/viper/collections.html#Items.filter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.collections.Items.filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Filter the items by a given function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filter</strong> (<em>callable</em>) – A function that returns either True or False.</p></li>
<li><p><strong>args</strong> (<em>object</em>) – Arguments to be passed to the filter to manipulate the decision making.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Items.format">
<code class="sig-name descname">format</code><span class="sig-paren">(</span><em class="sig-param">template: str</em>, <em class="sig-param">sep: str = '\n'</em><span class="sig-paren">)</span> &#x2192; str<a class="reference internal" href="_modules/viper/collections.html#Items.format"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.collections.Items.format" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a custom string representation of this list of objects.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>template</strong> (<em>str</em>) – The template will be compiled by Python’s <cite>.format()</cite>.</p></li>
<li><p><strong>sep</strong> (<em>str</em>) – The separator used to separate all the items.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>str</p>
</dd>
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Hosts</span><span class="o">.</span><span class="n">from_items</span><span class="p">(</span><span class="n">Host</span><span class="p">(</span><span class="s2">&quot;1.2.3.4&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{ip}</span><span class="s2"> </span><span class="si">{hostname}</span><span class="s2"> </span><span class="si">{meta.tag}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Items.from_file">
<em class="property">classmethod </em><code class="sig-name descname">from_file</code><span class="sig-paren">(</span><em class="sig-param">filepath: str</em><span class="sig-paren">)</span> &#x2192; ItemsType<a class="reference internal" href="_modules/viper/collections.html#Items.from_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.collections.Items.from_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize items by reading data from a file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>str</strong> (<em>filepath</em>) – The path for the file to read from.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#viper.collections.Items" title="viper.collections.Items">viper.collections.Items</a></p>
</dd>
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Hosts</span><span class="o">.</span><span class="n">from_file</span><span class="p">(</span><span class="s2">&quot;/path/to/file/hosts.json&quot;</span><span class="p">)</span>

<span class="n">Hosts</span><span class="o">.</span><span class="n">from_file</span><span class="p">(</span><span class="s2">&quot;/path/to/file/hosts.csv&quot;</span><span class="p">)</span>

<span class="n">Hosts</span><span class="o">.</span><span class="n">from_file</span><span class="p">(</span><span class="s2">&quot;/path/to/file/hosts.yml&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Items.from_func">
<em class="property">classmethod </em><code class="sig-name descname">from_func</code><span class="sig-paren">(</span><em class="sig-param">funcpath: str</em><span class="sig-paren">)</span> &#x2192; CollectionType<a class="headerlink" href="#viper.collections.Items.from_func" title="Permalink to this definition">¶</a></dt>
<dd><p>Load the object from the given Python function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>funcpath</strong> (<em>str</em>) – The path to a Python function that returns an
instance of this class.</p>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Task</span><span class="o">.</span><span class="n">from_func</span><span class="p">(</span><span class="s2">&quot;task.ping&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Items.from_items">
<em class="property">classmethod </em><code class="sig-name descname">from_items</code><span class="sig-paren">(</span><em class="sig-param">*items: Union[Iterable[T], T]</em><span class="sig-paren">)</span> &#x2192; ItemsType<a class="reference internal" href="_modules/viper/collections.html#Items.from_items"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.collections.Items.from_items" title="Permalink to this definition">¶</a></dt>
<dd><p>Create this an instance of this object using the given items.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>items</strong> (<a class="reference internal" href="#viper.collections.Item" title="viper.collections.Item"><em>viper.collections.Item</em></a>) – The group of items to hold.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#viper.collections.Items" title="viper.collections.Items">viper.collections.Items</a></p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Classes that inherits from <a class="reference internal" href="#viper.collections.Items" title="viper.collections.Items"><code class="xref py py-class docutils literal notranslate"><span class="pre">Items</span></code></a> should not be
initialized directly (e.g. <code class="docutils literal notranslate"><span class="pre">Hosts(Host(&quot;1.2.3.4&quot;))</span></code>). Factory
methods such as this should be used instead.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Hosts</span><span class="o">.</span><span class="n">from_items</span><span class="p">(</span><span class="n">Host</span><span class="p">(</span><span class="s2">&quot;1.2.3.4&quot;</span><span class="p">))</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Items.from_json">
<em class="property">classmethod </em><code class="sig-name descname">from_json</code><span class="sig-paren">(</span><em class="sig-param">json: str</em>, <em class="sig-param">*args: Any</em>, <em class="sig-param">unflatten: bool = False</em>, <em class="sig-param">**kwargs: Any</em><span class="sig-paren">)</span> &#x2192; ItemsType<a class="reference internal" href="_modules/viper/collections.html#Items.from_json"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.collections.Items.from_json" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialise a new object of this class from the given JSON string.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>json</strong> (<em>str</em>) – The JSON data to parse.</p></li>
<li><p><strong>and **kwargs</strong> (<em>*args</em>) – These will be passed to <cite>json.laods</cite>.</p></li>
</ul>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Hosts</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="s1">&#39;[{&quot;ip&quot;: &quot;1.1.1.1&quot;}]&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Items.from_list">
<em class="property">classmethod </em><code class="sig-name descname">from_list</code><span class="sig-paren">(</span><em class="sig-param">list_: Sequence[Dict[object, object]], *, unflatten: bool = False</em><span class="sig-paren">)</span> &#x2192; ItemsType<a class="reference internal" href="_modules/viper/collections.html#Items.from_list"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.collections.Items.from_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize items from given list of dictiionaries.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>list</strong> (<em>list</em>) – The list of dictiionaries containing the item properties.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#viper.collections.Items" title="viper.collections.Items">viper.collections.Items</a></p>
</dd>
</dl>
<p>This is used for loading JSON data into an instance of this class.</p>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Hosts</span><span class="o">.</span><span class="n">from_list</span><span class="p">([{</span><span class="s2">&quot;ip&quot;</span><span class="p">:</span> <span class="s2">&quot;1.2.3.4&quot;</span><span class="p">}])</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Items.hash">
<code class="sig-name descname">hash</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; int<a class="headerlink" href="#viper.collections.Items.hash" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the hash value.</p>
<p>By convention all Viper native objects are frozen and thus hashable.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Items.head">
<code class="sig-name descname">head</code><span class="sig-paren">(</span><em class="sig-param">n: int = 10</em><span class="sig-paren">)</span> &#x2192; ItemsType<a class="reference internal" href="_modules/viper/collections.html#Items.head"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.collections.Items.head" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the first ‘n’ items from the group of items.</p>
<p>Works like Python’s [:n] index</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#viper.collections.Item" title="viper.collections.Item">viper.collections.Item</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Items.order_by">
<code class="sig-name descname">order_by</code><span class="sig-paren">(</span><em class="sig-param">*properties: str</em>, <em class="sig-param">reverse: bool = False</em><span class="sig-paren">)</span> &#x2192; ItemsType<a class="reference internal" href="_modules/viper/collections.html#Items.order_by"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.collections.Items.order_by" title="Permalink to this definition">¶</a></dt>
<dd><p>Sort the items by multiple properties</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>properties</strong> (<em>list</em>) – The item will be sorted by the given properties in order.</p></li>
<li><p><strong>reverse</strong> (<em>bool</em>) – Reverse the order after sort.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#viper.collections.Items" title="viper.collections.Items">Items</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Items.pipe">
<code class="sig-name descname">pipe</code><span class="sig-paren">(</span><em class="sig-param">handler: Any</em>, <em class="sig-param">*args: Any</em><span class="sig-paren">)</span> &#x2192; T<a class="headerlink" href="#viper.collections.Items.pipe" title="Permalink to this definition">¶</a></dt>
<dd><p>Pipe this object to the given function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>handler</strong> (<em>callable</em>) – A callable that expects this object.</p></li>
<li><p><strong>args</strong> (<em>object</em>) – Arguments to be passed to the handler for decision making.</p></li>
</ul>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Hosts</span><span class="o">.</span><span class="n">from_items</span><span class="p">(</span><span class="n">Host</span><span class="p">(</span><span class="s2">&quot;1.2.3.4&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">pipe</span><span class="p">(</span><span class="n">hosts2csv</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Items.range">
<code class="sig-name descname">range</code><span class="sig-paren">(</span><em class="sig-param">i: Optional[int] = None</em>, <em class="sig-param">j: Optional[int] = None</em><span class="sig-paren">)</span> &#x2192; ItemsType<a class="reference internal" href="_modules/viper/collections.html#Items.range"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.collections.Items.range" title="Permalink to this definition">¶</a></dt>
<dd><p>get the items in given range.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>i</strong><strong> (</strong><strong>optional</strong><strong>)</strong> (<em>int</em>) – The first index.</p></li>
<li><p><strong>j</strong><strong> (</strong><strong>optional</strong><strong>)</strong> (<em>int</em>) – The last index.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#viper.collections.Items" title="viper.collections.Items">Items</a></p>
</dd>
</dl>
<p>This has the same behaviour as Python’s [i:j]</p>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Items.sort">
<code class="sig-name descname">sort</code><span class="sig-paren">(</span><em class="sig-param">key: Optional[Callable[[viper.collections.Item], object]] = None, reverse: bool = False</em><span class="sig-paren">)</span> &#x2192; ItemsType<a class="reference internal" href="_modules/viper/collections.html#Items.sort"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.collections.Items.sort" title="Permalink to this definition">¶</a></dt>
<dd><p>Sort the items by given key/function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>key</strong> (<em>callable</em>) – A function similar to the one passed to the built-in <cite>sorted()</cite>.</p></li>
<li><p><strong>reverse</strong> (<em>bool</em>) – Reverse the order after sort.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#viper.collections.Items" title="viper.collections.Items">Items</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Items.tail">
<code class="sig-name descname">tail</code><span class="sig-paren">(</span><em class="sig-param">n: int = 10</em><span class="sig-paren">)</span> &#x2192; ItemsType<a class="reference internal" href="_modules/viper/collections.html#Items.tail"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.collections.Items.tail" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the last ‘n’ item from the group of items.</p>
<p>Works like Python’s [-n:] index</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#viper.collections.Item" title="viper.collections.Item">viper.collections.Item</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Items.to_file">
<code class="sig-name descname">to_file</code><span class="sig-paren">(</span><em class="sig-param">filepath: str</em><span class="sig-paren">)</span> &#x2192; ItemsType<a class="reference internal" href="_modules/viper/collections.html#Items.to_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.collections.Items.to_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize items by reading data from a file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>str</strong> (<em>filepath</em>) – The path for the file to write.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#viper.collections.Items" title="viper.collections.Items">viper.collections.Items</a></p>
</dd>
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Hosts</span><span class="o">.</span><span class="n">from_items</span><span class="p">(</span><span class="n">Host</span><span class="p">(</span><span class="s2">&quot;1.2.3.4&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">to_file</span><span class="p">(</span><span class="s2">&quot;/path/to/file/hosts.json&quot;</span><span class="p">)</span>

<span class="n">Hosts</span><span class="o">.</span><span class="n">from_items</span><span class="p">(</span><span class="n">Host</span><span class="p">(</span><span class="s2">&quot;1.2.3.4&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">to_file</span><span class="p">(</span><span class="s2">&quot;/path/to/file/hosts.csv&quot;</span><span class="p">)</span>

<span class="n">Hosts</span><span class="o">.</span><span class="n">from_items</span><span class="p">(</span><span class="n">Host</span><span class="p">(</span><span class="s2">&quot;1.2.3.4&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">to_file</span><span class="p">(</span><span class="s2">&quot;/path/to/file/hosts.yml&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Items.to_items">
<code class="sig-name descname">to_items</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; Sequence[T]<a class="reference internal" href="_modules/viper/collections.html#Items.to_items"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.collections.Items.to_items" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a tuple of all the items.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>tuple</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Items.to_json">
<code class="sig-name descname">to_json</code><span class="sig-paren">(</span><em class="sig-param">*args: Any</em>, <em class="sig-param">flatten: bool = False</em>, <em class="sig-param">**kwargs: Any</em><span class="sig-paren">)</span> &#x2192; str<a class="reference internal" href="_modules/viper/collections.html#Items.to_json"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.collections.Items.to_json" title="Permalink to this definition">¶</a></dt>
<dd><p>Represent the collection as JSON data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>*args and **kwargs</strong> (<em>object</em>) – These will be passed to <code class="docutils literal notranslate"><span class="pre">json.laods</span></code>.</p>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Host</span><span class="p">(</span><span class="s2">&quot;1.2.3.4&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Items.to_list">
<code class="sig-name descname">to_list</code><span class="sig-paren">(</span><em class="sig-param">flatten: bool = False</em><span class="sig-paren">)</span> &#x2192; List[Dict[str, object]]<a class="reference internal" href="_modules/viper/collections.html#Items.to_list"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.collections.Items.to_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Represent the items as a list of dictiionaries.</p>
<p>This is used for dumping an instance of this object as JSON data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>flatten</strong> (<em>bool</em>) – If True, dicts won’t be nested.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>list</p>
</dd>
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Hosts</span><span class="o">.</span><span class="n">from_items</span><span class="p">(</span><span class="n">Host</span><span class="p">(</span><span class="s2">&quot;1.2.3.4&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Items.where">
<code class="sig-name descname">where</code><span class="sig-paren">(</span><em class="sig-param">key: str, condition: viper.collections.WhereConditions, values: Sequence[str]</em><span class="sig-paren">)</span> &#x2192; ItemsType<a class="reference internal" href="_modules/viper/collections.html#Items.where"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.collections.Items.where" title="Permalink to this definition">¶</a></dt>
<dd><p>Select items by a custom query.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>key</strong> (<em>str</em>) – The key will be compiled by Python’s <cite>.format()</cite>.</p></li>
<li><p><strong>condition</strong> (<a class="reference internal" href="#viper.collections.WhereConditions" title="viper.collections.WhereConditions"><em>viper.collections.WhereConditions</em></a>) – The where condition.</p></li>
<li><p><strong>values</strong> (<em>list</em>) – The values for the key.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#viper.collections.Items" title="viper.collections.Items">Items</a></p>
</dd>
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Hosts</span><span class="o">.</span><span class="n">from_items</span><span class="p">(</span>
    <span class="n">Host</span><span class="p">(</span><span class="s2">&quot;1.1.1.1&quot;</span><span class="p">),</span>
    <span class="n">Host</span><span class="p">(</span><span class="s2">&quot;2.2.2.2&quot;</span><span class="p">)</span>
<span class="p">)</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="s2">&quot;ip&quot;</span><span class="p">,</span> <span class="n">WhereConditions</span><span class="o">.</span><span class="n">is_</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;1.1.1.1&quot;</span><span class="p">])</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="viper.collections.Host">
<em class="property">class </em><code class="sig-prename descclassname">viper.collections.</code><code class="sig-name descname">Host</code><span class="sig-paren">(</span><em class="sig-param">ip: str</em>, <em class="sig-param">hostname: Optional[str] = None</em>, <em class="sig-param">domain: Optional[str] = None</em>, <em class="sig-param">port: int = 22</em>, <em class="sig-param">login_name: Optional[str] = None</em>, <em class="sig-param">identity_file: Optional[str] = None</em>, <em class="sig-param">meta: Any = &lt;factory&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/viper/collections.html#Host"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.collections.Host" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#viper.collections.Item" title="viper.collections.Item"><code class="xref py py-class docutils literal notranslate"><span class="pre">viper.collections.Item</span></code></a></p>
<p>Viper Host class.</p>
<dl class="attribute">
<dt id="viper.collections.Host.domain">
<code class="sig-name descname">domain</code><em class="property"> = None</em><a class="headerlink" href="#viper.collections.Host.domain" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="viper.collections.Host.format">
<code class="sig-name descname">format</code><span class="sig-paren">(</span><em class="sig-param">template: str</em><span class="sig-paren">)</span> &#x2192; str<a class="headerlink" href="#viper.collections.Host.format" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a custom string representation of this object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>template</strong> (<em>str</em>) – The template to be used as <cite>“template”.format(**vars(self))</cite></p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>str</p>
</dd>
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Host</span><span class="p">(</span><span class="s2">&quot;1.2.3.4&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{ip}</span><span class="s2"> </span><span class="si">{hostname}</span><span class="s2"> </span><span class="si">{meta.tag}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Host.fqdn">
<code class="sig-name descname">fqdn</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; str<a class="reference internal" href="_modules/viper/collections.html#Host.fqdn"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.collections.Host.fqdn" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the FQDN from hostname and domain name.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – If either of hostname or domain name is not set.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Host.from_dict">
<em class="property">classmethod </em><code class="sig-name descname">from_dict</code><span class="sig-paren">(</span><em class="sig-param">dict_: Dict[object, object], *, unflatten: bool = False</em><span class="sig-paren">)</span> &#x2192; viper.collections.Host<a class="reference internal" href="_modules/viper/collections.html#Host.from_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.collections.Host.from_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize item from the given dict.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>dict</strong> (<em>dict</em>) – The dictionary containing the properties for this object.</p>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Host</span><span class="o">.</span><span class="n">from_dict</span><span class="p">({</span><span class="s2">&quot;ip&quot;</span><span class="p">:</span> <span class="s2">&quot;1.2.3.4&quot;</span><span class="p">})</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Host.from_func">
<em class="property">classmethod </em><code class="sig-name descname">from_func</code><span class="sig-paren">(</span><em class="sig-param">funcpath: str</em><span class="sig-paren">)</span> &#x2192; CollectionType<a class="headerlink" href="#viper.collections.Host.from_func" title="Permalink to this definition">¶</a></dt>
<dd><p>Load the object from the given Python function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>funcpath</strong> (<em>str</em>) – The path to a Python function that returns an
instance of this class.</p>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Task</span><span class="o">.</span><span class="n">from_func</span><span class="p">(</span><span class="s2">&quot;task.ping&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Host.from_json">
<em class="property">classmethod </em><code class="sig-name descname">from_json</code><span class="sig-paren">(</span><em class="sig-param">json: str</em>, <em class="sig-param">*args: Any</em>, <em class="sig-param">unflatten: bool = False</em>, <em class="sig-param">**kwargs: Any</em><span class="sig-paren">)</span> &#x2192; ItemType<a class="headerlink" href="#viper.collections.Host.from_json" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialise a new object of this class from the given JSON string.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>json</strong> (<em>str</em>) – The JSON data to parse.</p></li>
<li><p><strong>and **kwargs</strong> (<em>*args</em>) – These will be passed to <cite>json.laods</cite>.</p></li>
</ul>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Hosts</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="s1">&#39;[{&quot;ip&quot;: &quot;1.1.1.1&quot;}]&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Host.hash">
<code class="sig-name descname">hash</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; int<a class="headerlink" href="#viper.collections.Host.hash" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the hash value.</p>
<p>By convention all Viper native objects are frozen and thus hashable.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="viper.collections.Host.hostname">
<code class="sig-name descname">hostname</code><em class="property"> = None</em><a class="headerlink" href="#viper.collections.Host.hostname" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="viper.collections.Host.identity_file">
<code class="sig-name descname">identity_file</code><em class="property"> = None</em><a class="headerlink" href="#viper.collections.Host.identity_file" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="viper.collections.Host.login_name">
<code class="sig-name descname">login_name</code><em class="property"> = None</em><a class="headerlink" href="#viper.collections.Host.login_name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="viper.collections.Host.pipe">
<code class="sig-name descname">pipe</code><span class="sig-paren">(</span><em class="sig-param">handler: Any</em>, <em class="sig-param">*args: Any</em><span class="sig-paren">)</span> &#x2192; T<a class="headerlink" href="#viper.collections.Host.pipe" title="Permalink to this definition">¶</a></dt>
<dd><p>Pipe this object to the given function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>handler</strong> (<em>callable</em>) – A callable that expects this object.</p></li>
<li><p><strong>args</strong> (<em>object</em>) – Arguments to be passed to the handler for decision making.</p></li>
</ul>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Hosts</span><span class="o">.</span><span class="n">from_items</span><span class="p">(</span><span class="n">Host</span><span class="p">(</span><span class="s2">&quot;1.2.3.4&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">pipe</span><span class="p">(</span><span class="n">hosts2csv</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="attribute">
<dt id="viper.collections.Host.port">
<code class="sig-name descname">port</code><em class="property"> = 22</em><a class="headerlink" href="#viper.collections.Host.port" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="viper.collections.Host.results">
<code class="sig-name descname">results</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; viper.collections.Results<a class="reference internal" href="_modules/viper/collections.html#Host.results"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.collections.Host.results" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetch recent results of current host from database.</p>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Host.run_task">
<code class="sig-name descname">run_task</code><span class="sig-paren">(</span><em class="sig-param">task: viper.collections.Task</em>, <em class="sig-param">*args: str</em><span class="sig-paren">)</span> &#x2192; viper.collections.Result<a class="reference internal" href="_modules/viper/collections.html#Host.run_task"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.collections.Host.run_task" title="Permalink to this definition">¶</a></dt>
<dd><p>Assign the task to the host and then run it.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>task</strong> (<a class="reference internal" href="#viper.collections.Task" title="viper.collections.Task"><em>viper.collections.Task</em></a>) – The task to be assigned.</p></li>
<li><p><strong>args</strong> (<em>str</em>) – The arguments to be used to create the command
from <code class="xref py py-attr docutils literal notranslate"><span class="pre">viper.collections.Task.command_factory</span></code>.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#viper.collections.Result" title="viper.collections.Result">viper.collections.Result</a></p>
</dd>
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Host</span><span class="p">(</span><span class="s2">&quot;1.2.3.4&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">task_task</span><span class="p">(</span><span class="n">ping</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Host.task">
<code class="sig-name descname">task</code><span class="sig-paren">(</span><em class="sig-param">task: viper.collections.Task</em>, <em class="sig-param">*args: str</em><span class="sig-paren">)</span> &#x2192; viper.collections.Runner<a class="reference internal" href="_modules/viper/collections.html#Host.task"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.collections.Host.task" title="Permalink to this definition">¶</a></dt>
<dd><p>Assigns a task to be run.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>task</strong> (<a class="reference internal" href="#viper.collections.Task" title="viper.collections.Task"><em>viper.collections.Task</em></a>) – The task to be assigned.</p></li>
<li><p><strong>args</strong> (<em>str</em>) – The arguments to be used to create the command from <cite>command_factory</cite>.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#viper.collections.Runner" title="viper.collections.Runner">viper.collections.Runner</a></p>
</dd>
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Host</span><span class="p">(</span><span class="s2">&quot;1.2.3.4&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">task</span><span class="p">(</span><span class="n">ping</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Host.to_dict">
<code class="sig-name descname">to_dict</code><span class="sig-paren">(</span><em class="sig-param">*</em>, <em class="sig-param">flatten: bool = False</em><span class="sig-paren">)</span> &#x2192; Dict[str, object]<a class="reference internal" href="_modules/viper/collections.html#Host.to_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.collections.Host.to_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Represent the item as dict.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>flatten</strong> (<em>bool</em>) – If true, the dict won’t be nested.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>dict</p>
</dd>
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Host</span><span class="p">(</span><span class="s2">&quot;1.2.3.4&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Host.to_json">
<code class="sig-name descname">to_json</code><span class="sig-paren">(</span><em class="sig-param">*args: Any</em>, <em class="sig-param">flatten: bool = False</em>, <em class="sig-param">**kwargs: Any</em><span class="sig-paren">)</span> &#x2192; str<a class="headerlink" href="#viper.collections.Host.to_json" title="Permalink to this definition">¶</a></dt>
<dd><p>Represent the collection as JSON data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>*args and **kwargs</strong> (<em>object</em>) – These will be passed to <code class="docutils literal notranslate"><span class="pre">json.laods</span></code>.</p>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Host</span><span class="p">(</span><span class="s2">&quot;1.2.3.4&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="viper.collections.Hosts">
<em class="property">class </em><code class="sig-prename descclassname">viper.collections.</code><code class="sig-name descname">Hosts</code><span class="sig-paren">(</span><em class="sig-param">_all: Sequence[viper.collections.Host] = &lt;factory&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/viper/collections.html#Hosts"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.collections.Hosts" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#viper.collections.Items" title="viper.collections.Items"><code class="xref py py-class docutils literal notranslate"><span class="pre">viper.collections.Items</span></code></a></p>
<p>A group of <a class="reference internal" href="#viper.collections.Host" title="viper.collections.Host"><code class="xref py py-class docutils literal notranslate"><span class="pre">viper.collections.Host</span></code></a> objects.</p>
<dl class="method">
<dt id="viper.collections.Hosts.all">
<code class="sig-name descname">all</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; Sequence[T]<a class="headerlink" href="#viper.collections.Hosts.all" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for .to_items()</p>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Hosts.count">
<code class="sig-name descname">count</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; int<a class="headerlink" href="#viper.collections.Hosts.count" title="Permalink to this definition">¶</a></dt>
<dd><p>Count the number of items.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Hosts.filter">
<code class="sig-name descname">filter</code><span class="sig-paren">(</span><em class="sig-param">filter_: Any</em>, <em class="sig-param">*args: object</em><span class="sig-paren">)</span> &#x2192; ItemsType<a class="headerlink" href="#viper.collections.Hosts.filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Filter the items by a given function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filter</strong> (<em>callable</em>) – A function that returns either True or False.</p></li>
<li><p><strong>args</strong> (<em>object</em>) – Arguments to be passed to the filter to manipulate the decision making.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Hosts.format">
<code class="sig-name descname">format</code><span class="sig-paren">(</span><em class="sig-param">template: str</em>, <em class="sig-param">sep: str = '\n'</em><span class="sig-paren">)</span> &#x2192; str<a class="headerlink" href="#viper.collections.Hosts.format" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a custom string representation of this list of objects.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>template</strong> (<em>str</em>) – The template will be compiled by Python’s <cite>.format()</cite>.</p></li>
<li><p><strong>sep</strong> (<em>str</em>) – The separator used to separate all the items.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>str</p>
</dd>
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Hosts</span><span class="o">.</span><span class="n">from_items</span><span class="p">(</span><span class="n">Host</span><span class="p">(</span><span class="s2">&quot;1.2.3.4&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{ip}</span><span class="s2"> </span><span class="si">{hostname}</span><span class="s2"> </span><span class="si">{meta.tag}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Hosts.from_file">
<em class="property">classmethod </em><code class="sig-name descname">from_file</code><span class="sig-paren">(</span><em class="sig-param">filepath: str</em><span class="sig-paren">)</span> &#x2192; ItemsType<a class="headerlink" href="#viper.collections.Hosts.from_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize items by reading data from a file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>str</strong> (<em>filepath</em>) – The path for the file to read from.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#viper.collections.Items" title="viper.collections.Items">viper.collections.Items</a></p>
</dd>
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Hosts</span><span class="o">.</span><span class="n">from_file</span><span class="p">(</span><span class="s2">&quot;/path/to/file/hosts.json&quot;</span><span class="p">)</span>

<span class="n">Hosts</span><span class="o">.</span><span class="n">from_file</span><span class="p">(</span><span class="s2">&quot;/path/to/file/hosts.csv&quot;</span><span class="p">)</span>

<span class="n">Hosts</span><span class="o">.</span><span class="n">from_file</span><span class="p">(</span><span class="s2">&quot;/path/to/file/hosts.yml&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Hosts.from_func">
<em class="property">classmethod </em><code class="sig-name descname">from_func</code><span class="sig-paren">(</span><em class="sig-param">funcpath: str</em><span class="sig-paren">)</span> &#x2192; CollectionType<a class="headerlink" href="#viper.collections.Hosts.from_func" title="Permalink to this definition">¶</a></dt>
<dd><p>Load the object from the given Python function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>funcpath</strong> (<em>str</em>) – The path to a Python function that returns an
instance of this class.</p>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Task</span><span class="o">.</span><span class="n">from_func</span><span class="p">(</span><span class="s2">&quot;task.ping&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Hosts.from_items">
<em class="property">classmethod </em><code class="sig-name descname">from_items</code><span class="sig-paren">(</span><em class="sig-param">*items: Union[Iterable[T], T]</em><span class="sig-paren">)</span> &#x2192; ItemsType<a class="headerlink" href="#viper.collections.Hosts.from_items" title="Permalink to this definition">¶</a></dt>
<dd><p>Create this an instance of this object using the given items.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>items</strong> (<a class="reference internal" href="#viper.collections.Item" title="viper.collections.Item"><em>viper.collections.Item</em></a>) – The group of items to hold.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#viper.collections.Items" title="viper.collections.Items">viper.collections.Items</a></p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Classes that inherits from <a class="reference internal" href="#viper.collections.Items" title="viper.collections.Items"><code class="xref py py-class docutils literal notranslate"><span class="pre">Items</span></code></a> should not be
initialized directly (e.g. <code class="docutils literal notranslate"><span class="pre">Hosts(Host(&quot;1.2.3.4&quot;))</span></code>). Factory
methods such as this should be used instead.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Hosts</span><span class="o">.</span><span class="n">from_items</span><span class="p">(</span><span class="n">Host</span><span class="p">(</span><span class="s2">&quot;1.2.3.4&quot;</span><span class="p">))</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Hosts.from_json">
<em class="property">classmethod </em><code class="sig-name descname">from_json</code><span class="sig-paren">(</span><em class="sig-param">json: str</em>, <em class="sig-param">*args: Any</em>, <em class="sig-param">unflatten: bool = False</em>, <em class="sig-param">**kwargs: Any</em><span class="sig-paren">)</span> &#x2192; ItemsType<a class="headerlink" href="#viper.collections.Hosts.from_json" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialise a new object of this class from the given JSON string.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>json</strong> (<em>str</em>) – The JSON data to parse.</p></li>
<li><p><strong>and **kwargs</strong> (<em>*args</em>) – These will be passed to <cite>json.laods</cite>.</p></li>
</ul>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Hosts</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="s1">&#39;[{&quot;ip&quot;: &quot;1.1.1.1&quot;}]&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Hosts.from_list">
<em class="property">classmethod </em><code class="sig-name descname">from_list</code><span class="sig-paren">(</span><em class="sig-param">list_: Sequence[Dict[object, object]], *, unflatten: bool = False</em><span class="sig-paren">)</span> &#x2192; ItemsType<a class="headerlink" href="#viper.collections.Hosts.from_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize items from given list of dictiionaries.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>list</strong> (<em>list</em>) – The list of dictiionaries containing the item properties.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#viper.collections.Items" title="viper.collections.Items">viper.collections.Items</a></p>
</dd>
</dl>
<p>This is used for loading JSON data into an instance of this class.</p>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Hosts</span><span class="o">.</span><span class="n">from_list</span><span class="p">([{</span><span class="s2">&quot;ip&quot;</span><span class="p">:</span> <span class="s2">&quot;1.2.3.4&quot;</span><span class="p">}])</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Hosts.hash">
<code class="sig-name descname">hash</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; int<a class="headerlink" href="#viper.collections.Hosts.hash" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the hash value.</p>
<p>By convention all Viper native objects are frozen and thus hashable.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Hosts.head">
<code class="sig-name descname">head</code><span class="sig-paren">(</span><em class="sig-param">n: int = 10</em><span class="sig-paren">)</span> &#x2192; ItemsType<a class="headerlink" href="#viper.collections.Hosts.head" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the first ‘n’ items from the group of items.</p>
<p>Works like Python’s [:n] index</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#viper.collections.Item" title="viper.collections.Item">viper.collections.Item</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Hosts.order_by">
<code class="sig-name descname">order_by</code><span class="sig-paren">(</span><em class="sig-param">*properties: str</em>, <em class="sig-param">reverse: bool = False</em><span class="sig-paren">)</span> &#x2192; ItemsType<a class="headerlink" href="#viper.collections.Hosts.order_by" title="Permalink to this definition">¶</a></dt>
<dd><p>Sort the items by multiple properties</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>properties</strong> (<em>list</em>) – The item will be sorted by the given properties in order.</p></li>
<li><p><strong>reverse</strong> (<em>bool</em>) – Reverse the order after sort.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#viper.collections.Items" title="viper.collections.Items">Items</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Hosts.pipe">
<code class="sig-name descname">pipe</code><span class="sig-paren">(</span><em class="sig-param">handler: Any</em>, <em class="sig-param">*args: Any</em><span class="sig-paren">)</span> &#x2192; T<a class="headerlink" href="#viper.collections.Hosts.pipe" title="Permalink to this definition">¶</a></dt>
<dd><p>Pipe this object to the given function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>handler</strong> (<em>callable</em>) – A callable that expects this object.</p></li>
<li><p><strong>args</strong> (<em>object</em>) – Arguments to be passed to the handler for decision making.</p></li>
</ul>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Hosts</span><span class="o">.</span><span class="n">from_items</span><span class="p">(</span><span class="n">Host</span><span class="p">(</span><span class="s2">&quot;1.2.3.4&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">pipe</span><span class="p">(</span><span class="n">hosts2csv</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Hosts.range">
<code class="sig-name descname">range</code><span class="sig-paren">(</span><em class="sig-param">i: Optional[int] = None</em>, <em class="sig-param">j: Optional[int] = None</em><span class="sig-paren">)</span> &#x2192; ItemsType<a class="headerlink" href="#viper.collections.Hosts.range" title="Permalink to this definition">¶</a></dt>
<dd><p>get the items in given range.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>i</strong><strong> (</strong><strong>optional</strong><strong>)</strong> (<em>int</em>) – The first index.</p></li>
<li><p><strong>j</strong><strong> (</strong><strong>optional</strong><strong>)</strong> (<em>int</em>) – The last index.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#viper.collections.Items" title="viper.collections.Items">Items</a></p>
</dd>
</dl>
<p>This has the same behaviour as Python’s [i:j]</p>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Hosts.results">
<code class="sig-name descname">results</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; viper.collections.Results<a class="reference internal" href="_modules/viper/collections.html#Hosts.results"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.collections.Hosts.results" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the past results of this group of hosts from history.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#viper.collections.Results" title="viper.collections.Results">viper.collections.Results</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Hosts.run_task">
<code class="sig-name descname">run_task</code><span class="sig-paren">(</span><em class="sig-param">task: viper.collections.Task</em>, <em class="sig-param">*args: str</em>, <em class="sig-param">max_workers: int = 0</em><span class="sig-paren">)</span> &#x2192; viper.collections.Results<a class="reference internal" href="_modules/viper/collections.html#Hosts.run_task"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.collections.Hosts.run_task" title="Permalink to this definition">¶</a></dt>
<dd><p>Assign the task to the host and then run it.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>task</strong> (<a class="reference internal" href="#viper.collections.Task" title="viper.collections.Task"><em>viper.collections.Task</em></a>) – The task to be assigned.</p></li>
<li><p><strong>args</strong> (<em>str</em>) – The arguments to be used to create the command
from <code class="xref py py-attr docutils literal notranslate"><span class="pre">viper.collections.Task.command_factory</span></code>.</p></li>
<li><p><strong>max_workers</strong> (<em>int</em>) – Maximum number of thread workers.
if the value is &lt;= 1, tasks will run in sequence.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#viper.collections.Results" title="viper.collections.Results">viper.collections.Results</a></p>
</dd>
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Hosts</span><span class="o">.</span><span class="n">from_items</span><span class="p">(</span><span class="n">Host</span><span class="p">(</span><span class="s2">&quot;1.2.3.4&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">task_task</span><span class="p">(</span><span class="n">ping</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Hosts.sort">
<code class="sig-name descname">sort</code><span class="sig-paren">(</span><em class="sig-param">key: Optional[Callable[[viper.collections.Item], object]] = None, reverse: bool = False</em><span class="sig-paren">)</span> &#x2192; ItemsType<a class="headerlink" href="#viper.collections.Hosts.sort" title="Permalink to this definition">¶</a></dt>
<dd><p>Sort the items by given key/function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>key</strong> (<em>callable</em>) – A function similar to the one passed to the built-in <cite>sorted()</cite>.</p></li>
<li><p><strong>reverse</strong> (<em>bool</em>) – Reverse the order after sort.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#viper.collections.Items" title="viper.collections.Items">Items</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Hosts.tail">
<code class="sig-name descname">tail</code><span class="sig-paren">(</span><em class="sig-param">n: int = 10</em><span class="sig-paren">)</span> &#x2192; ItemsType<a class="headerlink" href="#viper.collections.Hosts.tail" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the last ‘n’ item from the group of items.</p>
<p>Works like Python’s [-n:] index</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#viper.collections.Item" title="viper.collections.Item">viper.collections.Item</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Hosts.task">
<code class="sig-name descname">task</code><span class="sig-paren">(</span><em class="sig-param">task: viper.collections.Task</em>, <em class="sig-param">*args: str</em><span class="sig-paren">)</span> &#x2192; viper.collections.Runners<a class="reference internal" href="_modules/viper/collections.html#Hosts.task"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.collections.Hosts.task" title="Permalink to this definition">¶</a></dt>
<dd><p>Assigns a task to be run on each host in the group.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>task</strong> (<a class="reference internal" href="#viper.collections.Task" title="viper.collections.Task"><em>viper.collections.Task</em></a>) – The task to be assigned.</p></li>
<li><p><strong>args</strong> (<em>str</em>) – The arguments to be used to create the command from <cite>command_factory</cite>.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#viper.collections.Runners" title="viper.collections.Runners">viper.collections.Runners</a></p>
</dd>
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Hosts</span><span class="o">.</span><span class="n">from_items</span><span class="p">(</span><span class="n">Host</span><span class="p">(</span><span class="s2">&quot;1.2.3.4&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">task</span><span class="p">(</span><span class="n">ping</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Hosts.to_file">
<code class="sig-name descname">to_file</code><span class="sig-paren">(</span><em class="sig-param">filepath: str</em><span class="sig-paren">)</span> &#x2192; ItemsType<a class="headerlink" href="#viper.collections.Hosts.to_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize items by reading data from a file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>str</strong> (<em>filepath</em>) – The path for the file to write.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#viper.collections.Items" title="viper.collections.Items">viper.collections.Items</a></p>
</dd>
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Hosts</span><span class="o">.</span><span class="n">from_items</span><span class="p">(</span><span class="n">Host</span><span class="p">(</span><span class="s2">&quot;1.2.3.4&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">to_file</span><span class="p">(</span><span class="s2">&quot;/path/to/file/hosts.json&quot;</span><span class="p">)</span>

<span class="n">Hosts</span><span class="o">.</span><span class="n">from_items</span><span class="p">(</span><span class="n">Host</span><span class="p">(</span><span class="s2">&quot;1.2.3.4&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">to_file</span><span class="p">(</span><span class="s2">&quot;/path/to/file/hosts.csv&quot;</span><span class="p">)</span>

<span class="n">Hosts</span><span class="o">.</span><span class="n">from_items</span><span class="p">(</span><span class="n">Host</span><span class="p">(</span><span class="s2">&quot;1.2.3.4&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">to_file</span><span class="p">(</span><span class="s2">&quot;/path/to/file/hosts.yml&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Hosts.to_items">
<code class="sig-name descname">to_items</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; Sequence[T]<a class="headerlink" href="#viper.collections.Hosts.to_items" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a tuple of all the items.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>tuple</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Hosts.to_json">
<code class="sig-name descname">to_json</code><span class="sig-paren">(</span><em class="sig-param">*args: Any</em>, <em class="sig-param">flatten: bool = False</em>, <em class="sig-param">**kwargs: Any</em><span class="sig-paren">)</span> &#x2192; str<a class="headerlink" href="#viper.collections.Hosts.to_json" title="Permalink to this definition">¶</a></dt>
<dd><p>Represent the collection as JSON data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>*args and **kwargs</strong> (<em>object</em>) – These will be passed to <code class="docutils literal notranslate"><span class="pre">json.laods</span></code>.</p>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Host</span><span class="p">(</span><span class="s2">&quot;1.2.3.4&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Hosts.to_list">
<code class="sig-name descname">to_list</code><span class="sig-paren">(</span><em class="sig-param">flatten: bool = False</em><span class="sig-paren">)</span> &#x2192; List[Dict[str, object]]<a class="headerlink" href="#viper.collections.Hosts.to_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Represent the items as a list of dictiionaries.</p>
<p>This is used for dumping an instance of this object as JSON data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>flatten</strong> (<em>bool</em>) – If True, dicts won’t be nested.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>list</p>
</dd>
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Hosts</span><span class="o">.</span><span class="n">from_items</span><span class="p">(</span><span class="n">Host</span><span class="p">(</span><span class="s2">&quot;1.2.3.4&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Hosts.where">
<code class="sig-name descname">where</code><span class="sig-paren">(</span><em class="sig-param">key: str, condition: viper.collections.WhereConditions, values: Sequence[str]</em><span class="sig-paren">)</span> &#x2192; ItemsType<a class="headerlink" href="#viper.collections.Hosts.where" title="Permalink to this definition">¶</a></dt>
<dd><p>Select items by a custom query.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>key</strong> (<em>str</em>) – The key will be compiled by Python’s <cite>.format()</cite>.</p></li>
<li><p><strong>condition</strong> (<a class="reference internal" href="#viper.collections.WhereConditions" title="viper.collections.WhereConditions"><em>viper.collections.WhereConditions</em></a>) – The where condition.</p></li>
<li><p><strong>values</strong> (<em>list</em>) – The values for the key.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#viper.collections.Items" title="viper.collections.Items">Items</a></p>
</dd>
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Hosts</span><span class="o">.</span><span class="n">from_items</span><span class="p">(</span>
    <span class="n">Host</span><span class="p">(</span><span class="s2">&quot;1.1.1.1&quot;</span><span class="p">),</span>
    <span class="n">Host</span><span class="p">(</span><span class="s2">&quot;2.2.2.2&quot;</span><span class="p">)</span>
<span class="p">)</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="s2">&quot;ip&quot;</span><span class="p">,</span> <span class="n">WhereConditions</span><span class="o">.</span><span class="n">is_</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;1.1.1.1&quot;</span><span class="p">])</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="viper.collections.Task">
<em class="property">class </em><code class="sig-prename descclassname">viper.collections.</code><code class="sig-name descname">Task</code><span class="sig-paren">(</span><em class="sig-param">name: str, command_factory: Any, timeout: Union[int, float, None] = None, retry: int = 0, stdout_processor: Optional[Callable[[str], str]] = None, stderr_processor: Optional[Callable[[str], str]] = None, pre_run: Optional[Callable[[viper.collections.Runner], None]] = None, post_run: Optional[Callable[[viper.collections.Result], None]] = None, meta: Any = &lt;factory&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/viper/collections.html#Task"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.collections.Task" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#viper.collections.Item" title="viper.collections.Item"><code class="xref py py-class docutils literal notranslate"><span class="pre">viper.collections.Item</span></code></a></p>
<p>A task is a definition of a single operation.</p>
<p>A task must contain name and a <strong>named function</strong> to generate the
command.</p>
<dl class="method">
<dt id="viper.collections.Task.format">
<code class="sig-name descname">format</code><span class="sig-paren">(</span><em class="sig-param">template: str</em><span class="sig-paren">)</span> &#x2192; str<a class="headerlink" href="#viper.collections.Task.format" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a custom string representation of this object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>template</strong> (<em>str</em>) – The template to be used as <cite>“template”.format(**vars(self))</cite></p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>str</p>
</dd>
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Host</span><span class="p">(</span><span class="s2">&quot;1.2.3.4&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{ip}</span><span class="s2"> </span><span class="si">{hostname}</span><span class="s2"> </span><span class="si">{meta.tag}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Task.from_dict">
<em class="property">classmethod </em><code class="sig-name descname">from_dict</code><span class="sig-paren">(</span><em class="sig-param">dict_: Dict[object, object], *, unflatten: bool = False</em><span class="sig-paren">)</span> &#x2192; viper.collections.Task<a class="reference internal" href="_modules/viper/collections.html#Task.from_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.collections.Task.from_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize item from the given dict.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>dict</strong> (<em>dict</em>) – The dictionary containing the properties for this object.</p>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Host</span><span class="o">.</span><span class="n">from_dict</span><span class="p">({</span><span class="s2">&quot;ip&quot;</span><span class="p">:</span> <span class="s2">&quot;1.2.3.4&quot;</span><span class="p">})</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Task.from_func">
<em class="property">classmethod </em><code class="sig-name descname">from_func</code><span class="sig-paren">(</span><em class="sig-param">funcpath: str</em><span class="sig-paren">)</span> &#x2192; CollectionType<a class="headerlink" href="#viper.collections.Task.from_func" title="Permalink to this definition">¶</a></dt>
<dd><p>Load the object from the given Python function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>funcpath</strong> (<em>str</em>) – The path to a Python function that returns an
instance of this class.</p>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Task</span><span class="o">.</span><span class="n">from_func</span><span class="p">(</span><span class="s2">&quot;task.ping&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Task.from_json">
<em class="property">classmethod </em><code class="sig-name descname">from_json</code><span class="sig-paren">(</span><em class="sig-param">json: str</em>, <em class="sig-param">*args: Any</em>, <em class="sig-param">unflatten: bool = False</em>, <em class="sig-param">**kwargs: Any</em><span class="sig-paren">)</span> &#x2192; ItemType<a class="headerlink" href="#viper.collections.Task.from_json" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialise a new object of this class from the given JSON string.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>json</strong> (<em>str</em>) – The JSON data to parse.</p></li>
<li><p><strong>and **kwargs</strong> (<em>*args</em>) – These will be passed to <cite>json.laods</cite>.</p></li>
</ul>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Hosts</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="s1">&#39;[{&quot;ip&quot;: &quot;1.1.1.1&quot;}]&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Task.hash">
<code class="sig-name descname">hash</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; int<a class="headerlink" href="#viper.collections.Task.hash" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the hash value.</p>
<p>By convention all Viper native objects are frozen and thus hashable.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Task.pipe">
<code class="sig-name descname">pipe</code><span class="sig-paren">(</span><em class="sig-param">handler: Any</em>, <em class="sig-param">*args: Any</em><span class="sig-paren">)</span> &#x2192; T<a class="headerlink" href="#viper.collections.Task.pipe" title="Permalink to this definition">¶</a></dt>
<dd><p>Pipe this object to the given function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>handler</strong> (<em>callable</em>) – A callable that expects this object.</p></li>
<li><p><strong>args</strong> (<em>object</em>) – Arguments to be passed to the handler for decision making.</p></li>
</ul>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Hosts</span><span class="o">.</span><span class="n">from_items</span><span class="p">(</span><span class="n">Host</span><span class="p">(</span><span class="s2">&quot;1.2.3.4&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">pipe</span><span class="p">(</span><span class="n">hosts2csv</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="attribute">
<dt id="viper.collections.Task.post_run">
<code class="sig-name descname">post_run</code><em class="property"> = None</em><a class="headerlink" href="#viper.collections.Task.post_run" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="viper.collections.Task.pre_run">
<code class="sig-name descname">pre_run</code><em class="property"> = None</em><a class="headerlink" href="#viper.collections.Task.pre_run" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="viper.collections.Task.results">
<code class="sig-name descname">results</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; viper.collections.Results<a class="reference internal" href="_modules/viper/collections.html#Task.results"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.collections.Task.results" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the past results of this task.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Rviper.collections.esults</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="viper.collections.Task.retry">
<code class="sig-name descname">retry</code><em class="property"> = 0</em><a class="headerlink" href="#viper.collections.Task.retry" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="viper.collections.Task.stderr_processor">
<code class="sig-name descname">stderr_processor</code><em class="property"> = None</em><a class="headerlink" href="#viper.collections.Task.stderr_processor" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="viper.collections.Task.stdout_processor">
<code class="sig-name descname">stdout_processor</code><em class="property"> = None</em><a class="headerlink" href="#viper.collections.Task.stdout_processor" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="viper.collections.Task.timeout">
<code class="sig-name descname">timeout</code><em class="property"> = None</em><a class="headerlink" href="#viper.collections.Task.timeout" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="viper.collections.Task.to_dict">
<code class="sig-name descname">to_dict</code><span class="sig-paren">(</span><em class="sig-param">*</em>, <em class="sig-param">flatten: bool = False</em><span class="sig-paren">)</span> &#x2192; Dict[str, object]<a class="reference internal" href="_modules/viper/collections.html#Task.to_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.collections.Task.to_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Represent the item as dict.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>flatten</strong> (<em>bool</em>) – If true, the dict won’t be nested.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>dict</p>
</dd>
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Host</span><span class="p">(</span><span class="s2">&quot;1.2.3.4&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Task.to_json">
<code class="sig-name descname">to_json</code><span class="sig-paren">(</span><em class="sig-param">*args: Any</em>, <em class="sig-param">flatten: bool = False</em>, <em class="sig-param">**kwargs: Any</em><span class="sig-paren">)</span> &#x2192; str<a class="headerlink" href="#viper.collections.Task.to_json" title="Permalink to this definition">¶</a></dt>
<dd><p>Represent the collection as JSON data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>*args and **kwargs</strong> (<em>object</em>) – These will be passed to <code class="docutils literal notranslate"><span class="pre">json.laods</span></code>.</p>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Host</span><span class="p">(</span><span class="s2">&quot;1.2.3.4&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="viper.collections.Runner">
<em class="property">class </em><code class="sig-prename descclassname">viper.collections.</code><code class="sig-name descname">Runner</code><span class="sig-paren">(</span><em class="sig-param">host: viper.collections.Host</em>, <em class="sig-param">task: viper.collections.Task</em>, <em class="sig-param">args: Tuple[str</em>, <em class="sig-param">...] = ()</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/viper/collections.html#Runner"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.collections.Runner" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#viper.collections.Item" title="viper.collections.Item"><code class="xref py py-class docutils literal notranslate"><span class="pre">viper.collections.Item</span></code></a></p>
<p>A single task runner.</p>
<p>A runner owns the responsibility of actually generating and running
the command, store the result, calling, retrying, etc.
We generally do not use it directly.</p>
<dl class="attribute">
<dt id="viper.collections.Runner.args">
<code class="sig-name descname">args</code><em class="property"> = ()</em><a class="headerlink" href="#viper.collections.Runner.args" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="viper.collections.Runner.format">
<code class="sig-name descname">format</code><span class="sig-paren">(</span><em class="sig-param">template: str</em><span class="sig-paren">)</span> &#x2192; str<a class="headerlink" href="#viper.collections.Runner.format" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a custom string representation of this object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>template</strong> (<em>str</em>) – The template to be used as <cite>“template”.format(**vars(self))</cite></p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>str</p>
</dd>
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Host</span><span class="p">(</span><span class="s2">&quot;1.2.3.4&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{ip}</span><span class="s2"> </span><span class="si">{hostname}</span><span class="s2"> </span><span class="si">{meta.tag}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Runner.from_dict">
<em class="property">classmethod </em><code class="sig-name descname">from_dict</code><span class="sig-paren">(</span><em class="sig-param">dict_: Dict[object, object], *, unflatten: bool = False</em><span class="sig-paren">)</span> &#x2192; viper.collections.Runner<a class="reference internal" href="_modules/viper/collections.html#Runner.from_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.collections.Runner.from_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize item from the given dict.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>dict</strong> (<em>dict</em>) – The dictionary containing the properties for this object.</p>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Host</span><span class="o">.</span><span class="n">from_dict</span><span class="p">({</span><span class="s2">&quot;ip&quot;</span><span class="p">:</span> <span class="s2">&quot;1.2.3.4&quot;</span><span class="p">})</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Runner.from_func">
<em class="property">classmethod </em><code class="sig-name descname">from_func</code><span class="sig-paren">(</span><em class="sig-param">funcpath: str</em><span class="sig-paren">)</span> &#x2192; CollectionType<a class="headerlink" href="#viper.collections.Runner.from_func" title="Permalink to this definition">¶</a></dt>
<dd><p>Load the object from the given Python function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>funcpath</strong> (<em>str</em>) – The path to a Python function that returns an
instance of this class.</p>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Task</span><span class="o">.</span><span class="n">from_func</span><span class="p">(</span><span class="s2">&quot;task.ping&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Runner.from_json">
<em class="property">classmethod </em><code class="sig-name descname">from_json</code><span class="sig-paren">(</span><em class="sig-param">json: str</em>, <em class="sig-param">*args: Any</em>, <em class="sig-param">unflatten: bool = False</em>, <em class="sig-param">**kwargs: Any</em><span class="sig-paren">)</span> &#x2192; ItemType<a class="headerlink" href="#viper.collections.Runner.from_json" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialise a new object of this class from the given JSON string.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>json</strong> (<em>str</em>) – The JSON data to parse.</p></li>
<li><p><strong>and **kwargs</strong> (<em>*args</em>) – These will be passed to <cite>json.laods</cite>.</p></li>
</ul>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Hosts</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="s1">&#39;[{&quot;ip&quot;: &quot;1.1.1.1&quot;}]&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Runner.hash">
<code class="sig-name descname">hash</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; int<a class="headerlink" href="#viper.collections.Runner.hash" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the hash value.</p>
<p>By convention all Viper native objects are frozen and thus hashable.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Runner.pipe">
<code class="sig-name descname">pipe</code><span class="sig-paren">(</span><em class="sig-param">handler: Any</em>, <em class="sig-param">*args: Any</em><span class="sig-paren">)</span> &#x2192; T<a class="headerlink" href="#viper.collections.Runner.pipe" title="Permalink to this definition">¶</a></dt>
<dd><p>Pipe this object to the given function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>handler</strong> (<em>callable</em>) – A callable that expects this object.</p></li>
<li><p><strong>args</strong> (<em>object</em>) – Arguments to be passed to the handler for decision making.</p></li>
</ul>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Hosts</span><span class="o">.</span><span class="n">from_items</span><span class="p">(</span><span class="n">Host</span><span class="p">(</span><span class="s2">&quot;1.2.3.4&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">pipe</span><span class="p">(</span><span class="n">hosts2csv</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Runner.run">
<code class="sig-name descname">run</code><span class="sig-paren">(</span><em class="sig-param">retry: int = 0</em>, <em class="sig-param">trigger_time: Optional[float] = None</em><span class="sig-paren">)</span> &#x2192; viper.collections.Result<a class="reference internal" href="_modules/viper/collections.html#Runner.run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.collections.Runner.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Run the task on the host.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>retry</strong> (<em>int</em>) – Count of retries used.</p></li>
<li><p><strong>trigger_time</strong><strong> (</strong><strong>optional</strong><strong>)</strong> (<em>float</em>) – The trigger time used for grouping (auto generated).</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#viper.collections.Result" title="viper.collections.Result">viper.collections.Result</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Runner.to_dict">
<code class="sig-name descname">to_dict</code><span class="sig-paren">(</span><em class="sig-param">*</em>, <em class="sig-param">flatten: bool = False</em><span class="sig-paren">)</span> &#x2192; Dict[str, Any]<a class="reference internal" href="_modules/viper/collections.html#Runner.to_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.collections.Runner.to_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Represent the item as dict.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>flatten</strong> (<em>bool</em>) – If true, the dict won’t be nested.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>dict</p>
</dd>
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Host</span><span class="p">(</span><span class="s2">&quot;1.2.3.4&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Runner.to_json">
<code class="sig-name descname">to_json</code><span class="sig-paren">(</span><em class="sig-param">*args: Any</em>, <em class="sig-param">flatten: bool = False</em>, <em class="sig-param">**kwargs: Any</em><span class="sig-paren">)</span> &#x2192; str<a class="headerlink" href="#viper.collections.Runner.to_json" title="Permalink to this definition">¶</a></dt>
<dd><p>Represent the collection as JSON data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>*args and **kwargs</strong> (<em>object</em>) – These will be passed to <code class="docutils literal notranslate"><span class="pre">json.laods</span></code>.</p>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Host</span><span class="p">(</span><span class="s2">&quot;1.2.3.4&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="viper.collections.Runners">
<em class="property">class </em><code class="sig-prename descclassname">viper.collections.</code><code class="sig-name descname">Runners</code><span class="sig-paren">(</span><em class="sig-param">*args</em>, <em class="sig-param">**kwds</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/viper/collections.html#Runners"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.collections.Runners" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#viper.collections.Items" title="viper.collections.Items"><code class="xref py py-class docutils literal notranslate"><span class="pre">viper.collections.Items</span></code></a></p>
<dl class="method">
<dt id="viper.collections.Runners.all">
<code class="sig-name descname">all</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; Sequence[T]<a class="headerlink" href="#viper.collections.Runners.all" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for .to_items()</p>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Runners.count">
<code class="sig-name descname">count</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; int<a class="headerlink" href="#viper.collections.Runners.count" title="Permalink to this definition">¶</a></dt>
<dd><p>Count the number of items.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Runners.filter">
<code class="sig-name descname">filter</code><span class="sig-paren">(</span><em class="sig-param">filter_: Any</em>, <em class="sig-param">*args: object</em><span class="sig-paren">)</span> &#x2192; ItemsType<a class="headerlink" href="#viper.collections.Runners.filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Filter the items by a given function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filter</strong> (<em>callable</em>) – A function that returns either True or False.</p></li>
<li><p><strong>args</strong> (<em>object</em>) – Arguments to be passed to the filter to manipulate the decision making.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Runners.format">
<code class="sig-name descname">format</code><span class="sig-paren">(</span><em class="sig-param">template: str</em>, <em class="sig-param">sep: str = '\n'</em><span class="sig-paren">)</span> &#x2192; str<a class="headerlink" href="#viper.collections.Runners.format" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a custom string representation of this list of objects.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>template</strong> (<em>str</em>) – The template will be compiled by Python’s <cite>.format()</cite>.</p></li>
<li><p><strong>sep</strong> (<em>str</em>) – The separator used to separate all the items.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>str</p>
</dd>
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Hosts</span><span class="o">.</span><span class="n">from_items</span><span class="p">(</span><span class="n">Host</span><span class="p">(</span><span class="s2">&quot;1.2.3.4&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{ip}</span><span class="s2"> </span><span class="si">{hostname}</span><span class="s2"> </span><span class="si">{meta.tag}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Runners.from_file">
<em class="property">classmethod </em><code class="sig-name descname">from_file</code><span class="sig-paren">(</span><em class="sig-param">filepath: str</em><span class="sig-paren">)</span> &#x2192; ItemsType<a class="headerlink" href="#viper.collections.Runners.from_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize items by reading data from a file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>str</strong> (<em>filepath</em>) – The path for the file to read from.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#viper.collections.Items" title="viper.collections.Items">viper.collections.Items</a></p>
</dd>
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Hosts</span><span class="o">.</span><span class="n">from_file</span><span class="p">(</span><span class="s2">&quot;/path/to/file/hosts.json&quot;</span><span class="p">)</span>

<span class="n">Hosts</span><span class="o">.</span><span class="n">from_file</span><span class="p">(</span><span class="s2">&quot;/path/to/file/hosts.csv&quot;</span><span class="p">)</span>

<span class="n">Hosts</span><span class="o">.</span><span class="n">from_file</span><span class="p">(</span><span class="s2">&quot;/path/to/file/hosts.yml&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Runners.from_func">
<em class="property">classmethod </em><code class="sig-name descname">from_func</code><span class="sig-paren">(</span><em class="sig-param">funcpath: str</em><span class="sig-paren">)</span> &#x2192; CollectionType<a class="headerlink" href="#viper.collections.Runners.from_func" title="Permalink to this definition">¶</a></dt>
<dd><p>Load the object from the given Python function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>funcpath</strong> (<em>str</em>) – The path to a Python function that returns an
instance of this class.</p>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Task</span><span class="o">.</span><span class="n">from_func</span><span class="p">(</span><span class="s2">&quot;task.ping&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Runners.from_items">
<em class="property">classmethod </em><code class="sig-name descname">from_items</code><span class="sig-paren">(</span><em class="sig-param">*items: Union[Iterable[T], T]</em><span class="sig-paren">)</span> &#x2192; ItemsType<a class="headerlink" href="#viper.collections.Runners.from_items" title="Permalink to this definition">¶</a></dt>
<dd><p>Create this an instance of this object using the given items.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>items</strong> (<a class="reference internal" href="#viper.collections.Item" title="viper.collections.Item"><em>viper.collections.Item</em></a>) – The group of items to hold.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#viper.collections.Items" title="viper.collections.Items">viper.collections.Items</a></p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Classes that inherits from <a class="reference internal" href="#viper.collections.Items" title="viper.collections.Items"><code class="xref py py-class docutils literal notranslate"><span class="pre">Items</span></code></a> should not be
initialized directly (e.g. <code class="docutils literal notranslate"><span class="pre">Hosts(Host(&quot;1.2.3.4&quot;))</span></code>). Factory
methods such as this should be used instead.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Hosts</span><span class="o">.</span><span class="n">from_items</span><span class="p">(</span><span class="n">Host</span><span class="p">(</span><span class="s2">&quot;1.2.3.4&quot;</span><span class="p">))</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Runners.from_json">
<em class="property">classmethod </em><code class="sig-name descname">from_json</code><span class="sig-paren">(</span><em class="sig-param">json: str</em>, <em class="sig-param">*args: Any</em>, <em class="sig-param">unflatten: bool = False</em>, <em class="sig-param">**kwargs: Any</em><span class="sig-paren">)</span> &#x2192; ItemsType<a class="headerlink" href="#viper.collections.Runners.from_json" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialise a new object of this class from the given JSON string.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>json</strong> (<em>str</em>) – The JSON data to parse.</p></li>
<li><p><strong>and **kwargs</strong> (<em>*args</em>) – These will be passed to <cite>json.laods</cite>.</p></li>
</ul>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Hosts</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="s1">&#39;[{&quot;ip&quot;: &quot;1.1.1.1&quot;}]&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Runners.from_list">
<em class="property">classmethod </em><code class="sig-name descname">from_list</code><span class="sig-paren">(</span><em class="sig-param">list_: Sequence[Dict[object, object]], *, unflatten: bool = False</em><span class="sig-paren">)</span> &#x2192; ItemsType<a class="headerlink" href="#viper.collections.Runners.from_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize items from given list of dictiionaries.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>list</strong> (<em>list</em>) – The list of dictiionaries containing the item properties.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#viper.collections.Items" title="viper.collections.Items">viper.collections.Items</a></p>
</dd>
</dl>
<p>This is used for loading JSON data into an instance of this class.</p>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Hosts</span><span class="o">.</span><span class="n">from_list</span><span class="p">([{</span><span class="s2">&quot;ip&quot;</span><span class="p">:</span> <span class="s2">&quot;1.2.3.4&quot;</span><span class="p">}])</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Runners.hash">
<code class="sig-name descname">hash</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; int<a class="headerlink" href="#viper.collections.Runners.hash" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the hash value.</p>
<p>By convention all Viper native objects are frozen and thus hashable.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Runners.head">
<code class="sig-name descname">head</code><span class="sig-paren">(</span><em class="sig-param">n: int = 10</em><span class="sig-paren">)</span> &#x2192; ItemsType<a class="headerlink" href="#viper.collections.Runners.head" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the first ‘n’ items from the group of items.</p>
<p>Works like Python’s [:n] index</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#viper.collections.Item" title="viper.collections.Item">viper.collections.Item</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Runners.hosts">
<code class="sig-name descname">hosts</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; viper.collections.Hosts<a class="reference internal" href="_modules/viper/collections.html#Runners.hosts"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.collections.Runners.hosts" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the list of hosts from the runners.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#viper.collections.Hosts" title="viper.collections.Hosts">viper.collections.Hosts</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Runners.order_by">
<code class="sig-name descname">order_by</code><span class="sig-paren">(</span><em class="sig-param">*properties: str</em>, <em class="sig-param">reverse: bool = False</em><span class="sig-paren">)</span> &#x2192; ItemsType<a class="headerlink" href="#viper.collections.Runners.order_by" title="Permalink to this definition">¶</a></dt>
<dd><p>Sort the items by multiple properties</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>properties</strong> (<em>list</em>) – The item will be sorted by the given properties in order.</p></li>
<li><p><strong>reverse</strong> (<em>bool</em>) – Reverse the order after sort.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#viper.collections.Items" title="viper.collections.Items">Items</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Runners.pipe">
<code class="sig-name descname">pipe</code><span class="sig-paren">(</span><em class="sig-param">handler: Any</em>, <em class="sig-param">*args: Any</em><span class="sig-paren">)</span> &#x2192; T<a class="headerlink" href="#viper.collections.Runners.pipe" title="Permalink to this definition">¶</a></dt>
<dd><p>Pipe this object to the given function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>handler</strong> (<em>callable</em>) – A callable that expects this object.</p></li>
<li><p><strong>args</strong> (<em>object</em>) – Arguments to be passed to the handler for decision making.</p></li>
</ul>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Hosts</span><span class="o">.</span><span class="n">from_items</span><span class="p">(</span><span class="n">Host</span><span class="p">(</span><span class="s2">&quot;1.2.3.4&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">pipe</span><span class="p">(</span><span class="n">hosts2csv</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Runners.range">
<code class="sig-name descname">range</code><span class="sig-paren">(</span><em class="sig-param">i: Optional[int] = None</em>, <em class="sig-param">j: Optional[int] = None</em><span class="sig-paren">)</span> &#x2192; ItemsType<a class="headerlink" href="#viper.collections.Runners.range" title="Permalink to this definition">¶</a></dt>
<dd><p>get the items in given range.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>i</strong><strong> (</strong><strong>optional</strong><strong>)</strong> (<em>int</em>) – The first index.</p></li>
<li><p><strong>j</strong><strong> (</strong><strong>optional</strong><strong>)</strong> (<em>int</em>) – The last index.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#viper.collections.Items" title="viper.collections.Items">Items</a></p>
</dd>
</dl>
<p>This has the same behaviour as Python’s [i:j]</p>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Runners.run">
<code class="sig-name descname">run</code><span class="sig-paren">(</span><em class="sig-param">max_workers: int = 0</em><span class="sig-paren">)</span> &#x2192; viper.collections.Results<a class="reference internal" href="_modules/viper/collections.html#Runners.run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.collections.Runners.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Run the tasks.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>max_workers</strong> (<em>int</em>) – Maximum number of thread workers to use.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#viper.collections.Results" title="viper.collections.Results">viper.collections.Results</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Runners.sort">
<code class="sig-name descname">sort</code><span class="sig-paren">(</span><em class="sig-param">key: Optional[Callable[[viper.collections.Item], object]] = None, reverse: bool = False</em><span class="sig-paren">)</span> &#x2192; ItemsType<a class="headerlink" href="#viper.collections.Runners.sort" title="Permalink to this definition">¶</a></dt>
<dd><p>Sort the items by given key/function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>key</strong> (<em>callable</em>) – A function similar to the one passed to the built-in <cite>sorted()</cite>.</p></li>
<li><p><strong>reverse</strong> (<em>bool</em>) – Reverse the order after sort.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#viper.collections.Items" title="viper.collections.Items">Items</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Runners.tail">
<code class="sig-name descname">tail</code><span class="sig-paren">(</span><em class="sig-param">n: int = 10</em><span class="sig-paren">)</span> &#x2192; ItemsType<a class="headerlink" href="#viper.collections.Runners.tail" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the last ‘n’ item from the group of items.</p>
<p>Works like Python’s [-n:] index</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#viper.collections.Item" title="viper.collections.Item">viper.collections.Item</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Runners.to_file">
<code class="sig-name descname">to_file</code><span class="sig-paren">(</span><em class="sig-param">filepath: str</em><span class="sig-paren">)</span> &#x2192; ItemsType<a class="headerlink" href="#viper.collections.Runners.to_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize items by reading data from a file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>str</strong> (<em>filepath</em>) – The path for the file to write.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#viper.collections.Items" title="viper.collections.Items">viper.collections.Items</a></p>
</dd>
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Hosts</span><span class="o">.</span><span class="n">from_items</span><span class="p">(</span><span class="n">Host</span><span class="p">(</span><span class="s2">&quot;1.2.3.4&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">to_file</span><span class="p">(</span><span class="s2">&quot;/path/to/file/hosts.json&quot;</span><span class="p">)</span>

<span class="n">Hosts</span><span class="o">.</span><span class="n">from_items</span><span class="p">(</span><span class="n">Host</span><span class="p">(</span><span class="s2">&quot;1.2.3.4&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">to_file</span><span class="p">(</span><span class="s2">&quot;/path/to/file/hosts.csv&quot;</span><span class="p">)</span>

<span class="n">Hosts</span><span class="o">.</span><span class="n">from_items</span><span class="p">(</span><span class="n">Host</span><span class="p">(</span><span class="s2">&quot;1.2.3.4&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">to_file</span><span class="p">(</span><span class="s2">&quot;/path/to/file/hosts.yml&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Runners.to_items">
<code class="sig-name descname">to_items</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; Sequence[T]<a class="headerlink" href="#viper.collections.Runners.to_items" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a tuple of all the items.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>tuple</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Runners.to_json">
<code class="sig-name descname">to_json</code><span class="sig-paren">(</span><em class="sig-param">*args: Any</em>, <em class="sig-param">flatten: bool = False</em>, <em class="sig-param">**kwargs: Any</em><span class="sig-paren">)</span> &#x2192; str<a class="headerlink" href="#viper.collections.Runners.to_json" title="Permalink to this definition">¶</a></dt>
<dd><p>Represent the collection as JSON data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>*args and **kwargs</strong> (<em>object</em>) – These will be passed to <code class="docutils literal notranslate"><span class="pre">json.laods</span></code>.</p>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Host</span><span class="p">(</span><span class="s2">&quot;1.2.3.4&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Runners.to_list">
<code class="sig-name descname">to_list</code><span class="sig-paren">(</span><em class="sig-param">flatten: bool = False</em><span class="sig-paren">)</span> &#x2192; List[Dict[str, object]]<a class="headerlink" href="#viper.collections.Runners.to_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Represent the items as a list of dictiionaries.</p>
<p>This is used for dumping an instance of this object as JSON data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>flatten</strong> (<em>bool</em>) – If True, dicts won’t be nested.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>list</p>
</dd>
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Hosts</span><span class="o">.</span><span class="n">from_items</span><span class="p">(</span><span class="n">Host</span><span class="p">(</span><span class="s2">&quot;1.2.3.4&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Runners.where">
<code class="sig-name descname">where</code><span class="sig-paren">(</span><em class="sig-param">key: str, condition: viper.collections.WhereConditions, values: Sequence[str]</em><span class="sig-paren">)</span> &#x2192; ItemsType<a class="headerlink" href="#viper.collections.Runners.where" title="Permalink to this definition">¶</a></dt>
<dd><p>Select items by a custom query.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>key</strong> (<em>str</em>) – The key will be compiled by Python’s <cite>.format()</cite>.</p></li>
<li><p><strong>condition</strong> (<a class="reference internal" href="#viper.collections.WhereConditions" title="viper.collections.WhereConditions"><em>viper.collections.WhereConditions</em></a>) – The where condition.</p></li>
<li><p><strong>values</strong> (<em>list</em>) – The values for the key.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#viper.collections.Items" title="viper.collections.Items">Items</a></p>
</dd>
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Hosts</span><span class="o">.</span><span class="n">from_items</span><span class="p">(</span>
    <span class="n">Host</span><span class="p">(</span><span class="s2">&quot;1.1.1.1&quot;</span><span class="p">),</span>
    <span class="n">Host</span><span class="p">(</span><span class="s2">&quot;2.2.2.2&quot;</span><span class="p">)</span>
<span class="p">)</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="s2">&quot;ip&quot;</span><span class="p">,</span> <span class="n">WhereConditions</span><span class="o">.</span><span class="n">is_</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;1.1.1.1&quot;</span><span class="p">])</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="viper.collections.Result">
<em class="property">class </em><code class="sig-prename descclassname">viper.collections.</code><code class="sig-name descname">Result</code><span class="sig-paren">(</span><em class="sig-param">trigger_time: float, task: viper.collections.Task, host: viper.collections.Host, args: Tuple[str, ...], command: Tuple[str, ...], stdout: str, stderr: str, returncode: int, start: float, end: float, retry: int</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/viper/collections.html#Result"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.collections.Result" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#viper.collections.Item" title="viper.collections.Item"><code class="xref py py-class docutils literal notranslate"><span class="pre">viper.collections.Item</span></code></a></p>
<p>The result of an executed task.</p>
<dl class="method">
<dt id="viper.collections.Result.by_id">
<em class="property">classmethod </em><code class="sig-name descname">by_id</code><span class="sig-paren">(</span><em class="sig-param">id_: int</em><span class="sig-paren">)</span> &#x2192; viper.collections.Result<a class="reference internal" href="_modules/viper/collections.html#Result.by_id"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.collections.Result.by_id" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetch the result from DB by hash.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>hash</strong> (<em>int</em>) – The hash value.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#viper.collections.Result" title="viper.collections.Result">viper.collections.Result</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Result.errored">
<code class="sig-name descname">errored</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; bool<a class="reference internal" href="_modules/viper/collections.html#Result.errored"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.collections.Result.errored" title="Permalink to this definition">¶</a></dt>
<dd><p>returns True if the result is failure.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Result.format">
<code class="sig-name descname">format</code><span class="sig-paren">(</span><em class="sig-param">template: str</em><span class="sig-paren">)</span> &#x2192; str<a class="headerlink" href="#viper.collections.Result.format" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a custom string representation of this object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>template</strong> (<em>str</em>) – The template to be used as <cite>“template”.format(**vars(self))</cite></p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>str</p>
</dd>
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Host</span><span class="p">(</span><span class="s2">&quot;1.2.3.4&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{ip}</span><span class="s2"> </span><span class="si">{hostname}</span><span class="s2"> </span><span class="si">{meta.tag}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Result.from_dict">
<em class="property">classmethod </em><code class="sig-name descname">from_dict</code><span class="sig-paren">(</span><em class="sig-param">dict_: Dict[object, object], *, unflatten: bool = False</em><span class="sig-paren">)</span> &#x2192; viper.collections.Result<a class="reference internal" href="_modules/viper/collections.html#Result.from_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.collections.Result.from_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize item from the given dict.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>dict</strong> (<em>dict</em>) – The dictionary containing the properties for this object.</p>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Host</span><span class="o">.</span><span class="n">from_dict</span><span class="p">({</span><span class="s2">&quot;ip&quot;</span><span class="p">:</span> <span class="s2">&quot;1.2.3.4&quot;</span><span class="p">})</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Result.from_func">
<em class="property">classmethod </em><code class="sig-name descname">from_func</code><span class="sig-paren">(</span><em class="sig-param">funcpath: str</em><span class="sig-paren">)</span> &#x2192; CollectionType<a class="headerlink" href="#viper.collections.Result.from_func" title="Permalink to this definition">¶</a></dt>
<dd><p>Load the object from the given Python function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>funcpath</strong> (<em>str</em>) – The path to a Python function that returns an
instance of this class.</p>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Task</span><span class="o">.</span><span class="n">from_func</span><span class="p">(</span><span class="s2">&quot;task.ping&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Result.from_json">
<em class="property">classmethod </em><code class="sig-name descname">from_json</code><span class="sig-paren">(</span><em class="sig-param">json: str</em>, <em class="sig-param">*args: Any</em>, <em class="sig-param">unflatten: bool = False</em>, <em class="sig-param">**kwargs: Any</em><span class="sig-paren">)</span> &#x2192; ItemType<a class="headerlink" href="#viper.collections.Result.from_json" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialise a new object of this class from the given JSON string.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>json</strong> (<em>str</em>) – The JSON data to parse.</p></li>
<li><p><strong>and **kwargs</strong> (<em>*args</em>) – These will be passed to <cite>json.laods</cite>.</p></li>
</ul>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Hosts</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="s1">&#39;[{&quot;ip&quot;: &quot;1.1.1.1&quot;}]&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Result.hash">
<code class="sig-name descname">hash</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; int<a class="headerlink" href="#viper.collections.Result.hash" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the hash value.</p>
<p>By convention all Viper native objects are frozen and thus hashable.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Result.ok">
<code class="sig-name descname">ok</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; bool<a class="reference internal" href="_modules/viper/collections.html#Result.ok"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.collections.Result.ok" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns True the result is success.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Result.pipe">
<code class="sig-name descname">pipe</code><span class="sig-paren">(</span><em class="sig-param">handler: Any</em>, <em class="sig-param">*args: Any</em><span class="sig-paren">)</span> &#x2192; T<a class="headerlink" href="#viper.collections.Result.pipe" title="Permalink to this definition">¶</a></dt>
<dd><p>Pipe this object to the given function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>handler</strong> (<em>callable</em>) – A callable that expects this object.</p></li>
<li><p><strong>args</strong> (<em>object</em>) – Arguments to be passed to the handler for decision making.</p></li>
</ul>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Hosts</span><span class="o">.</span><span class="n">from_items</span><span class="p">(</span><span class="n">Host</span><span class="p">(</span><span class="s2">&quot;1.2.3.4&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">pipe</span><span class="p">(</span><span class="n">hosts2csv</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Result.retry_left">
<code class="sig-name descname">retry_left</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; int<a class="reference internal" href="_modules/viper/collections.html#Result.retry_left"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.collections.Result.retry_left" title="Permalink to this definition">¶</a></dt>
<dd><p>Get how many retries are left.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Result.runner">
<code class="sig-name descname">runner</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; viper.collections.Runner<a class="reference internal" href="_modules/viper/collections.html#Result.runner"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.collections.Result.runner" title="Permalink to this definition">¶</a></dt>
<dd><p>Recreate the runner from the result.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#viper.collections.Runner" title="viper.collections.Runner">viper.collections.Runner</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Result.save">
<code class="sig-name descname">save</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; viper.collections.Result<a class="reference internal" href="_modules/viper/collections.html#Result.save"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.collections.Result.save" title="Permalink to this definition">¶</a></dt>
<dd><p>Save the result in DB.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#viper.collections.Result" title="viper.collections.Result">viper.collections.Result</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Result.to_dict">
<code class="sig-name descname">to_dict</code><span class="sig-paren">(</span><em class="sig-param">*</em>, <em class="sig-param">flatten: bool = False</em><span class="sig-paren">)</span> &#x2192; Dict[str, Any]<a class="reference internal" href="_modules/viper/collections.html#Result.to_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.collections.Result.to_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Represent the item as dict.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>flatten</strong> (<em>bool</em>) – If true, the dict won’t be nested.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>dict</p>
</dd>
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Host</span><span class="p">(</span><span class="s2">&quot;1.2.3.4&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Result.to_json">
<code class="sig-name descname">to_json</code><span class="sig-paren">(</span><em class="sig-param">*args: Any</em>, <em class="sig-param">flatten: bool = False</em>, <em class="sig-param">**kwargs: Any</em><span class="sig-paren">)</span> &#x2192; str<a class="headerlink" href="#viper.collections.Result.to_json" title="Permalink to this definition">¶</a></dt>
<dd><p>Represent the collection as JSON data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>*args and **kwargs</strong> (<em>object</em>) – These will be passed to <code class="docutils literal notranslate"><span class="pre">json.laods</span></code>.</p>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Host</span><span class="p">(</span><span class="s2">&quot;1.2.3.4&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="viper.collections.Results">
<em class="property">class </em><code class="sig-prename descclassname">viper.collections.</code><code class="sig-name descname">Results</code><span class="sig-paren">(</span><em class="sig-param">_all: Sequence[viper.collections.Result] = &lt;factory&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/viper/collections.html#Results"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.collections.Results" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#viper.collections.Items" title="viper.collections.Items"><code class="xref py py-class docutils literal notranslate"><span class="pre">viper.collections.Items</span></code></a></p>
<p>A group of <a class="reference internal" href="#viper.collections.Results" title="viper.collections.Results"><code class="xref py py-class docutils literal notranslate"><span class="pre">viper.collections.Results</span></code></a>.</p>
<dl class="method">
<dt id="viper.collections.Results.all">
<code class="sig-name descname">all</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; Sequence[T]<a class="headerlink" href="#viper.collections.Results.all" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for .to_items()</p>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Results.by_host">
<em class="property">classmethod </em><code class="sig-name descname">by_host</code><span class="sig-paren">(</span><em class="sig-param">host: viper.collections.Host</em><span class="sig-paren">)</span> &#x2192; viper.collections.Results<a class="reference internal" href="_modules/viper/collections.html#Results.by_host"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.collections.Results.by_host" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetch and return results from history of the given host.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>host</strong> (<a class="reference internal" href="#viper.collections.Host" title="viper.collections.Host"><em>viper.collections.Host</em></a>) – Fetch results of this host.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#viper.collections.Results" title="viper.collections.Results">viper.collections.Results</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Results.by_task">
<em class="property">classmethod </em><code class="sig-name descname">by_task</code><span class="sig-paren">(</span><em class="sig-param">task: viper.collections.Task</em><span class="sig-paren">)</span> &#x2192; viper.collections.Results<a class="reference internal" href="_modules/viper/collections.html#Results.by_task"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.collections.Results.by_task" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetch and return results from history of the given task.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>host</strong> (<a class="reference internal" href="#viper.collections.Host" title="viper.collections.Host"><em>viper.collections.Host</em></a>) – Fetch results of this task.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#viper.collections.Results" title="viper.collections.Results">viper.collections.Results</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Results.count">
<code class="sig-name descname">count</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; int<a class="headerlink" href="#viper.collections.Results.count" title="Permalink to this definition">¶</a></dt>
<dd><p>Count the number of items.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Results.filter">
<code class="sig-name descname">filter</code><span class="sig-paren">(</span><em class="sig-param">filter_: Any</em>, <em class="sig-param">*args: object</em><span class="sig-paren">)</span> &#x2192; ItemsType<a class="headerlink" href="#viper.collections.Results.filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Filter the items by a given function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filter</strong> (<em>callable</em>) – A function that returns either True or False.</p></li>
<li><p><strong>args</strong> (<em>object</em>) – Arguments to be passed to the filter to manipulate the decision making.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Results.final">
<code class="sig-name descname">final</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; viper.collections.Results<a class="reference internal" href="_modules/viper/collections.html#Results.final"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.collections.Results.final" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the final results only (ignoring the previous retries).</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#viper.collections.Results" title="viper.collections.Results">viper.collections.Results</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Results.format">
<code class="sig-name descname">format</code><span class="sig-paren">(</span><em class="sig-param">template: str</em>, <em class="sig-param">sep: str = '\n'</em><span class="sig-paren">)</span> &#x2192; str<a class="headerlink" href="#viper.collections.Results.format" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a custom string representation of this list of objects.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>template</strong> (<em>str</em>) – The template will be compiled by Python’s <cite>.format()</cite>.</p></li>
<li><p><strong>sep</strong> (<em>str</em>) – The separator used to separate all the items.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>str</p>
</dd>
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Hosts</span><span class="o">.</span><span class="n">from_items</span><span class="p">(</span><span class="n">Host</span><span class="p">(</span><span class="s2">&quot;1.2.3.4&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{ip}</span><span class="s2"> </span><span class="si">{hostname}</span><span class="s2"> </span><span class="si">{meta.tag}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Results.from_file">
<em class="property">classmethod </em><code class="sig-name descname">from_file</code><span class="sig-paren">(</span><em class="sig-param">filepath: str</em><span class="sig-paren">)</span> &#x2192; ItemsType<a class="headerlink" href="#viper.collections.Results.from_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize items by reading data from a file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>str</strong> (<em>filepath</em>) – The path for the file to read from.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#viper.collections.Items" title="viper.collections.Items">viper.collections.Items</a></p>
</dd>
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Hosts</span><span class="o">.</span><span class="n">from_file</span><span class="p">(</span><span class="s2">&quot;/path/to/file/hosts.json&quot;</span><span class="p">)</span>

<span class="n">Hosts</span><span class="o">.</span><span class="n">from_file</span><span class="p">(</span><span class="s2">&quot;/path/to/file/hosts.csv&quot;</span><span class="p">)</span>

<span class="n">Hosts</span><span class="o">.</span><span class="n">from_file</span><span class="p">(</span><span class="s2">&quot;/path/to/file/hosts.yml&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Results.from_func">
<em class="property">classmethod </em><code class="sig-name descname">from_func</code><span class="sig-paren">(</span><em class="sig-param">funcpath: str</em><span class="sig-paren">)</span> &#x2192; CollectionType<a class="headerlink" href="#viper.collections.Results.from_func" title="Permalink to this definition">¶</a></dt>
<dd><p>Load the object from the given Python function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>funcpath</strong> (<em>str</em>) – The path to a Python function that returns an
instance of this class.</p>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Task</span><span class="o">.</span><span class="n">from_func</span><span class="p">(</span><span class="s2">&quot;task.ping&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Results.from_history">
<em class="property">classmethod </em><code class="sig-name descname">from_history</code><span class="sig-paren">(</span><em class="sig-param">final: bool = False</em><span class="sig-paren">)</span> &#x2192; viper.collections.Results<a class="reference internal" href="_modules/viper/collections.html#Results.from_history"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.collections.Results.from_history" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetch and return all the results from history.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ciper.collections.Results</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Results.from_items">
<em class="property">classmethod </em><code class="sig-name descname">from_items</code><span class="sig-paren">(</span><em class="sig-param">*items: Union[Iterable[T], T]</em><span class="sig-paren">)</span> &#x2192; ItemsType<a class="headerlink" href="#viper.collections.Results.from_items" title="Permalink to this definition">¶</a></dt>
<dd><p>Create this an instance of this object using the given items.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>items</strong> (<a class="reference internal" href="#viper.collections.Item" title="viper.collections.Item"><em>viper.collections.Item</em></a>) – The group of items to hold.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#viper.collections.Items" title="viper.collections.Items">viper.collections.Items</a></p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Classes that inherits from <a class="reference internal" href="#viper.collections.Items" title="viper.collections.Items"><code class="xref py py-class docutils literal notranslate"><span class="pre">Items</span></code></a> should not be
initialized directly (e.g. <code class="docutils literal notranslate"><span class="pre">Hosts(Host(&quot;1.2.3.4&quot;))</span></code>). Factory
methods such as this should be used instead.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Hosts</span><span class="o">.</span><span class="n">from_items</span><span class="p">(</span><span class="n">Host</span><span class="p">(</span><span class="s2">&quot;1.2.3.4&quot;</span><span class="p">))</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Results.from_json">
<em class="property">classmethod </em><code class="sig-name descname">from_json</code><span class="sig-paren">(</span><em class="sig-param">json: str</em>, <em class="sig-param">*args: Any</em>, <em class="sig-param">unflatten: bool = False</em>, <em class="sig-param">**kwargs: Any</em><span class="sig-paren">)</span> &#x2192; ItemsType<a class="headerlink" href="#viper.collections.Results.from_json" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialise a new object of this class from the given JSON string.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>json</strong> (<em>str</em>) – The JSON data to parse.</p></li>
<li><p><strong>and **kwargs</strong> (<em>*args</em>) – These will be passed to <cite>json.laods</cite>.</p></li>
</ul>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Hosts</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="s1">&#39;[{&quot;ip&quot;: &quot;1.1.1.1&quot;}]&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Results.from_list">
<em class="property">classmethod </em><code class="sig-name descname">from_list</code><span class="sig-paren">(</span><em class="sig-param">list_: Sequence[Dict[object, object]], *, unflatten: bool = False</em><span class="sig-paren">)</span> &#x2192; ItemsType<a class="headerlink" href="#viper.collections.Results.from_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize items from given list of dictiionaries.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>list</strong> (<em>list</em>) – The list of dictiionaries containing the item properties.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#viper.collections.Items" title="viper.collections.Items">viper.collections.Items</a></p>
</dd>
</dl>
<p>This is used for loading JSON data into an instance of this class.</p>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Hosts</span><span class="o">.</span><span class="n">from_list</span><span class="p">([{</span><span class="s2">&quot;ip&quot;</span><span class="p">:</span> <span class="s2">&quot;1.2.3.4&quot;</span><span class="p">}])</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Results.hash">
<code class="sig-name descname">hash</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; int<a class="headerlink" href="#viper.collections.Results.hash" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the hash value.</p>
<p>By convention all Viper native objects are frozen and thus hashable.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Results.head">
<code class="sig-name descname">head</code><span class="sig-paren">(</span><em class="sig-param">n: int = 10</em><span class="sig-paren">)</span> &#x2192; ItemsType<a class="headerlink" href="#viper.collections.Results.head" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the first ‘n’ items from the group of items.</p>
<p>Works like Python’s [:n] index</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#viper.collections.Item" title="viper.collections.Item">viper.collections.Item</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Results.hosts">
<code class="sig-name descname">hosts</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; viper.collections.Hosts<a class="reference internal" href="_modules/viper/collections.html#Results.hosts"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.collections.Results.hosts" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the list of hosts from the results.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#viper.collections.Hosts" title="viper.collections.Hosts">viper.collections.Hosts</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Results.order_by">
<code class="sig-name descname">order_by</code><span class="sig-paren">(</span><em class="sig-param">*properties: str</em>, <em class="sig-param">reverse: bool = False</em><span class="sig-paren">)</span> &#x2192; ItemsType<a class="headerlink" href="#viper.collections.Results.order_by" title="Permalink to this definition">¶</a></dt>
<dd><p>Sort the items by multiple properties</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>properties</strong> (<em>list</em>) – The item will be sorted by the given properties in order.</p></li>
<li><p><strong>reverse</strong> (<em>bool</em>) – Reverse the order after sort.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#viper.collections.Items" title="viper.collections.Items">Items</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Results.pipe">
<code class="sig-name descname">pipe</code><span class="sig-paren">(</span><em class="sig-param">handler: Any</em>, <em class="sig-param">*args: Any</em><span class="sig-paren">)</span> &#x2192; T<a class="headerlink" href="#viper.collections.Results.pipe" title="Permalink to this definition">¶</a></dt>
<dd><p>Pipe this object to the given function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>handler</strong> (<em>callable</em>) – A callable that expects this object.</p></li>
<li><p><strong>args</strong> (<em>object</em>) – Arguments to be passed to the handler for decision making.</p></li>
</ul>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Hosts</span><span class="o">.</span><span class="n">from_items</span><span class="p">(</span><span class="n">Host</span><span class="p">(</span><span class="s2">&quot;1.2.3.4&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">pipe</span><span class="p">(</span><span class="n">hosts2csv</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Results.range">
<code class="sig-name descname">range</code><span class="sig-paren">(</span><em class="sig-param">i: Optional[int] = None</em>, <em class="sig-param">j: Optional[int] = None</em><span class="sig-paren">)</span> &#x2192; ItemsType<a class="headerlink" href="#viper.collections.Results.range" title="Permalink to this definition">¶</a></dt>
<dd><p>get the items in given range.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>i</strong><strong> (</strong><strong>optional</strong><strong>)</strong> (<em>int</em>) – The first index.</p></li>
<li><p><strong>j</strong><strong> (</strong><strong>optional</strong><strong>)</strong> (<em>int</em>) – The last index.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#viper.collections.Items" title="viper.collections.Items">Items</a></p>
</dd>
</dl>
<p>This has the same behaviour as Python’s [i:j]</p>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Results.re_run">
<code class="sig-name descname">re_run</code><span class="sig-paren">(</span><em class="sig-param">max_workers: int = 0</em><span class="sig-paren">)</span> &#x2192; viper.collections.Results<a class="reference internal" href="_modules/viper/collections.html#Results.re_run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.collections.Results.re_run" title="Permalink to this definition">¶</a></dt>
<dd><p>Recreate the runners from the results and run again.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#viper.collections.Results" title="viper.collections.Results">viper.collections.Results</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Results.runners">
<code class="sig-name descname">runners</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; viper.collections.Runners<a class="reference internal" href="_modules/viper/collections.html#Results.runners"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.collections.Results.runners" title="Permalink to this definition">¶</a></dt>
<dd><p>Recreate the runners from the results.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#viper.collections.Runners" title="viper.collections.Runners">viper.collections.Runners</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Results.sort">
<code class="sig-name descname">sort</code><span class="sig-paren">(</span><em class="sig-param">key: Optional[Callable[[viper.collections.Item], object]] = None, reverse: bool = False</em><span class="sig-paren">)</span> &#x2192; ItemsType<a class="headerlink" href="#viper.collections.Results.sort" title="Permalink to this definition">¶</a></dt>
<dd><p>Sort the items by given key/function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>key</strong> (<em>callable</em>) – A function similar to the one passed to the built-in <cite>sorted()</cite>.</p></li>
<li><p><strong>reverse</strong> (<em>bool</em>) – Reverse the order after sort.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#viper.collections.Items" title="viper.collections.Items">Items</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Results.tail">
<code class="sig-name descname">tail</code><span class="sig-paren">(</span><em class="sig-param">n: int = 10</em><span class="sig-paren">)</span> &#x2192; ItemsType<a class="headerlink" href="#viper.collections.Results.tail" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the last ‘n’ item from the group of items.</p>
<p>Works like Python’s [-n:] index</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#viper.collections.Item" title="viper.collections.Item">viper.collections.Item</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Results.to_file">
<code class="sig-name descname">to_file</code><span class="sig-paren">(</span><em class="sig-param">filepath: str</em><span class="sig-paren">)</span> &#x2192; ItemsType<a class="headerlink" href="#viper.collections.Results.to_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize items by reading data from a file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>str</strong> (<em>filepath</em>) – The path for the file to write.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#viper.collections.Items" title="viper.collections.Items">viper.collections.Items</a></p>
</dd>
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Hosts</span><span class="o">.</span><span class="n">from_items</span><span class="p">(</span><span class="n">Host</span><span class="p">(</span><span class="s2">&quot;1.2.3.4&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">to_file</span><span class="p">(</span><span class="s2">&quot;/path/to/file/hosts.json&quot;</span><span class="p">)</span>

<span class="n">Hosts</span><span class="o">.</span><span class="n">from_items</span><span class="p">(</span><span class="n">Host</span><span class="p">(</span><span class="s2">&quot;1.2.3.4&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">to_file</span><span class="p">(</span><span class="s2">&quot;/path/to/file/hosts.csv&quot;</span><span class="p">)</span>

<span class="n">Hosts</span><span class="o">.</span><span class="n">from_items</span><span class="p">(</span><span class="n">Host</span><span class="p">(</span><span class="s2">&quot;1.2.3.4&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">to_file</span><span class="p">(</span><span class="s2">&quot;/path/to/file/hosts.yml&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Results.to_items">
<code class="sig-name descname">to_items</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; Sequence[T]<a class="headerlink" href="#viper.collections.Results.to_items" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a tuple of all the items.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>tuple</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Results.to_json">
<code class="sig-name descname">to_json</code><span class="sig-paren">(</span><em class="sig-param">*args: Any</em>, <em class="sig-param">flatten: bool = False</em>, <em class="sig-param">**kwargs: Any</em><span class="sig-paren">)</span> &#x2192; str<a class="headerlink" href="#viper.collections.Results.to_json" title="Permalink to this definition">¶</a></dt>
<dd><p>Represent the collection as JSON data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>*args and **kwargs</strong> (<em>object</em>) – These will be passed to <code class="docutils literal notranslate"><span class="pre">json.laods</span></code>.</p>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Host</span><span class="p">(</span><span class="s2">&quot;1.2.3.4&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Results.to_list">
<code class="sig-name descname">to_list</code><span class="sig-paren">(</span><em class="sig-param">flatten: bool = False</em><span class="sig-paren">)</span> &#x2192; List[Dict[str, object]]<a class="headerlink" href="#viper.collections.Results.to_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Represent the items as a list of dictiionaries.</p>
<p>This is used for dumping an instance of this object as JSON data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>flatten</strong> (<em>bool</em>) – If True, dicts won’t be nested.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>list</p>
</dd>
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Hosts</span><span class="o">.</span><span class="n">from_items</span><span class="p">(</span><span class="n">Host</span><span class="p">(</span><span class="s2">&quot;1.2.3.4&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.collections.Results.where">
<code class="sig-name descname">where</code><span class="sig-paren">(</span><em class="sig-param">key: str, condition: viper.collections.WhereConditions, values: Sequence[str]</em><span class="sig-paren">)</span> &#x2192; ItemsType<a class="headerlink" href="#viper.collections.Results.where" title="Permalink to this definition">¶</a></dt>
<dd><p>Select items by a custom query.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>key</strong> (<em>str</em>) – The key will be compiled by Python’s <cite>.format()</cite>.</p></li>
<li><p><strong>condition</strong> (<a class="reference internal" href="#viper.collections.WhereConditions" title="viper.collections.WhereConditions"><em>viper.collections.WhereConditions</em></a>) – The where condition.</p></li>
<li><p><strong>values</strong> (<em>list</em>) – The values for the key.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#viper.collections.Items" title="viper.collections.Items">Items</a></p>
</dd>
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Hosts</span><span class="o">.</span><span class="n">from_items</span><span class="p">(</span>
    <span class="n">Host</span><span class="p">(</span><span class="s2">&quot;1.1.1.1&quot;</span><span class="p">),</span>
    <span class="n">Host</span><span class="p">(</span><span class="s2">&quot;2.2.2.2&quot;</span><span class="p">)</span>
<span class="p">)</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="s2">&quot;ip&quot;</span><span class="p">,</span> <span class="n">WhereConditions</span><span class="o">.</span><span class="n">is_</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;1.1.1.1&quot;</span><span class="p">])</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

</div>
</div>
</div>
<div class="section" id="module-viper.const">
<span id="viper-const-module"></span><h2>viper.const module<a class="headerlink" href="#module-viper.const" title="Permalink to this headline">¶</a></h2>
<p>Common contants are defined here.</p>
<dl class="class">
<dt id="viper.const.Config">
<em class="property">class </em><code class="sig-prename descclassname">viper.const.</code><code class="sig-name descname">Config</code><a class="reference internal" href="_modules/viper/const.html#Config"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.const.Config" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">enum.Enum</span></code></p>
<p>Default viper configuration.</p>
<dl class="attribute">
<dt id="viper.const.Config.db_url">
<code class="sig-name descname">db_url</code><em class="property"> = 'viperdb.sqlite3'</em><a class="headerlink" href="#viper.const.Config.db_url" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="viper.const.Config.max_workers">
<code class="sig-name descname">max_workers</code><em class="property"> = 0</em><a class="headerlink" href="#viper.const.Config.max_workers" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="viper.const.Config.modules_path">
<code class="sig-name descname">modules_path</code><em class="property"> = '.'</em><a class="headerlink" href="#viper.const.Config.modules_path" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-viper.db">
<span id="viper-db-module"></span><h2>viper.db module<a class="headerlink" href="#module-viper.db" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="viper.db.ViperDB">
<em class="property">class </em><code class="sig-prename descclassname">viper.db.</code><code class="sig-name descname">ViperDB</code><span class="sig-paren">(</span><em class="sig-param">url: 'str' = 'viperdb.sqlite3'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/viper/db.html#ViperDB"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.db.ViperDB" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="attribute">
<dt id="viper.db.ViperDB.engine">
<code class="sig-name descname">engine</code><em class="property"> = None</em><a class="headerlink" href="#viper.db.ViperDB.engine" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="viper.db.ViperDB.init">
<em class="property">classmethod </em><code class="sig-name descname">init</code><span class="sig-paren">(</span><em class="sig-param">url: str</em>, <em class="sig-param">force: bool = False</em><span class="sig-paren">)</span> &#x2192; None<a class="reference internal" href="_modules/viper/db.html#ViperDB.init"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.db.ViperDB.init" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="viper.db.ViperDB.url">
<code class="sig-name descname">url</code><em class="property"> = 'viperdb.sqlite3'</em><a class="headerlink" href="#viper.db.ViperDB.url" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-viper.main">
<span id="viper-main-module"></span><h2>viper.main module<a class="headerlink" href="#module-viper.main" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="viper.main.main">
<code class="sig-prename descclassname">viper.main.</code><code class="sig-name descname">main</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; None<a class="reference internal" href="_modules/viper/main.html#main"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.main.main" title="Permalink to this definition">¶</a></dt>
<dd><p>The main entrypoint to Viper CLI.</p>
</dd></dl>

</div>
<div class="section" id="module-viper.project">
<span id="viper-project-module"></span><h2>viper.project module<a class="headerlink" href="#module-viper.project" title="Permalink to this headline">¶</a></h2>
<div class="section" id="extending-the-command-line-interface-using-viperfile-py">
<h3>Extending the Command-line Interface (using <code class="docutils literal notranslate"><span class="pre">viperfile.py</span></code>)<a class="headerlink" href="#extending-the-command-line-interface-using-viperfile-py" title="Permalink to this headline">¶</a></h3>
<div class="section" id="why-and-how">
<h4>Why and How<a class="headerlink" href="#why-and-how" title="Permalink to this headline">¶</a></h4>
<p>The viper CLI can easily be extended to include custom subcommands using
the <a class="reference internal" href="#module-viper.project" title="viper.project"><code class="xref py py-mod docutils literal notranslate"><span class="pre">viper.project</span></code></a> module.</p>
<p>To do this, you have to create a file named <code class="docutils literal notranslate"><span class="pre">viperfile.py</span></code> in the root
of your workspace. This file will contain the definition(s) of one or multiple
projects. A project works like a namespace for all the custom subcommands under it.</p>
</div>
<div class="section" id="example-defining-a-project">
<h4>Example: Defining a Project<a class="headerlink" href="#example-defining-a-project" title="Permalink to this headline">¶</a></h4>
<p>This is how a project can be defined in <code class="docutils literal notranslate"><span class="pre">viperfile.py</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">viper.project</span> <span class="kn">import</span> <span class="n">Project</span><span class="p">,</span> <span class="n">arg</span>

<span class="n">foo</span> <span class="o">=</span> <span class="n">Project</span><span class="p">(</span><span class="s2">&quot;foo&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>The <a class="reference internal" href="#viper.project.arg" title="viper.project.arg"><code class="xref py py-func docutils literal notranslate"><span class="pre">viper.project.arg()</span></code></a> function helps defining the command-line
arguments a.k.a options or switches that the subcommand expects.</p>
<p>Let’s define a subcommand <code class="docutils literal notranslate"><span class="pre">&#64;foo:group1</span></code> that expects optional arguments
<code class="docutils literal notranslate"><span class="pre">--login_name</span></code> and <code class="docutils literal notranslate"><span class="pre">--identity_file</span></code> with some default values
and returns the text representation of a <a class="reference internal" href="#viper.Hosts" title="viper.Hosts"><code class="xref py py-class docutils literal notranslate"><span class="pre">viper.Hosts</span></code></a> object.</p>
</div>
<div class="section" id="example-defining-a-subcommand-for-host-group">
<h4>Example: Defining a subcommand for host group<a class="headerlink" href="#example-defining-a-subcommand-for-host-group" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">viper</span> <span class="kn">import</span> <span class="n">Host</span><span class="p">,</span> <span class="n">Hosts</span><span class="p">,</span> <span class="n">meta</span>

<span class="nd">@foo</span><span class="o">.</span><span class="n">hostgroup</span><span class="p">(</span>
    <span class="n">args</span><span class="o">=</span><span class="p">[</span>
        <span class="n">arg</span><span class="p">(</span><span class="s2">&quot;-l&quot;</span><span class="p">,</span> <span class="s2">&quot;--login_name&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s2">&quot;root&quot;</span><span class="p">),</span>
        <span class="n">arg</span><span class="p">(</span><span class="s2">&quot;-i&quot;</span><span class="p">,</span> <span class="s2">&quot;--identity_file&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s2">&quot;/root/.ssh/id_rsa.pub&quot;</span><span class="p">),</span>
    <span class="p">]</span>
<span class="p">)</span>
<span class="k">def</span> <span class="nf">group1</span><span class="p">(</span><span class="n">args</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">Hosts</span><span class="o">.</span><span class="n">from_items</span><span class="p">(</span>
        <span class="n">Host</span><span class="p">(</span>
            <span class="n">ip</span><span class="o">=</span><span class="s2">&quot;192.168.0.11&quot;</span><span class="p">,</span>
            <span class="n">hostname</span><span class="o">=</span><span class="s2">&quot;host11&quot;</span>
            <span class="n">login_name</span><span class="o">=</span><span class="s2">&quot;root&quot;</span><span class="p">,</span>
            <span class="n">identity_file</span><span class="o">=</span><span class="n">args</span><span class="o">.</span><span class="n">identity_file</span><span class="p">,</span>
            <span class="n">meta</span><span class="o">=</span><span class="n">meta</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;aws&quot;</span><span class="p">),</span>
        <span class="p">),</span>
        <span class="n">Host</span><span class="p">(</span>
            <span class="n">ip</span><span class="o">=</span><span class="s2">&quot;192.168.0.12&quot;</span><span class="p">,</span>
            <span class="n">hostname</span><span class="o">=</span><span class="s2">&quot;host12&quot;</span><span class="p">,</span>
            <span class="n">login_name</span><span class="o">=</span><span class="s2">&quot;root&quot;</span><span class="p">,</span>
            <span class="n">identity_file</span><span class="o">=</span><span class="n">args</span><span class="o">.</span><span class="n">identity_file</span><span class="p">,</span>
            <span class="n">meta</span><span class="o">=</span><span class="n">meta</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;aws&quot;</span><span class="p">),</span>
        <span class="p">)</span>
    <span class="p">)</span>
</pre></div>
</div>
<p>Now running <code class="docutils literal notranslate"><span class="pre">viper</span> <span class="pre">-h</span></code> in that workspace will show us <code class="docutils literal notranslate"><span class="pre">&#64;foo:group1</span>&#160; <span class="pre">[Hosts]</span></code>,
and running <code class="docutils literal notranslate"><span class="pre">viper</span> <span class="pre">&#64;foo:group1</span> <span class="pre">--help</span></code> will list the arguments it’s expecting
and their default values.</p>
<p>The subcommand can now be executed as below:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Use the default values</span>
viper @foo:group1

<span class="c1"># Specify the login name and identity file</span>
viper @foo:group1 -l user1 -i ~user1/.ssh/id_rsa.pub
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>All the custom subcommands are prefixed with <code class="docutils literal notranslate"><span class="pre">&#64;</span></code> to separate them from the
core viper subcommands. And the string following <code class="docutils literal notranslate"><span class="pre">&#64;</span></code> acts like a namespace
that separates the subcommands belonging from different projects in the same
viperfile.</p>
</div>
<dl class="class">
<dt id="viper.project.Project">
<em class="property">class </em><code class="sig-prename descclassname">viper.project.</code><code class="sig-name descname">Project</code><span class="sig-paren">(</span><em class="sig-param">prefix: str</em>, <em class="sig-param">action_commands: List[Type[viper.cli_base.SubCommand]] = &lt;factory&gt;</em>, <em class="sig-param">hostgroup_commands: List[Type[viper.cli_base.SubCommand]] = &lt;factory&gt;</em>, <em class="sig-param">filter_commands: List[Type[viper.cli_base.SubCommand]] = &lt;factory&gt;</em>, <em class="sig-param">handler_commands: List[Type[viper.cli_base.SubCommand]] = &lt;factory&gt;</em>, <em class="sig-param">job_commands: List[Type[viper.cli_base.SubCommand]] = &lt;factory&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/viper/project.html#Project"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.project.Project" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A project (namespace) for the viper sub commands</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>prefix</strong> (<em>str</em>) – Prefix for the related sub commands.</p>
</dd>
</dl>
<p>When we define a project, we basically define a namespace (a prefix)
for the commands.</p>
<dl class="method">
<dt id="viper.project.Project.action">
<code class="sig-name descname">action</code><span class="sig-paren">(</span><em class="sig-param">args: Optional[Sequence[Tuple[Tuple[str, ...], Dict[str, Any]]]] = None, totype: Optional[type] = None</em><span class="sig-paren">)</span> &#x2192; Callable[[Callable[[argparse.Namespace], T]], Callable[[argparse.Namespace], T]]<a class="reference internal" href="_modules/viper/project.html#Project.action"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.project.Project.action" title="Permalink to this definition">¶</a></dt>
<dd><p>Use this decorator to define an action.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>args</strong><strong> (</strong><strong>optional</strong><strong>)</strong> (<em>list</em>) – List of arguments for <code class="xref py py-class docutils literal notranslate"><span class="pre">argparse.ArgumentParser</span></code>.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="viper.project.Project.all_commands">
<code class="sig-name descname">all_commands</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; List[Type[viper.cli_base.SubCommand]]<a class="reference internal" href="_modules/viper/project.html#Project.all_commands"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.project.Project.all_commands" title="Permalink to this definition">¶</a></dt>
<dd><p>Return all sub commands</p>
</dd></dl>

<dl class="method">
<dt id="viper.project.Project.handler">
<code class="sig-name descname">handler</code><span class="sig-paren">(</span><em class="sig-param">fromtype: type, totype: type, args: Optional[Sequence[Tuple[Tuple[str, ...], Dict[str, Any]]]] = None</em><span class="sig-paren">)</span> &#x2192; Callable[[Callable[[T, argparse.Namespace], C]], Callable[[T, argparse.Namespace], C]]<a class="reference internal" href="_modules/viper/project.html#Project.handler"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.project.Project.handler" title="Permalink to this definition">¶</a></dt>
<dd><p>Use this decorator to define handlers</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fromtype</strong> (<em>type</em>) – The type of object this handler is expecting.</p></li>
<li><p><strong>totype</strong> (<em>type</em>) – The type of object this handler returns.</p></li>
<li><p><strong>args</strong><strong> (</strong><strong>optional</strong><strong>)</strong> (<em>list</em>) – List of arguments for <code class="xref py py-class docutils literal notranslate"><span class="pre">argparse.ArgumentParser</span></code>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="viper.project.Project.hostgroup">
<code class="sig-name descname">hostgroup</code><span class="sig-paren">(</span><em class="sig-param">args: Optional[Sequence[Tuple[Tuple[str, ...], Dict[str, Any]]]] = None</em><span class="sig-paren">)</span> &#x2192; Callable[[Callable[[argparse.Namespace], viper.collections.Hosts]], Callable[[argparse.Namespace], viper.collections.Hosts]]<a class="reference internal" href="_modules/viper/project.html#Project.hostgroup"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.project.Project.hostgroup" title="Permalink to this definition">¶</a></dt>
<dd><p>Use this decorator to define host groups</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>args</strong><strong> (</strong><strong>optional</strong><strong>)</strong> (<em>list</em>) – Arguments to be parsed by py:class:<cite>argparse.ArgumentParser</cite></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="viper.project.Project.job">
<code class="sig-name descname">job</code><span class="sig-paren">(</span><em class="sig-param">args: Optional[Sequence[Tuple[Tuple[str, ...], Dict[str, Any]]]] = None</em><span class="sig-paren">)</span> &#x2192; Callable[[Callable[[viper.collections.Hosts, argparse.Namespace], viper.collections.Results]], Callable[[viper.collections.Hosts, argparse.Namespace], viper.collections.Results]]<a class="reference internal" href="_modules/viper/project.html#Project.job"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.project.Project.job" title="Permalink to this definition">¶</a></dt>
<dd><p>Use this decorator to define a job.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>args</strong><strong> (</strong><strong>optional</strong><strong>)</strong> (<em>list</em>) – List of arguments for <code class="xref py py-class docutils literal notranslate"><span class="pre">argparse.ArgumentParser</span></code>.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="viper.project.arg">
<code class="sig-prename descclassname">viper.project.</code><code class="sig-name descname">arg</code><span class="sig-paren">(</span><em class="sig-param">*args: str</em>, <em class="sig-param">**kwargs: Any</em><span class="sig-paren">)</span> &#x2192; Tuple[Tuple[str, ...], Dict[str, Any]]<a class="reference internal" href="_modules/viper/project.html#arg"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.project.arg" title="Permalink to this definition">¶</a></dt>
<dd><p>Argumenst to be passed to argparse</p>
</dd></dl>

</div>
</div>
</div>
<div class="section" id="module-viper.serializers">
<span id="viper-serializers-module"></span><h2>viper.serializers module<a class="headerlink" href="#module-viper.serializers" title="Permalink to this headline">¶</a></h2>
<div class="section" id="viper-object-serializers">
<h3>Viper Object Serializers<a class="headerlink" href="#viper-object-serializers" title="Permalink to this headline">¶</a></h3>
<p>This module contains various loaders that helps loading viper collection
objects (such as Hosts, Task etc.) from a file, and also dumpers that helps
dump tha same to a file.</p>
<dl class="class">
<dt id="viper.serializers.Serializers">
<em class="property">class </em><code class="sig-prename descclassname">viper.serializers.</code><code class="sig-name descname">Serializers</code><a class="reference internal" href="_modules/viper/serializers.html#Serializers"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.serializers.Serializers" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">enum.Enum</span></code></p>
<p>A list of serializers to help loading and dumping objects
from or to a file.</p>
<dl class="attribute">
<dt id="viper.serializers.Serializers.csv">
<code class="sig-name descname">csv</code><em class="property"> = Serializer(load=&lt;function _load_csv&gt;, dump=&lt;function _dump_csv&gt;)</em><a class="headerlink" href="#viper.serializers.Serializers.csv" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="viper.serializers.Serializers.json">
<code class="sig-name descname">json</code><em class="property"> = Serializer(load=&lt;function _load_json&gt;, dump=&lt;function _dump_json&gt;)</em><a class="headerlink" href="#viper.serializers.Serializers.json" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="viper.serializers.Serializers.yml">
<code class="sig-name descname">yml</code><em class="property"> = Serializer(load=&lt;function _load_yaml&gt;, dump=&lt;function _dump_yaml&gt;)</em><a class="headerlink" href="#viper.serializers.Serializers.yml" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
</div>
<div class="section" id="module-viper.utils">
<span id="viper-utils-module"></span><h2>viper.utils module<a class="headerlink" href="#module-viper.utils" title="Permalink to this headline">¶</a></h2>
<p>A collection of some handy utilities.</p>
<dl class="function">
<dt id="viper.utils.flatten_dict">
<code class="sig-prename descclassname">viper.utils.</code><code class="sig-name descname">flatten_dict</code><span class="sig-paren">(</span><em class="sig-param">d: Dict[Any, Any]</em><span class="sig-paren">)</span> &#x2192; Dict[str, object]<a class="reference internal" href="_modules/viper/utils.html#flatten_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.utils.flatten_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Flatten a nested dictionary.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>d</strong> (<em>dist</em>) – The nested dictionary to flatten.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>dict</p>
</dd>
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">flatten_dict</span><span class="p">({</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;c&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;d&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;e&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s2">&quot;f&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">}}})</span>
<span class="c1"># {</span>
<span class="c1">#     &quot;a&quot;: 1,</span>
<span class="c1">#     &quot;b:c&quot;: 2,</span>
<span class="c1">#     &quot;b:d:e&quot;: 3,</span>
<span class="c1">#     &quot;b:d:f&quot;: 4,</span>
<span class="c1"># }</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="viper.utils.optional">
<code class="sig-prename descclassname">viper.utils.</code><code class="sig-name descname">optional</code><span class="sig-paren">(</span><em class="sig-param">dict_: Dict[object, object], key: object, expect: Union[type, Tuple[type, ...]], *, parser: Optional[Callable[[Dict[object, object], object], object]] = None</em><span class="sig-paren">)</span> &#x2192; Optional[T]<a class="reference internal" href="_modules/viper/utils.html#optional"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.utils.optional" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a value safely from the given dict using the given key.
If the value is not found or is None, return it anyway.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p>ValueError</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="viper.utils.required">
<code class="sig-prename descclassname">viper.utils.</code><code class="sig-name descname">required</code><span class="sig-paren">(</span><em class="sig-param">dict_: Dict[object, object], key: object, expect: Union[type, Tuple[type, ...]], *, parser: Optional[Callable[[Dict[object, object], object], object]] = None, default: Optional[T] = None, default_factory: Optional[Callable[[], T]] = None</em><span class="sig-paren">)</span> &#x2192; T<a class="reference internal" href="_modules/viper/utils.html#required"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.utils.required" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a value safely from the given dict using the given key.
If the value is not found or is None, raise value error.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p>ValueError</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="viper.utils.unflatten_dict">
<code class="sig-prename descclassname">viper.utils.</code><code class="sig-name descname">unflatten_dict</code><span class="sig-paren">(</span><em class="sig-param">d: Dict[object, object]</em><span class="sig-paren">)</span> &#x2192; Dict[object, object]<a class="reference internal" href="_modules/viper/utils.html#unflatten_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.utils.unflatten_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert a flattened dict back to nested dict.
:param dict d: The flattened dict to convert.
:rtype: dict
:example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">unflatten_dict</span><span class="p">({</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;b:c&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;b:d:e&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s2">&quot;b:d:f&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">})</span>
<span class="c1"># {</span>
<span class="c1">#   &quot;a&quot;: 1,</span>
<span class="c1">#   &quot;b&quot;: {&quot;c&quot;: 2, &quot;d&quot;: {&quot;e&quot;: 3, &quot;f&quot;: 4}},</span>
<span class="c1"># }</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="module-viper">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-viper" title="Permalink to this headline">¶</a></h2>
<p>Viper provides a simple API (Python and CLI) to easily manage large infrastructures.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    ▄   ▄█ █ ▄▄  ▄███▄   █▄▄▄▄   ▄█    ▄   ▄████  █▄▄▄▄ ██     ▄█▄    ████▄ █▀▄▀█ █▀▄▀█ ██      ▄   ██▄   ▄███▄   █▄▄▄▄
     █  ██ █   █ █▀   ▀  █  ▄▀   ██     █  █▀   ▀ █  ▄▀ █ █    █▀ ▀▄  █   █ █ █ █ █ █ █ █ █      █  █  █  █▀   ▀  █  ▄▀
█     █ ██ █▀▀▀  ██▄▄    █▀▀▌    ██ ██   █ █▀▀    █▀▀▌  █▄▄█   █   ▀  █   █ █ ▄ █ █ ▄ █ █▄▄█ ██   █ █   █ ██▄▄    █▀▀▌
 █    █ ▐█ █     █▄   ▄▀ █  █    ▐█ █ █  █ █      █  █  █  █   █▄  ▄▀ ▀████ █   █ █   █ █  █ █ █  █ █  █  █▄   ▄▀ █  █
  █  █   ▐  █    ▀███▀     █      ▐ █  █ █  █       █      █   ▀███▀           █     █     █ █  █ █ ███▀  ▀███▀     █
   █▐        ▀            ▀         █   ██   ▀     ▀      █                   ▀     ▀     █  █   ██                ▀
   ▐                                                     ▀                               ▀
</pre></div>
</div>
<div class="section" id="getting-started">
<h3>Getting Started<a class="headerlink" href="#getting-started" title="Permalink to this headline">¶</a></h3>
<div class="section" id="installation">
<h4>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h4>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip install -U viper-infra-commander

<span class="c1"># Or install with batteries included</span>

pip install -U <span class="s2">&quot;viper-infra-commander[batteries]&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="initialization">
<h4>Initialization<a class="headerlink" href="#initialization" title="Permalink to this headline">¶</a></h4>
<p>Viper needs to initialize a SQLite DB in the present working directory (the workspace).</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># (Optional) enable tab auto completion</span>
<span class="nb">eval</span> <span class="s2">&quot;</span><span class="k">$(</span>viper autocomplete <span class="k">$(</span>basename <span class="nv">$SHELL</span><span class="k">))</span><span class="s2">&quot;</span>


<span class="c1"># Initialize SQLite DB</span>
viper init -f
</pre></div>
</div>
</div>
<div class="section" id="viper-in-action-basic-mode">
<h4>Viper in Action (Basic Mode)<a class="headerlink" href="#viper-in-action-basic-mode" title="Permalink to this headline">¶</a></h4>
<p>Define a set of hosts in csv format (json and yml are also supported) in <code class="docutils literal notranslate"><span class="pre">hosts.csv</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cat &gt; hosts.csv &lt;&lt; EOF
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ip</span><span class="p">,</span><span class="n">hostname</span><span class="p">,</span><span class="n">login_name</span><span class="p">,</span><span class="n">identity_file</span>
<span class="mf">192.168</span><span class="o">.</span><span class="mf">0.11</span><span class="p">,</span><span class="n">host11</span><span class="p">,</span><span class="n">root</span><span class="p">,</span><span class="o">/</span><span class="n">root</span><span class="o">/.</span><span class="n">ssh</span><span class="o">/</span><span class="n">id_rsa</span><span class="o">.</span><span class="n">pub</span>
<span class="mf">192.168</span><span class="o">.</span><span class="mf">0.12</span><span class="p">,</span><span class="n">host12</span><span class="p">,</span><span class="n">root</span><span class="p">,</span><span class="o">/</span><span class="n">root</span><span class="o">/.</span><span class="n">ssh</span><span class="o">/</span><span class="n">id_rsa</span><span class="o">.</span><span class="n">pub</span>
<span class="mf">192.168</span><span class="o">.</span><span class="mf">0.13</span><span class="p">,</span><span class="n">host13</span><span class="p">,</span><span class="n">root</span><span class="p">,</span><span class="o">/</span><span class="n">root</span><span class="o">/.</span><span class="n">ssh</span><span class="o">/</span><span class="n">id_rsa</span><span class="o">.</span><span class="n">pub</span>
<span class="mf">192.168</span><span class="o">.</span><span class="mf">0.14</span><span class="p">,</span><span class="n">host14</span><span class="p">,</span><span class="n">root</span><span class="p">,</span><span class="o">/</span><span class="n">root</span><span class="o">/.</span><span class="n">ssh</span><span class="o">/</span><span class="n">id_rsa</span><span class="o">.</span><span class="n">pub</span>
<span class="mf">192.168</span><span class="o">.</span><span class="mf">0.15</span><span class="p">,</span><span class="n">host15</span><span class="p">,</span><span class="n">root</span><span class="p">,</span><span class="o">/</span><span class="n">root</span><span class="o">/.</span><span class="n">ssh</span><span class="o">/</span><span class="n">id_rsa</span><span class="o">.</span><span class="n">pub</span>
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>EOF
</pre></div>
</div>
<p>Define a task in <code class="docutils literal notranslate"><span class="pre">task.py</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cat &gt; task.py &lt;&lt; EOF
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">viper</span> <span class="kn">import</span> <span class="n">Task</span>

<span class="k">def</span> <span class="nf">ping_command</span><span class="p">(</span><span class="n">host</span><span class="p">):</span>
    <span class="k">return</span> <span class="s2">&quot;ping&quot;</span><span class="p">,</span> <span class="s2">&quot;-c&quot;</span><span class="p">,</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span> <span class="n">host</span><span class="o">.</span><span class="n">ip</span>

<span class="k">def</span> <span class="nf">ping</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">Task</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Ping once&quot;</span><span class="p">,</span>
        <span class="n">command_factory</span><span class="o">=</span><span class="n">ping_command</span>
    <span class="p">)</span>
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>EOF
</pre></div>
</div>
<p>Perform the following actions:</p>
<ul class="simple">
<li><p>Run the ping task on the set of hosts in parallel with 5 workers</p></li>
<li><p>Then filter only the results where the task failed</p></li>
<li><p>Re-run the task on the filtered set of hosts</p></li>
<li><p>Store all the results</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>viper hosts:from-file hosts.csv <span class="se">\</span>
        <span class="p">|</span> viper hosts:run-task task.ping --max-worker <span class="m">5</span> <span class="se">\</span>
        <span class="p">|</span> viper results:where returncode IS_NOT <span class="m">0</span> <span class="se">\</span>
        <span class="p">|</span> viper results:re-run --indent <span class="m">4</span>
</pre></div>
</div>
<p>The results are stored in the DB as history.
To see the stdout of the final results from history:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>viper results <span class="se">\</span>
        <span class="p">|</span> viper results:final <span class="se">\</span>
        <span class="p">|</span> viper results:format <span class="s2">&quot;{host.hostname}: {stdout}&quot;</span>
</pre></div>
</div>
<p>Export the results to a csv file:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>viper results --final <span class="se">\</span>
        <span class="p">|</span> viper results:to-file results.csv --indent <span class="m">4</span>
</pre></div>
</div>
<p>Define a job using the Python API (CLI and Python API are almost similar):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cat &gt; job.py &lt;&lt; EOF
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">viper</span> <span class="kn">import</span> <span class="n">WhereConditions</span>
<span class="kn">from</span> <span class="nn">task</span> <span class="kn">import</span> <span class="n">ping</span>

<span class="k">def</span> <span class="nf">ping_and_export</span><span class="p">(</span><span class="n">hosts</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">(</span>
        <span class="n">hosts</span><span class="o">.</span><span class="n">task</span><span class="p">(</span><span class="n">ping</span><span class="p">())</span>
        <span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">max_workers</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
        <span class="o">.</span><span class="n">final</span><span class="p">()</span>
        <span class="o">.</span><span class="n">to_file</span><span class="p">(</span><span class="s2">&quot;results.csv&quot;</span><span class="p">)</span>
    <span class="p">)</span>
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>EOF
</pre></div>
</div>
<p>Run the job using CLI:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>viper hosts:from-file hosts.csv <span class="se">\</span>
        <span class="p">|</span> viper run job.ping_and_export <span class="se">\</span>
        <span class="p">|</span> viper results:format <span class="s2">&quot;{host.hostname}: {stdout}&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="viperfile-in-action-advanced-mode">
<h4>Viperfile in Action (Advanced Mode)<a class="headerlink" href="#viperfile-in-action-advanced-mode" title="Permalink to this headline">¶</a></h4>
<p>Define a project with custom subcommands in viperfile:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cat &gt; viperfile.py &lt;&lt; EOF
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">viper</span> <span class="kn">import</span> <span class="n">Hosts</span><span class="p">,</span> <span class="n">Task</span>
<span class="kn">from</span> <span class="nn">viper.project</span> <span class="kn">import</span> <span class="n">Project</span><span class="p">,</span> <span class="n">arg</span>


<span class="n">foo</span> <span class="o">=</span> <span class="n">Project</span><span class="p">(</span><span class="n">prefix</span><span class="o">=</span><span class="s2">&quot;foo&quot;</span><span class="p">)</span>


<span class="nd">@foo</span><span class="o">.</span><span class="n">hostgroup</span><span class="p">(</span><span class="n">args</span><span class="o">=</span><span class="p">[</span><span class="n">arg</span><span class="p">(</span><span class="s2">&quot;-f&quot;</span><span class="p">,</span> <span class="s2">&quot;--file&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s2">&quot;hosts.csv&quot;</span><span class="p">)])</span>
<span class="k">def</span> <span class="nf">allhosts</span><span class="p">(</span><span class="n">args</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">Hosts</span><span class="o">.</span><span class="n">from_file</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">file</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">remote_exec_command</span><span class="p">(</span><span class="n">host</span><span class="p">,</span> <span class="n">command</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">(</span>
        <span class="s2">&quot;ssh&quot;</span><span class="p">,</span>
        <span class="s2">&quot;-i&quot;</span><span class="p">,</span>
        <span class="n">host</span><span class="o">.</span><span class="n">identity_file</span><span class="p">,</span>
        <span class="s2">&quot;-l&quot;</span><span class="p">,</span>
        <span class="n">host</span><span class="o">.</span><span class="n">login_name</span><span class="p">,</span>
        <span class="s2">&quot;-p&quot;</span><span class="p">,</span>
        <span class="nb">str</span><span class="p">(</span><span class="n">host</span><span class="o">.</span><span class="n">port</span><span class="p">),</span>
        <span class="s2">&quot;-o&quot;</span><span class="p">,</span>
        <span class="s2">&quot;StrictHostKeyChecking=no&quot;</span><span class="p">,</span>
        <span class="s2">&quot;-o&quot;</span><span class="p">,</span>
        <span class="s2">&quot;PubkeyAuthentication=yes&quot;</span><span class="p">,</span>
        <span class="n">host</span><span class="o">.</span><span class="n">ip</span><span class="p">,</span>
        <span class="n">command</span><span class="p">,</span>
    <span class="p">)</span>


<span class="nd">@foo</span><span class="o">.</span><span class="n">job</span><span class="p">(</span>
    <span class="n">args</span><span class="o">=</span><span class="p">[</span>
        <span class="n">arg</span><span class="p">(</span><span class="s2">&quot;command&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;command to execute&quot;</span><span class="p">),</span>
        <span class="n">arg</span><span class="p">(</span><span class="s2">&quot;-w&quot;</span><span class="p">,</span> <span class="s2">&quot;--workers&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
    <span class="p">]</span>
<span class="p">)</span>
<span class="k">def</span> <span class="nf">remote_exec</span><span class="p">(</span><span class="n">hosts</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">(</span>
        <span class="n">hosts</span><span class="o">.</span><span class="n">task</span><span class="p">(</span>
            <span class="n">Task</span><span class="p">(</span>
                <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Remote execute command&quot;</span><span class="p">,</span>
                <span class="n">command_factory</span><span class="o">=</span><span class="n">remote_exec_command</span><span class="p">,</span>
                <span class="n">timeout</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
            <span class="p">),</span>
            <span class="n">args</span><span class="o">.</span><span class="n">command</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">max_workers</span><span class="o">=</span><span class="n">args</span><span class="o">.</span><span class="n">workers</span><span class="p">)</span>
        <span class="o">.</span><span class="n">final</span><span class="p">()</span>
    <span class="p">)</span>
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>EOF
</pre></div>
</div>
<p>See the auto generated custom subcommands:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>viper --help
<span class="c1"># Will show the subcommands: &quot;@foo:allhosts&quot; and &quot;@foo:remote_exec&quot;</span>
</pre></div>
</div>
<p>Run the job, export the results in a file, and format the output:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>viper @foo:allhosts <span class="se">\</span>
        <span class="p">|</span> viper @foo:remote_exec <span class="s2">&quot;uname -a&quot;</span> --workers <span class="m">5</span> <span class="se">\</span>
        <span class="p">|</span> viper results:to-file results.csv <span class="se">\</span>
        <span class="p">|</span> viper results:format <span class="s2">&quot;{task.name} [{host.hostname}]: {returncode}: {stdout}&quot;</span>
</pre></div>
</div>
<dl class="function">
<dt id="viper.meta">
<code class="sig-prename descclassname">viper.</code><code class="sig-name descname">meta</code><span class="sig-paren">(</span><em class="sig-param">**mapping: Union[str, bool, int, float, None]</em><span class="sig-paren">)</span> &#x2192; Any<a class="reference internal" href="_modules/viper/collections.html#meta"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.meta" title="Permalink to this definition">¶</a></dt>
<dd><p>Meta data object creator.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>**mapping</strong> – key-value pairs as the meta data.</p>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">viper</span> <span class="kn">import</span> <span class="n">Host</span><span class="p">,</span> <span class="n">meta</span>

<span class="n">host</span> <span class="o">=</span> <span class="n">Host</span><span class="p">(</span><span class="s1">&#39;1.1.1.1&#39;</span><span class="p">,</span> <span class="n">meta</span><span class="o">=</span><span class="n">meta</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;aws&quot;</span><span class="p">))</span>
<span class="n">host</span><span class="o">.</span><span class="n">meta</span><span class="o">.</span><span class="n">provider</span>
<span class="c1"># &#39;aws&#39;</span>
<span class="n">host</span><span class="o">.</span><span class="n">meta</span><span class="p">[</span><span class="s1">&#39;provider&#39;</span><span class="p">]</span>
<span class="c1"># &#39;aws&#39;</span>
<span class="n">host</span><span class="p">[</span><span class="s1">&#39;meta&#39;</span><span class="p">][</span><span class="s1">&#39;provider&#39;</span><span class="p">]</span>
<span class="c1"># &#39;aws&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="class">
<dt id="viper.Host">
<em class="property">class </em><code class="sig-prename descclassname">viper.</code><code class="sig-name descname">Host</code><span class="sig-paren">(</span><em class="sig-param">ip: str</em>, <em class="sig-param">hostname: Optional[str] = None</em>, <em class="sig-param">domain: Optional[str] = None</em>, <em class="sig-param">port: int = 22</em>, <em class="sig-param">login_name: Optional[str] = None</em>, <em class="sig-param">identity_file: Optional[str] = None</em>, <em class="sig-param">meta: Any = &lt;factory&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/viper/collections.html#Host"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.Host" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#viper.collections.Item" title="viper.collections.Item"><code class="xref py py-class docutils literal notranslate"><span class="pre">viper.collections.Item</span></code></a></p>
<p>Viper Host class.</p>
<dl class="attribute">
<dt id="viper.Host.domain">
<code class="sig-name descname">domain</code><em class="property"> = None</em><a class="headerlink" href="#viper.Host.domain" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="viper.Host.format">
<code class="sig-name descname">format</code><span class="sig-paren">(</span><em class="sig-param">template: str</em><span class="sig-paren">)</span> &#x2192; str<a class="headerlink" href="#viper.Host.format" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a custom string representation of this object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>template</strong> (<em>str</em>) – The template to be used as <cite>“template”.format(**vars(self))</cite></p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>str</p>
</dd>
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Host</span><span class="p">(</span><span class="s2">&quot;1.2.3.4&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{ip}</span><span class="s2"> </span><span class="si">{hostname}</span><span class="s2"> </span><span class="si">{meta.tag}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.Host.fqdn">
<code class="sig-name descname">fqdn</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; str<a class="reference internal" href="_modules/viper/collections.html#Host.fqdn"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.Host.fqdn" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the FQDN from hostname and domain name.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – If either of hostname or domain name is not set.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="viper.Host.from_dict">
<em class="property">classmethod </em><code class="sig-name descname">from_dict</code><span class="sig-paren">(</span><em class="sig-param">dict_: Dict[object, object], *, unflatten: bool = False</em><span class="sig-paren">)</span> &#x2192; viper.collections.Host<a class="reference internal" href="_modules/viper/collections.html#Host.from_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.Host.from_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize item from the given dict.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>dict</strong> (<em>dict</em>) – The dictionary containing the properties for this object.</p>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Host</span><span class="o">.</span><span class="n">from_dict</span><span class="p">({</span><span class="s2">&quot;ip&quot;</span><span class="p">:</span> <span class="s2">&quot;1.2.3.4&quot;</span><span class="p">})</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.Host.from_func">
<em class="property">classmethod </em><code class="sig-name descname">from_func</code><span class="sig-paren">(</span><em class="sig-param">funcpath: str</em><span class="sig-paren">)</span> &#x2192; CollectionType<a class="headerlink" href="#viper.Host.from_func" title="Permalink to this definition">¶</a></dt>
<dd><p>Load the object from the given Python function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>funcpath</strong> (<em>str</em>) – The path to a Python function that returns an
instance of this class.</p>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Task</span><span class="o">.</span><span class="n">from_func</span><span class="p">(</span><span class="s2">&quot;task.ping&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.Host.from_json">
<em class="property">classmethod </em><code class="sig-name descname">from_json</code><span class="sig-paren">(</span><em class="sig-param">json: str</em>, <em class="sig-param">*args: Any</em>, <em class="sig-param">unflatten: bool = False</em>, <em class="sig-param">**kwargs: Any</em><span class="sig-paren">)</span> &#x2192; ItemType<a class="headerlink" href="#viper.Host.from_json" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialise a new object of this class from the given JSON string.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>json</strong> (<em>str</em>) – The JSON data to parse.</p></li>
<li><p><strong>and **kwargs</strong> (<em>*args</em>) – These will be passed to <cite>json.laods</cite>.</p></li>
</ul>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Hosts</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="s1">&#39;[{&quot;ip&quot;: &quot;1.1.1.1&quot;}]&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.Host.hash">
<code class="sig-name descname">hash</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; int<a class="headerlink" href="#viper.Host.hash" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the hash value.</p>
<p>By convention all Viper native objects are frozen and thus hashable.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="viper.Host.hostname">
<code class="sig-name descname">hostname</code><em class="property"> = None</em><a class="headerlink" href="#viper.Host.hostname" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="viper.Host.identity_file">
<code class="sig-name descname">identity_file</code><em class="property"> = None</em><a class="headerlink" href="#viper.Host.identity_file" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="viper.Host.login_name">
<code class="sig-name descname">login_name</code><em class="property"> = None</em><a class="headerlink" href="#viper.Host.login_name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="viper.Host.pipe">
<code class="sig-name descname">pipe</code><span class="sig-paren">(</span><em class="sig-param">handler: Any</em>, <em class="sig-param">*args: Any</em><span class="sig-paren">)</span> &#x2192; T<a class="headerlink" href="#viper.Host.pipe" title="Permalink to this definition">¶</a></dt>
<dd><p>Pipe this object to the given function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>handler</strong> (<em>callable</em>) – A callable that expects this object.</p></li>
<li><p><strong>args</strong> (<em>object</em>) – Arguments to be passed to the handler for decision making.</p></li>
</ul>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Hosts</span><span class="o">.</span><span class="n">from_items</span><span class="p">(</span><span class="n">Host</span><span class="p">(</span><span class="s2">&quot;1.2.3.4&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">pipe</span><span class="p">(</span><span class="n">hosts2csv</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="attribute">
<dt id="viper.Host.port">
<code class="sig-name descname">port</code><em class="property"> = 22</em><a class="headerlink" href="#viper.Host.port" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="viper.Host.results">
<code class="sig-name descname">results</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; viper.collections.Results<a class="reference internal" href="_modules/viper/collections.html#Host.results"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.Host.results" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetch recent results of current host from database.</p>
</dd></dl>

<dl class="method">
<dt id="viper.Host.run_task">
<code class="sig-name descname">run_task</code><span class="sig-paren">(</span><em class="sig-param">task: viper.collections.Task</em>, <em class="sig-param">*args: str</em><span class="sig-paren">)</span> &#x2192; viper.collections.Result<a class="reference internal" href="_modules/viper/collections.html#Host.run_task"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.Host.run_task" title="Permalink to this definition">¶</a></dt>
<dd><p>Assign the task to the host and then run it.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>task</strong> (<a class="reference internal" href="#viper.collections.Task" title="viper.collections.Task"><em>viper.collections.Task</em></a>) – The task to be assigned.</p></li>
<li><p><strong>args</strong> (<em>str</em>) – The arguments to be used to create the command
from <code class="xref py py-attr docutils literal notranslate"><span class="pre">viper.collections.Task.command_factory</span></code>.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#viper.collections.Result" title="viper.collections.Result">viper.collections.Result</a></p>
</dd>
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Host</span><span class="p">(</span><span class="s2">&quot;1.2.3.4&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">task_task</span><span class="p">(</span><span class="n">ping</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.Host.task">
<code class="sig-name descname">task</code><span class="sig-paren">(</span><em class="sig-param">task: viper.collections.Task</em>, <em class="sig-param">*args: str</em><span class="sig-paren">)</span> &#x2192; viper.collections.Runner<a class="reference internal" href="_modules/viper/collections.html#Host.task"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.Host.task" title="Permalink to this definition">¶</a></dt>
<dd><p>Assigns a task to be run.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>task</strong> (<a class="reference internal" href="#viper.collections.Task" title="viper.collections.Task"><em>viper.collections.Task</em></a>) – The task to be assigned.</p></li>
<li><p><strong>args</strong> (<em>str</em>) – The arguments to be used to create the command from <cite>command_factory</cite>.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#viper.collections.Runner" title="viper.collections.Runner">viper.collections.Runner</a></p>
</dd>
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Host</span><span class="p">(</span><span class="s2">&quot;1.2.3.4&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">task</span><span class="p">(</span><span class="n">ping</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.Host.to_dict">
<code class="sig-name descname">to_dict</code><span class="sig-paren">(</span><em class="sig-param">*</em>, <em class="sig-param">flatten: bool = False</em><span class="sig-paren">)</span> &#x2192; Dict[str, object]<a class="reference internal" href="_modules/viper/collections.html#Host.to_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.Host.to_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Represent the item as dict.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>flatten</strong> (<em>bool</em>) – If true, the dict won’t be nested.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>dict</p>
</dd>
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Host</span><span class="p">(</span><span class="s2">&quot;1.2.3.4&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.Host.to_json">
<code class="sig-name descname">to_json</code><span class="sig-paren">(</span><em class="sig-param">*args: Any</em>, <em class="sig-param">flatten: bool = False</em>, <em class="sig-param">**kwargs: Any</em><span class="sig-paren">)</span> &#x2192; str<a class="headerlink" href="#viper.Host.to_json" title="Permalink to this definition">¶</a></dt>
<dd><p>Represent the collection as JSON data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>*args and **kwargs</strong> (<em>object</em>) – These will be passed to <code class="docutils literal notranslate"><span class="pre">json.laods</span></code>.</p>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Host</span><span class="p">(</span><span class="s2">&quot;1.2.3.4&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="viper.Hosts">
<em class="property">class </em><code class="sig-prename descclassname">viper.</code><code class="sig-name descname">Hosts</code><span class="sig-paren">(</span><em class="sig-param">_all: Sequence[viper.collections.Host] = &lt;factory&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/viper/collections.html#Hosts"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.Hosts" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#viper.collections.Items" title="viper.collections.Items"><code class="xref py py-class docutils literal notranslate"><span class="pre">viper.collections.Items</span></code></a></p>
<p>A group of <a class="reference internal" href="#viper.collections.Host" title="viper.collections.Host"><code class="xref py py-class docutils literal notranslate"><span class="pre">viper.collections.Host</span></code></a> objects.</p>
<dl class="method">
<dt id="viper.Hosts.all">
<code class="sig-name descname">all</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; Sequence[T]<a class="headerlink" href="#viper.Hosts.all" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for .to_items()</p>
</dd></dl>

<dl class="method">
<dt id="viper.Hosts.count">
<code class="sig-name descname">count</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; int<a class="headerlink" href="#viper.Hosts.count" title="Permalink to this definition">¶</a></dt>
<dd><p>Count the number of items.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="viper.Hosts.filter">
<code class="sig-name descname">filter</code><span class="sig-paren">(</span><em class="sig-param">filter_: Any</em>, <em class="sig-param">*args: object</em><span class="sig-paren">)</span> &#x2192; ItemsType<a class="headerlink" href="#viper.Hosts.filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Filter the items by a given function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filter</strong> (<em>callable</em>) – A function that returns either True or False.</p></li>
<li><p><strong>args</strong> (<em>object</em>) – Arguments to be passed to the filter to manipulate the decision making.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="viper.Hosts.format">
<code class="sig-name descname">format</code><span class="sig-paren">(</span><em class="sig-param">template: str</em>, <em class="sig-param">sep: str = '\n'</em><span class="sig-paren">)</span> &#x2192; str<a class="headerlink" href="#viper.Hosts.format" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a custom string representation of this list of objects.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>template</strong> (<em>str</em>) – The template will be compiled by Python’s <cite>.format()</cite>.</p></li>
<li><p><strong>sep</strong> (<em>str</em>) – The separator used to separate all the items.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>str</p>
</dd>
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Hosts</span><span class="o">.</span><span class="n">from_items</span><span class="p">(</span><span class="n">Host</span><span class="p">(</span><span class="s2">&quot;1.2.3.4&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{ip}</span><span class="s2"> </span><span class="si">{hostname}</span><span class="s2"> </span><span class="si">{meta.tag}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.Hosts.from_file">
<em class="property">classmethod </em><code class="sig-name descname">from_file</code><span class="sig-paren">(</span><em class="sig-param">filepath: str</em><span class="sig-paren">)</span> &#x2192; ItemsType<a class="headerlink" href="#viper.Hosts.from_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize items by reading data from a file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>str</strong> (<em>filepath</em>) – The path for the file to read from.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#viper.collections.Items" title="viper.collections.Items">viper.collections.Items</a></p>
</dd>
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Hosts</span><span class="o">.</span><span class="n">from_file</span><span class="p">(</span><span class="s2">&quot;/path/to/file/hosts.json&quot;</span><span class="p">)</span>

<span class="n">Hosts</span><span class="o">.</span><span class="n">from_file</span><span class="p">(</span><span class="s2">&quot;/path/to/file/hosts.csv&quot;</span><span class="p">)</span>

<span class="n">Hosts</span><span class="o">.</span><span class="n">from_file</span><span class="p">(</span><span class="s2">&quot;/path/to/file/hosts.yml&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.Hosts.from_func">
<em class="property">classmethod </em><code class="sig-name descname">from_func</code><span class="sig-paren">(</span><em class="sig-param">funcpath: str</em><span class="sig-paren">)</span> &#x2192; CollectionType<a class="headerlink" href="#viper.Hosts.from_func" title="Permalink to this definition">¶</a></dt>
<dd><p>Load the object from the given Python function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>funcpath</strong> (<em>str</em>) – The path to a Python function that returns an
instance of this class.</p>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Task</span><span class="o">.</span><span class="n">from_func</span><span class="p">(</span><span class="s2">&quot;task.ping&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.Hosts.from_items">
<em class="property">classmethod </em><code class="sig-name descname">from_items</code><span class="sig-paren">(</span><em class="sig-param">*items: Union[Iterable[T], T]</em><span class="sig-paren">)</span> &#x2192; ItemsType<a class="headerlink" href="#viper.Hosts.from_items" title="Permalink to this definition">¶</a></dt>
<dd><p>Create this an instance of this object using the given items.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>items</strong> (<a class="reference internal" href="#viper.collections.Item" title="viper.collections.Item"><em>viper.collections.Item</em></a>) – The group of items to hold.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#viper.collections.Items" title="viper.collections.Items">viper.collections.Items</a></p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Classes that inherits from <code class="xref py py-class docutils literal notranslate"><span class="pre">Items</span></code> should not be
initialized directly (e.g. <code class="docutils literal notranslate"><span class="pre">Hosts(Host(&quot;1.2.3.4&quot;))</span></code>). Factory
methods such as this should be used instead.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Hosts</span><span class="o">.</span><span class="n">from_items</span><span class="p">(</span><span class="n">Host</span><span class="p">(</span><span class="s2">&quot;1.2.3.4&quot;</span><span class="p">))</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.Hosts.from_json">
<em class="property">classmethod </em><code class="sig-name descname">from_json</code><span class="sig-paren">(</span><em class="sig-param">json: str</em>, <em class="sig-param">*args: Any</em>, <em class="sig-param">unflatten: bool = False</em>, <em class="sig-param">**kwargs: Any</em><span class="sig-paren">)</span> &#x2192; ItemsType<a class="headerlink" href="#viper.Hosts.from_json" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialise a new object of this class from the given JSON string.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>json</strong> (<em>str</em>) – The JSON data to parse.</p></li>
<li><p><strong>and **kwargs</strong> (<em>*args</em>) – These will be passed to <cite>json.laods</cite>.</p></li>
</ul>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Hosts</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="s1">&#39;[{&quot;ip&quot;: &quot;1.1.1.1&quot;}]&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.Hosts.from_list">
<em class="property">classmethod </em><code class="sig-name descname">from_list</code><span class="sig-paren">(</span><em class="sig-param">list_: Sequence[Dict[object, object]], *, unflatten: bool = False</em><span class="sig-paren">)</span> &#x2192; ItemsType<a class="headerlink" href="#viper.Hosts.from_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize items from given list of dictiionaries.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>list</strong> (<em>list</em>) – The list of dictiionaries containing the item properties.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#viper.collections.Items" title="viper.collections.Items">viper.collections.Items</a></p>
</dd>
</dl>
<p>This is used for loading JSON data into an instance of this class.</p>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Hosts</span><span class="o">.</span><span class="n">from_list</span><span class="p">([{</span><span class="s2">&quot;ip&quot;</span><span class="p">:</span> <span class="s2">&quot;1.2.3.4&quot;</span><span class="p">}])</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.Hosts.hash">
<code class="sig-name descname">hash</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; int<a class="headerlink" href="#viper.Hosts.hash" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the hash value.</p>
<p>By convention all Viper native objects are frozen and thus hashable.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="viper.Hosts.head">
<code class="sig-name descname">head</code><span class="sig-paren">(</span><em class="sig-param">n: int = 10</em><span class="sig-paren">)</span> &#x2192; ItemsType<a class="headerlink" href="#viper.Hosts.head" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the first ‘n’ items from the group of items.</p>
<p>Works like Python’s [:n] index</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#viper.collections.Item" title="viper.collections.Item">viper.collections.Item</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="viper.Hosts.order_by">
<code class="sig-name descname">order_by</code><span class="sig-paren">(</span><em class="sig-param">*properties: str</em>, <em class="sig-param">reverse: bool = False</em><span class="sig-paren">)</span> &#x2192; ItemsType<a class="headerlink" href="#viper.Hosts.order_by" title="Permalink to this definition">¶</a></dt>
<dd><p>Sort the items by multiple properties</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>properties</strong> (<em>list</em>) – The item will be sorted by the given properties in order.</p></li>
<li><p><strong>reverse</strong> (<em>bool</em>) – Reverse the order after sort.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#viper.collections.Items" title="viper.collections.Items">Items</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="viper.Hosts.pipe">
<code class="sig-name descname">pipe</code><span class="sig-paren">(</span><em class="sig-param">handler: Any</em>, <em class="sig-param">*args: Any</em><span class="sig-paren">)</span> &#x2192; T<a class="headerlink" href="#viper.Hosts.pipe" title="Permalink to this definition">¶</a></dt>
<dd><p>Pipe this object to the given function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>handler</strong> (<em>callable</em>) – A callable that expects this object.</p></li>
<li><p><strong>args</strong> (<em>object</em>) – Arguments to be passed to the handler for decision making.</p></li>
</ul>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Hosts</span><span class="o">.</span><span class="n">from_items</span><span class="p">(</span><span class="n">Host</span><span class="p">(</span><span class="s2">&quot;1.2.3.4&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">pipe</span><span class="p">(</span><span class="n">hosts2csv</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.Hosts.range">
<code class="sig-name descname">range</code><span class="sig-paren">(</span><em class="sig-param">i: Optional[int] = None</em>, <em class="sig-param">j: Optional[int] = None</em><span class="sig-paren">)</span> &#x2192; ItemsType<a class="headerlink" href="#viper.Hosts.range" title="Permalink to this definition">¶</a></dt>
<dd><p>get the items in given range.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>i</strong><strong> (</strong><strong>optional</strong><strong>)</strong> (<em>int</em>) – The first index.</p></li>
<li><p><strong>j</strong><strong> (</strong><strong>optional</strong><strong>)</strong> (<em>int</em>) – The last index.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#viper.collections.Items" title="viper.collections.Items">Items</a></p>
</dd>
</dl>
<p>This has the same behaviour as Python’s [i:j]</p>
</dd></dl>

<dl class="method">
<dt id="viper.Hosts.results">
<code class="sig-name descname">results</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; viper.collections.Results<a class="reference internal" href="_modules/viper/collections.html#Hosts.results"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.Hosts.results" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the past results of this group of hosts from history.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#viper.collections.Results" title="viper.collections.Results">viper.collections.Results</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="viper.Hosts.run_task">
<code class="sig-name descname">run_task</code><span class="sig-paren">(</span><em class="sig-param">task: viper.collections.Task</em>, <em class="sig-param">*args: str</em>, <em class="sig-param">max_workers: int = 0</em><span class="sig-paren">)</span> &#x2192; viper.collections.Results<a class="reference internal" href="_modules/viper/collections.html#Hosts.run_task"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.Hosts.run_task" title="Permalink to this definition">¶</a></dt>
<dd><p>Assign the task to the host and then run it.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>task</strong> (<a class="reference internal" href="#viper.collections.Task" title="viper.collections.Task"><em>viper.collections.Task</em></a>) – The task to be assigned.</p></li>
<li><p><strong>args</strong> (<em>str</em>) – The arguments to be used to create the command
from <code class="xref py py-attr docutils literal notranslate"><span class="pre">viper.collections.Task.command_factory</span></code>.</p></li>
<li><p><strong>max_workers</strong> (<em>int</em>) – Maximum number of thread workers.
if the value is &lt;= 1, tasks will run in sequence.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#viper.collections.Results" title="viper.collections.Results">viper.collections.Results</a></p>
</dd>
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Hosts</span><span class="o">.</span><span class="n">from_items</span><span class="p">(</span><span class="n">Host</span><span class="p">(</span><span class="s2">&quot;1.2.3.4&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">task_task</span><span class="p">(</span><span class="n">ping</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.Hosts.sort">
<code class="sig-name descname">sort</code><span class="sig-paren">(</span><em class="sig-param">key: Optional[Callable[[viper.collections.Item], object]] = None, reverse: bool = False</em><span class="sig-paren">)</span> &#x2192; ItemsType<a class="headerlink" href="#viper.Hosts.sort" title="Permalink to this definition">¶</a></dt>
<dd><p>Sort the items by given key/function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>key</strong> (<em>callable</em>) – A function similar to the one passed to the built-in <cite>sorted()</cite>.</p></li>
<li><p><strong>reverse</strong> (<em>bool</em>) – Reverse the order after sort.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#viper.collections.Items" title="viper.collections.Items">Items</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="viper.Hosts.tail">
<code class="sig-name descname">tail</code><span class="sig-paren">(</span><em class="sig-param">n: int = 10</em><span class="sig-paren">)</span> &#x2192; ItemsType<a class="headerlink" href="#viper.Hosts.tail" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the last ‘n’ item from the group of items.</p>
<p>Works like Python’s [-n:] index</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#viper.collections.Item" title="viper.collections.Item">viper.collections.Item</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="viper.Hosts.task">
<code class="sig-name descname">task</code><span class="sig-paren">(</span><em class="sig-param">task: viper.collections.Task</em>, <em class="sig-param">*args: str</em><span class="sig-paren">)</span> &#x2192; viper.collections.Runners<a class="reference internal" href="_modules/viper/collections.html#Hosts.task"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.Hosts.task" title="Permalink to this definition">¶</a></dt>
<dd><p>Assigns a task to be run on each host in the group.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>task</strong> (<a class="reference internal" href="#viper.collections.Task" title="viper.collections.Task"><em>viper.collections.Task</em></a>) – The task to be assigned.</p></li>
<li><p><strong>args</strong> (<em>str</em>) – The arguments to be used to create the command from <cite>command_factory</cite>.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#viper.collections.Runners" title="viper.collections.Runners">viper.collections.Runners</a></p>
</dd>
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Hosts</span><span class="o">.</span><span class="n">from_items</span><span class="p">(</span><span class="n">Host</span><span class="p">(</span><span class="s2">&quot;1.2.3.4&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">task</span><span class="p">(</span><span class="n">ping</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.Hosts.to_file">
<code class="sig-name descname">to_file</code><span class="sig-paren">(</span><em class="sig-param">filepath: str</em><span class="sig-paren">)</span> &#x2192; ItemsType<a class="headerlink" href="#viper.Hosts.to_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize items by reading data from a file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>str</strong> (<em>filepath</em>) – The path for the file to write.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#viper.collections.Items" title="viper.collections.Items">viper.collections.Items</a></p>
</dd>
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Hosts</span><span class="o">.</span><span class="n">from_items</span><span class="p">(</span><span class="n">Host</span><span class="p">(</span><span class="s2">&quot;1.2.3.4&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">to_file</span><span class="p">(</span><span class="s2">&quot;/path/to/file/hosts.json&quot;</span><span class="p">)</span>

<span class="n">Hosts</span><span class="o">.</span><span class="n">from_items</span><span class="p">(</span><span class="n">Host</span><span class="p">(</span><span class="s2">&quot;1.2.3.4&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">to_file</span><span class="p">(</span><span class="s2">&quot;/path/to/file/hosts.csv&quot;</span><span class="p">)</span>

<span class="n">Hosts</span><span class="o">.</span><span class="n">from_items</span><span class="p">(</span><span class="n">Host</span><span class="p">(</span><span class="s2">&quot;1.2.3.4&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">to_file</span><span class="p">(</span><span class="s2">&quot;/path/to/file/hosts.yml&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.Hosts.to_items">
<code class="sig-name descname">to_items</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; Sequence[T]<a class="headerlink" href="#viper.Hosts.to_items" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a tuple of all the items.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>tuple</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="viper.Hosts.to_json">
<code class="sig-name descname">to_json</code><span class="sig-paren">(</span><em class="sig-param">*args: Any</em>, <em class="sig-param">flatten: bool = False</em>, <em class="sig-param">**kwargs: Any</em><span class="sig-paren">)</span> &#x2192; str<a class="headerlink" href="#viper.Hosts.to_json" title="Permalink to this definition">¶</a></dt>
<dd><p>Represent the collection as JSON data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>*args and **kwargs</strong> (<em>object</em>) – These will be passed to <code class="docutils literal notranslate"><span class="pre">json.laods</span></code>.</p>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Host</span><span class="p">(</span><span class="s2">&quot;1.2.3.4&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.Hosts.to_list">
<code class="sig-name descname">to_list</code><span class="sig-paren">(</span><em class="sig-param">flatten: bool = False</em><span class="sig-paren">)</span> &#x2192; List[Dict[str, object]]<a class="headerlink" href="#viper.Hosts.to_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Represent the items as a list of dictiionaries.</p>
<p>This is used for dumping an instance of this object as JSON data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>flatten</strong> (<em>bool</em>) – If True, dicts won’t be nested.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>list</p>
</dd>
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Hosts</span><span class="o">.</span><span class="n">from_items</span><span class="p">(</span><span class="n">Host</span><span class="p">(</span><span class="s2">&quot;1.2.3.4&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.Hosts.where">
<code class="sig-name descname">where</code><span class="sig-paren">(</span><em class="sig-param">key: str, condition: viper.collections.WhereConditions, values: Sequence[str]</em><span class="sig-paren">)</span> &#x2192; ItemsType<a class="headerlink" href="#viper.Hosts.where" title="Permalink to this definition">¶</a></dt>
<dd><p>Select items by a custom query.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>key</strong> (<em>str</em>) – The key will be compiled by Python’s <cite>.format()</cite>.</p></li>
<li><p><strong>condition</strong> (<a class="reference internal" href="#viper.collections.WhereConditions" title="viper.collections.WhereConditions"><em>viper.collections.WhereConditions</em></a>) – The where condition.</p></li>
<li><p><strong>values</strong> (<em>list</em>) – The values for the key.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#viper.collections.Items" title="viper.collections.Items">Items</a></p>
</dd>
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Hosts</span><span class="o">.</span><span class="n">from_items</span><span class="p">(</span>
    <span class="n">Host</span><span class="p">(</span><span class="s2">&quot;1.1.1.1&quot;</span><span class="p">),</span>
    <span class="n">Host</span><span class="p">(</span><span class="s2">&quot;2.2.2.2&quot;</span><span class="p">)</span>
<span class="p">)</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="s2">&quot;ip&quot;</span><span class="p">,</span> <span class="n">WhereConditions</span><span class="o">.</span><span class="n">is_</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;1.1.1.1&quot;</span><span class="p">])</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="viper.Result">
<em class="property">class </em><code class="sig-prename descclassname">viper.</code><code class="sig-name descname">Result</code><span class="sig-paren">(</span><em class="sig-param">trigger_time: float, task: viper.collections.Task, host: viper.collections.Host, args: Tuple[str, ...], command: Tuple[str, ...], stdout: str, stderr: str, returncode: int, start: float, end: float, retry: int</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/viper/collections.html#Result"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.Result" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#viper.collections.Item" title="viper.collections.Item"><code class="xref py py-class docutils literal notranslate"><span class="pre">viper.collections.Item</span></code></a></p>
<p>The result of an executed task.</p>
<dl class="method">
<dt id="viper.Result.by_id">
<em class="property">classmethod </em><code class="sig-name descname">by_id</code><span class="sig-paren">(</span><em class="sig-param">id_: int</em><span class="sig-paren">)</span> &#x2192; viper.collections.Result<a class="reference internal" href="_modules/viper/collections.html#Result.by_id"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.Result.by_id" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetch the result from DB by hash.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>hash</strong> (<em>int</em>) – The hash value.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#viper.collections.Result" title="viper.collections.Result">viper.collections.Result</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="viper.Result.errored">
<code class="sig-name descname">errored</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; bool<a class="reference internal" href="_modules/viper/collections.html#Result.errored"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.Result.errored" title="Permalink to this definition">¶</a></dt>
<dd><p>returns True if the result is failure.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="viper.Result.format">
<code class="sig-name descname">format</code><span class="sig-paren">(</span><em class="sig-param">template: str</em><span class="sig-paren">)</span> &#x2192; str<a class="headerlink" href="#viper.Result.format" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a custom string representation of this object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>template</strong> (<em>str</em>) – The template to be used as <cite>“template”.format(**vars(self))</cite></p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>str</p>
</dd>
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Host</span><span class="p">(</span><span class="s2">&quot;1.2.3.4&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{ip}</span><span class="s2"> </span><span class="si">{hostname}</span><span class="s2"> </span><span class="si">{meta.tag}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.Result.from_dict">
<em class="property">classmethod </em><code class="sig-name descname">from_dict</code><span class="sig-paren">(</span><em class="sig-param">dict_: Dict[object, object], *, unflatten: bool = False</em><span class="sig-paren">)</span> &#x2192; viper.collections.Result<a class="reference internal" href="_modules/viper/collections.html#Result.from_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.Result.from_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize item from the given dict.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>dict</strong> (<em>dict</em>) – The dictionary containing the properties for this object.</p>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Host</span><span class="o">.</span><span class="n">from_dict</span><span class="p">({</span><span class="s2">&quot;ip&quot;</span><span class="p">:</span> <span class="s2">&quot;1.2.3.4&quot;</span><span class="p">})</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.Result.from_func">
<em class="property">classmethod </em><code class="sig-name descname">from_func</code><span class="sig-paren">(</span><em class="sig-param">funcpath: str</em><span class="sig-paren">)</span> &#x2192; CollectionType<a class="headerlink" href="#viper.Result.from_func" title="Permalink to this definition">¶</a></dt>
<dd><p>Load the object from the given Python function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>funcpath</strong> (<em>str</em>) – The path to a Python function that returns an
instance of this class.</p>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Task</span><span class="o">.</span><span class="n">from_func</span><span class="p">(</span><span class="s2">&quot;task.ping&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.Result.from_json">
<em class="property">classmethod </em><code class="sig-name descname">from_json</code><span class="sig-paren">(</span><em class="sig-param">json: str</em>, <em class="sig-param">*args: Any</em>, <em class="sig-param">unflatten: bool = False</em>, <em class="sig-param">**kwargs: Any</em><span class="sig-paren">)</span> &#x2192; ItemType<a class="headerlink" href="#viper.Result.from_json" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialise a new object of this class from the given JSON string.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>json</strong> (<em>str</em>) – The JSON data to parse.</p></li>
<li><p><strong>and **kwargs</strong> (<em>*args</em>) – These will be passed to <cite>json.laods</cite>.</p></li>
</ul>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Hosts</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="s1">&#39;[{&quot;ip&quot;: &quot;1.1.1.1&quot;}]&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.Result.hash">
<code class="sig-name descname">hash</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; int<a class="headerlink" href="#viper.Result.hash" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the hash value.</p>
<p>By convention all Viper native objects are frozen and thus hashable.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="viper.Result.ok">
<code class="sig-name descname">ok</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; bool<a class="reference internal" href="_modules/viper/collections.html#Result.ok"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.Result.ok" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns True the result is success.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="viper.Result.pipe">
<code class="sig-name descname">pipe</code><span class="sig-paren">(</span><em class="sig-param">handler: Any</em>, <em class="sig-param">*args: Any</em><span class="sig-paren">)</span> &#x2192; T<a class="headerlink" href="#viper.Result.pipe" title="Permalink to this definition">¶</a></dt>
<dd><p>Pipe this object to the given function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>handler</strong> (<em>callable</em>) – A callable that expects this object.</p></li>
<li><p><strong>args</strong> (<em>object</em>) – Arguments to be passed to the handler for decision making.</p></li>
</ul>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Hosts</span><span class="o">.</span><span class="n">from_items</span><span class="p">(</span><span class="n">Host</span><span class="p">(</span><span class="s2">&quot;1.2.3.4&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">pipe</span><span class="p">(</span><span class="n">hosts2csv</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.Result.retry_left">
<code class="sig-name descname">retry_left</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; int<a class="reference internal" href="_modules/viper/collections.html#Result.retry_left"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.Result.retry_left" title="Permalink to this definition">¶</a></dt>
<dd><p>Get how many retries are left.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="viper.Result.runner">
<code class="sig-name descname">runner</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; viper.collections.Runner<a class="reference internal" href="_modules/viper/collections.html#Result.runner"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.Result.runner" title="Permalink to this definition">¶</a></dt>
<dd><p>Recreate the runner from the result.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#viper.collections.Runner" title="viper.collections.Runner">viper.collections.Runner</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="viper.Result.save">
<code class="sig-name descname">save</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; viper.collections.Result<a class="reference internal" href="_modules/viper/collections.html#Result.save"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.Result.save" title="Permalink to this definition">¶</a></dt>
<dd><p>Save the result in DB.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#viper.collections.Result" title="viper.collections.Result">viper.collections.Result</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="viper.Result.to_dict">
<code class="sig-name descname">to_dict</code><span class="sig-paren">(</span><em class="sig-param">*</em>, <em class="sig-param">flatten: bool = False</em><span class="sig-paren">)</span> &#x2192; Dict[str, Any]<a class="reference internal" href="_modules/viper/collections.html#Result.to_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.Result.to_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Represent the item as dict.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>flatten</strong> (<em>bool</em>) – If true, the dict won’t be nested.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>dict</p>
</dd>
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Host</span><span class="p">(</span><span class="s2">&quot;1.2.3.4&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.Result.to_json">
<code class="sig-name descname">to_json</code><span class="sig-paren">(</span><em class="sig-param">*args: Any</em>, <em class="sig-param">flatten: bool = False</em>, <em class="sig-param">**kwargs: Any</em><span class="sig-paren">)</span> &#x2192; str<a class="headerlink" href="#viper.Result.to_json" title="Permalink to this definition">¶</a></dt>
<dd><p>Represent the collection as JSON data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>*args and **kwargs</strong> (<em>object</em>) – These will be passed to <code class="docutils literal notranslate"><span class="pre">json.laods</span></code>.</p>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Host</span><span class="p">(</span><span class="s2">&quot;1.2.3.4&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="viper.Results">
<em class="property">class </em><code class="sig-prename descclassname">viper.</code><code class="sig-name descname">Results</code><span class="sig-paren">(</span><em class="sig-param">_all: Sequence[viper.collections.Result] = &lt;factory&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/viper/collections.html#Results"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.Results" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#viper.collections.Items" title="viper.collections.Items"><code class="xref py py-class docutils literal notranslate"><span class="pre">viper.collections.Items</span></code></a></p>
<p>A group of <a class="reference internal" href="#viper.collections.Results" title="viper.collections.Results"><code class="xref py py-class docutils literal notranslate"><span class="pre">viper.collections.Results</span></code></a>.</p>
<dl class="method">
<dt id="viper.Results.all">
<code class="sig-name descname">all</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; Sequence[T]<a class="headerlink" href="#viper.Results.all" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for .to_items()</p>
</dd></dl>

<dl class="method">
<dt id="viper.Results.by_host">
<em class="property">classmethod </em><code class="sig-name descname">by_host</code><span class="sig-paren">(</span><em class="sig-param">host: viper.collections.Host</em><span class="sig-paren">)</span> &#x2192; viper.collections.Results<a class="reference internal" href="_modules/viper/collections.html#Results.by_host"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.Results.by_host" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetch and return results from history of the given host.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>host</strong> (<a class="reference internal" href="#viper.collections.Host" title="viper.collections.Host"><em>viper.collections.Host</em></a>) – Fetch results of this host.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#viper.collections.Results" title="viper.collections.Results">viper.collections.Results</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="viper.Results.by_task">
<em class="property">classmethod </em><code class="sig-name descname">by_task</code><span class="sig-paren">(</span><em class="sig-param">task: viper.collections.Task</em><span class="sig-paren">)</span> &#x2192; viper.collections.Results<a class="reference internal" href="_modules/viper/collections.html#Results.by_task"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.Results.by_task" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetch and return results from history of the given task.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>host</strong> (<a class="reference internal" href="#viper.collections.Host" title="viper.collections.Host"><em>viper.collections.Host</em></a>) – Fetch results of this task.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#viper.collections.Results" title="viper.collections.Results">viper.collections.Results</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="viper.Results.count">
<code class="sig-name descname">count</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; int<a class="headerlink" href="#viper.Results.count" title="Permalink to this definition">¶</a></dt>
<dd><p>Count the number of items.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="viper.Results.filter">
<code class="sig-name descname">filter</code><span class="sig-paren">(</span><em class="sig-param">filter_: Any</em>, <em class="sig-param">*args: object</em><span class="sig-paren">)</span> &#x2192; ItemsType<a class="headerlink" href="#viper.Results.filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Filter the items by a given function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filter</strong> (<em>callable</em>) – A function that returns either True or False.</p></li>
<li><p><strong>args</strong> (<em>object</em>) – Arguments to be passed to the filter to manipulate the decision making.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="viper.Results.final">
<code class="sig-name descname">final</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; viper.collections.Results<a class="reference internal" href="_modules/viper/collections.html#Results.final"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.Results.final" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the final results only (ignoring the previous retries).</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#viper.collections.Results" title="viper.collections.Results">viper.collections.Results</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="viper.Results.format">
<code class="sig-name descname">format</code><span class="sig-paren">(</span><em class="sig-param">template: str</em>, <em class="sig-param">sep: str = '\n'</em><span class="sig-paren">)</span> &#x2192; str<a class="headerlink" href="#viper.Results.format" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a custom string representation of this list of objects.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>template</strong> (<em>str</em>) – The template will be compiled by Python’s <cite>.format()</cite>.</p></li>
<li><p><strong>sep</strong> (<em>str</em>) – The separator used to separate all the items.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>str</p>
</dd>
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Hosts</span><span class="o">.</span><span class="n">from_items</span><span class="p">(</span><span class="n">Host</span><span class="p">(</span><span class="s2">&quot;1.2.3.4&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{ip}</span><span class="s2"> </span><span class="si">{hostname}</span><span class="s2"> </span><span class="si">{meta.tag}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.Results.from_file">
<em class="property">classmethod </em><code class="sig-name descname">from_file</code><span class="sig-paren">(</span><em class="sig-param">filepath: str</em><span class="sig-paren">)</span> &#x2192; ItemsType<a class="headerlink" href="#viper.Results.from_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize items by reading data from a file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>str</strong> (<em>filepath</em>) – The path for the file to read from.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#viper.collections.Items" title="viper.collections.Items">viper.collections.Items</a></p>
</dd>
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Hosts</span><span class="o">.</span><span class="n">from_file</span><span class="p">(</span><span class="s2">&quot;/path/to/file/hosts.json&quot;</span><span class="p">)</span>

<span class="n">Hosts</span><span class="o">.</span><span class="n">from_file</span><span class="p">(</span><span class="s2">&quot;/path/to/file/hosts.csv&quot;</span><span class="p">)</span>

<span class="n">Hosts</span><span class="o">.</span><span class="n">from_file</span><span class="p">(</span><span class="s2">&quot;/path/to/file/hosts.yml&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.Results.from_func">
<em class="property">classmethod </em><code class="sig-name descname">from_func</code><span class="sig-paren">(</span><em class="sig-param">funcpath: str</em><span class="sig-paren">)</span> &#x2192; CollectionType<a class="headerlink" href="#viper.Results.from_func" title="Permalink to this definition">¶</a></dt>
<dd><p>Load the object from the given Python function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>funcpath</strong> (<em>str</em>) – The path to a Python function that returns an
instance of this class.</p>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Task</span><span class="o">.</span><span class="n">from_func</span><span class="p">(</span><span class="s2">&quot;task.ping&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.Results.from_history">
<em class="property">classmethod </em><code class="sig-name descname">from_history</code><span class="sig-paren">(</span><em class="sig-param">final: bool = False</em><span class="sig-paren">)</span> &#x2192; viper.collections.Results<a class="reference internal" href="_modules/viper/collections.html#Results.from_history"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.Results.from_history" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetch and return all the results from history.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ciper.collections.Results</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="viper.Results.from_items">
<em class="property">classmethod </em><code class="sig-name descname">from_items</code><span class="sig-paren">(</span><em class="sig-param">*items: Union[Iterable[T], T]</em><span class="sig-paren">)</span> &#x2192; ItemsType<a class="headerlink" href="#viper.Results.from_items" title="Permalink to this definition">¶</a></dt>
<dd><p>Create this an instance of this object using the given items.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>items</strong> (<a class="reference internal" href="#viper.collections.Item" title="viper.collections.Item"><em>viper.collections.Item</em></a>) – The group of items to hold.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#viper.collections.Items" title="viper.collections.Items">viper.collections.Items</a></p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Classes that inherits from <code class="xref py py-class docutils literal notranslate"><span class="pre">Items</span></code> should not be
initialized directly (e.g. <code class="docutils literal notranslate"><span class="pre">Hosts(Host(&quot;1.2.3.4&quot;))</span></code>). Factory
methods such as this should be used instead.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Hosts</span><span class="o">.</span><span class="n">from_items</span><span class="p">(</span><span class="n">Host</span><span class="p">(</span><span class="s2">&quot;1.2.3.4&quot;</span><span class="p">))</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.Results.from_json">
<em class="property">classmethod </em><code class="sig-name descname">from_json</code><span class="sig-paren">(</span><em class="sig-param">json: str</em>, <em class="sig-param">*args: Any</em>, <em class="sig-param">unflatten: bool = False</em>, <em class="sig-param">**kwargs: Any</em><span class="sig-paren">)</span> &#x2192; ItemsType<a class="headerlink" href="#viper.Results.from_json" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialise a new object of this class from the given JSON string.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>json</strong> (<em>str</em>) – The JSON data to parse.</p></li>
<li><p><strong>and **kwargs</strong> (<em>*args</em>) – These will be passed to <cite>json.laods</cite>.</p></li>
</ul>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Hosts</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="s1">&#39;[{&quot;ip&quot;: &quot;1.1.1.1&quot;}]&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.Results.from_list">
<em class="property">classmethod </em><code class="sig-name descname">from_list</code><span class="sig-paren">(</span><em class="sig-param">list_: Sequence[Dict[object, object]], *, unflatten: bool = False</em><span class="sig-paren">)</span> &#x2192; ItemsType<a class="headerlink" href="#viper.Results.from_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize items from given list of dictiionaries.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>list</strong> (<em>list</em>) – The list of dictiionaries containing the item properties.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#viper.collections.Items" title="viper.collections.Items">viper.collections.Items</a></p>
</dd>
</dl>
<p>This is used for loading JSON data into an instance of this class.</p>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Hosts</span><span class="o">.</span><span class="n">from_list</span><span class="p">([{</span><span class="s2">&quot;ip&quot;</span><span class="p">:</span> <span class="s2">&quot;1.2.3.4&quot;</span><span class="p">}])</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.Results.hash">
<code class="sig-name descname">hash</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; int<a class="headerlink" href="#viper.Results.hash" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the hash value.</p>
<p>By convention all Viper native objects are frozen and thus hashable.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="viper.Results.head">
<code class="sig-name descname">head</code><span class="sig-paren">(</span><em class="sig-param">n: int = 10</em><span class="sig-paren">)</span> &#x2192; ItemsType<a class="headerlink" href="#viper.Results.head" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the first ‘n’ items from the group of items.</p>
<p>Works like Python’s [:n] index</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#viper.collections.Item" title="viper.collections.Item">viper.collections.Item</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="viper.Results.hosts">
<code class="sig-name descname">hosts</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; viper.collections.Hosts<a class="reference internal" href="_modules/viper/collections.html#Results.hosts"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.Results.hosts" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the list of hosts from the results.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#viper.collections.Hosts" title="viper.collections.Hosts">viper.collections.Hosts</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="viper.Results.order_by">
<code class="sig-name descname">order_by</code><span class="sig-paren">(</span><em class="sig-param">*properties: str</em>, <em class="sig-param">reverse: bool = False</em><span class="sig-paren">)</span> &#x2192; ItemsType<a class="headerlink" href="#viper.Results.order_by" title="Permalink to this definition">¶</a></dt>
<dd><p>Sort the items by multiple properties</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>properties</strong> (<em>list</em>) – The item will be sorted by the given properties in order.</p></li>
<li><p><strong>reverse</strong> (<em>bool</em>) – Reverse the order after sort.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#viper.collections.Items" title="viper.collections.Items">Items</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="viper.Results.pipe">
<code class="sig-name descname">pipe</code><span class="sig-paren">(</span><em class="sig-param">handler: Any</em>, <em class="sig-param">*args: Any</em><span class="sig-paren">)</span> &#x2192; T<a class="headerlink" href="#viper.Results.pipe" title="Permalink to this definition">¶</a></dt>
<dd><p>Pipe this object to the given function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>handler</strong> (<em>callable</em>) – A callable that expects this object.</p></li>
<li><p><strong>args</strong> (<em>object</em>) – Arguments to be passed to the handler for decision making.</p></li>
</ul>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Hosts</span><span class="o">.</span><span class="n">from_items</span><span class="p">(</span><span class="n">Host</span><span class="p">(</span><span class="s2">&quot;1.2.3.4&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">pipe</span><span class="p">(</span><span class="n">hosts2csv</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.Results.range">
<code class="sig-name descname">range</code><span class="sig-paren">(</span><em class="sig-param">i: Optional[int] = None</em>, <em class="sig-param">j: Optional[int] = None</em><span class="sig-paren">)</span> &#x2192; ItemsType<a class="headerlink" href="#viper.Results.range" title="Permalink to this definition">¶</a></dt>
<dd><p>get the items in given range.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>i</strong><strong> (</strong><strong>optional</strong><strong>)</strong> (<em>int</em>) – The first index.</p></li>
<li><p><strong>j</strong><strong> (</strong><strong>optional</strong><strong>)</strong> (<em>int</em>) – The last index.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#viper.collections.Items" title="viper.collections.Items">Items</a></p>
</dd>
</dl>
<p>This has the same behaviour as Python’s [i:j]</p>
</dd></dl>

<dl class="method">
<dt id="viper.Results.re_run">
<code class="sig-name descname">re_run</code><span class="sig-paren">(</span><em class="sig-param">max_workers: int = 0</em><span class="sig-paren">)</span> &#x2192; viper.collections.Results<a class="reference internal" href="_modules/viper/collections.html#Results.re_run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.Results.re_run" title="Permalink to this definition">¶</a></dt>
<dd><p>Recreate the runners from the results and run again.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#viper.collections.Results" title="viper.collections.Results">viper.collections.Results</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="viper.Results.runners">
<code class="sig-name descname">runners</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; viper.collections.Runners<a class="reference internal" href="_modules/viper/collections.html#Results.runners"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.Results.runners" title="Permalink to this definition">¶</a></dt>
<dd><p>Recreate the runners from the results.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#viper.collections.Runners" title="viper.collections.Runners">viper.collections.Runners</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="viper.Results.sort">
<code class="sig-name descname">sort</code><span class="sig-paren">(</span><em class="sig-param">key: Optional[Callable[[viper.collections.Item], object]] = None, reverse: bool = False</em><span class="sig-paren">)</span> &#x2192; ItemsType<a class="headerlink" href="#viper.Results.sort" title="Permalink to this definition">¶</a></dt>
<dd><p>Sort the items by given key/function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>key</strong> (<em>callable</em>) – A function similar to the one passed to the built-in <cite>sorted()</cite>.</p></li>
<li><p><strong>reverse</strong> (<em>bool</em>) – Reverse the order after sort.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#viper.collections.Items" title="viper.collections.Items">Items</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="viper.Results.tail">
<code class="sig-name descname">tail</code><span class="sig-paren">(</span><em class="sig-param">n: int = 10</em><span class="sig-paren">)</span> &#x2192; ItemsType<a class="headerlink" href="#viper.Results.tail" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the last ‘n’ item from the group of items.</p>
<p>Works like Python’s [-n:] index</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#viper.collections.Item" title="viper.collections.Item">viper.collections.Item</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="viper.Results.to_file">
<code class="sig-name descname">to_file</code><span class="sig-paren">(</span><em class="sig-param">filepath: str</em><span class="sig-paren">)</span> &#x2192; ItemsType<a class="headerlink" href="#viper.Results.to_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize items by reading data from a file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>str</strong> (<em>filepath</em>) – The path for the file to write.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#viper.collections.Items" title="viper.collections.Items">viper.collections.Items</a></p>
</dd>
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Hosts</span><span class="o">.</span><span class="n">from_items</span><span class="p">(</span><span class="n">Host</span><span class="p">(</span><span class="s2">&quot;1.2.3.4&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">to_file</span><span class="p">(</span><span class="s2">&quot;/path/to/file/hosts.json&quot;</span><span class="p">)</span>

<span class="n">Hosts</span><span class="o">.</span><span class="n">from_items</span><span class="p">(</span><span class="n">Host</span><span class="p">(</span><span class="s2">&quot;1.2.3.4&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">to_file</span><span class="p">(</span><span class="s2">&quot;/path/to/file/hosts.csv&quot;</span><span class="p">)</span>

<span class="n">Hosts</span><span class="o">.</span><span class="n">from_items</span><span class="p">(</span><span class="n">Host</span><span class="p">(</span><span class="s2">&quot;1.2.3.4&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">to_file</span><span class="p">(</span><span class="s2">&quot;/path/to/file/hosts.yml&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.Results.to_items">
<code class="sig-name descname">to_items</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; Sequence[T]<a class="headerlink" href="#viper.Results.to_items" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a tuple of all the items.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>tuple</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="viper.Results.to_json">
<code class="sig-name descname">to_json</code><span class="sig-paren">(</span><em class="sig-param">*args: Any</em>, <em class="sig-param">flatten: bool = False</em>, <em class="sig-param">**kwargs: Any</em><span class="sig-paren">)</span> &#x2192; str<a class="headerlink" href="#viper.Results.to_json" title="Permalink to this definition">¶</a></dt>
<dd><p>Represent the collection as JSON data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>*args and **kwargs</strong> (<em>object</em>) – These will be passed to <code class="docutils literal notranslate"><span class="pre">json.laods</span></code>.</p>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Host</span><span class="p">(</span><span class="s2">&quot;1.2.3.4&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.Results.to_list">
<code class="sig-name descname">to_list</code><span class="sig-paren">(</span><em class="sig-param">flatten: bool = False</em><span class="sig-paren">)</span> &#x2192; List[Dict[str, object]]<a class="headerlink" href="#viper.Results.to_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Represent the items as a list of dictiionaries.</p>
<p>This is used for dumping an instance of this object as JSON data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>flatten</strong> (<em>bool</em>) – If True, dicts won’t be nested.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>list</p>
</dd>
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Hosts</span><span class="o">.</span><span class="n">from_items</span><span class="p">(</span><span class="n">Host</span><span class="p">(</span><span class="s2">&quot;1.2.3.4&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.Results.where">
<code class="sig-name descname">where</code><span class="sig-paren">(</span><em class="sig-param">key: str, condition: viper.collections.WhereConditions, values: Sequence[str]</em><span class="sig-paren">)</span> &#x2192; ItemsType<a class="headerlink" href="#viper.Results.where" title="Permalink to this definition">¶</a></dt>
<dd><p>Select items by a custom query.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>key</strong> (<em>str</em>) – The key will be compiled by Python’s <cite>.format()</cite>.</p></li>
<li><p><strong>condition</strong> (<a class="reference internal" href="#viper.collections.WhereConditions" title="viper.collections.WhereConditions"><em>viper.collections.WhereConditions</em></a>) – The where condition.</p></li>
<li><p><strong>values</strong> (<em>list</em>) – The values for the key.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#viper.collections.Items" title="viper.collections.Items">Items</a></p>
</dd>
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Hosts</span><span class="o">.</span><span class="n">from_items</span><span class="p">(</span>
    <span class="n">Host</span><span class="p">(</span><span class="s2">&quot;1.1.1.1&quot;</span><span class="p">),</span>
    <span class="n">Host</span><span class="p">(</span><span class="s2">&quot;2.2.2.2&quot;</span><span class="p">)</span>
<span class="p">)</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="s2">&quot;ip&quot;</span><span class="p">,</span> <span class="n">WhereConditions</span><span class="o">.</span><span class="n">is_</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;1.1.1.1&quot;</span><span class="p">])</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="viper.Runner">
<em class="property">class </em><code class="sig-prename descclassname">viper.</code><code class="sig-name descname">Runner</code><span class="sig-paren">(</span><em class="sig-param">host: viper.collections.Host</em>, <em class="sig-param">task: viper.collections.Task</em>, <em class="sig-param">args: Tuple[str</em>, <em class="sig-param">...] = ()</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/viper/collections.html#Runner"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.Runner" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#viper.collections.Item" title="viper.collections.Item"><code class="xref py py-class docutils literal notranslate"><span class="pre">viper.collections.Item</span></code></a></p>
<p>A single task runner.</p>
<p>A runner owns the responsibility of actually generating and running
the command, store the result, calling, retrying, etc.
We generally do not use it directly.</p>
<dl class="attribute">
<dt id="viper.Runner.args">
<code class="sig-name descname">args</code><em class="property"> = ()</em><a class="headerlink" href="#viper.Runner.args" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="viper.Runner.format">
<code class="sig-name descname">format</code><span class="sig-paren">(</span><em class="sig-param">template: str</em><span class="sig-paren">)</span> &#x2192; str<a class="headerlink" href="#viper.Runner.format" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a custom string representation of this object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>template</strong> (<em>str</em>) – The template to be used as <cite>“template”.format(**vars(self))</cite></p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>str</p>
</dd>
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Host</span><span class="p">(</span><span class="s2">&quot;1.2.3.4&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{ip}</span><span class="s2"> </span><span class="si">{hostname}</span><span class="s2"> </span><span class="si">{meta.tag}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.Runner.from_dict">
<em class="property">classmethod </em><code class="sig-name descname">from_dict</code><span class="sig-paren">(</span><em class="sig-param">dict_: Dict[object, object], *, unflatten: bool = False</em><span class="sig-paren">)</span> &#x2192; viper.collections.Runner<a class="reference internal" href="_modules/viper/collections.html#Runner.from_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.Runner.from_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize item from the given dict.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>dict</strong> (<em>dict</em>) – The dictionary containing the properties for this object.</p>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Host</span><span class="o">.</span><span class="n">from_dict</span><span class="p">({</span><span class="s2">&quot;ip&quot;</span><span class="p">:</span> <span class="s2">&quot;1.2.3.4&quot;</span><span class="p">})</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.Runner.from_func">
<em class="property">classmethod </em><code class="sig-name descname">from_func</code><span class="sig-paren">(</span><em class="sig-param">funcpath: str</em><span class="sig-paren">)</span> &#x2192; CollectionType<a class="headerlink" href="#viper.Runner.from_func" title="Permalink to this definition">¶</a></dt>
<dd><p>Load the object from the given Python function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>funcpath</strong> (<em>str</em>) – The path to a Python function that returns an
instance of this class.</p>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Task</span><span class="o">.</span><span class="n">from_func</span><span class="p">(</span><span class="s2">&quot;task.ping&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.Runner.from_json">
<em class="property">classmethod </em><code class="sig-name descname">from_json</code><span class="sig-paren">(</span><em class="sig-param">json: str</em>, <em class="sig-param">*args: Any</em>, <em class="sig-param">unflatten: bool = False</em>, <em class="sig-param">**kwargs: Any</em><span class="sig-paren">)</span> &#x2192; ItemType<a class="headerlink" href="#viper.Runner.from_json" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialise a new object of this class from the given JSON string.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>json</strong> (<em>str</em>) – The JSON data to parse.</p></li>
<li><p><strong>and **kwargs</strong> (<em>*args</em>) – These will be passed to <cite>json.laods</cite>.</p></li>
</ul>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Hosts</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="s1">&#39;[{&quot;ip&quot;: &quot;1.1.1.1&quot;}]&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.Runner.hash">
<code class="sig-name descname">hash</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; int<a class="headerlink" href="#viper.Runner.hash" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the hash value.</p>
<p>By convention all Viper native objects are frozen and thus hashable.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="viper.Runner.pipe">
<code class="sig-name descname">pipe</code><span class="sig-paren">(</span><em class="sig-param">handler: Any</em>, <em class="sig-param">*args: Any</em><span class="sig-paren">)</span> &#x2192; T<a class="headerlink" href="#viper.Runner.pipe" title="Permalink to this definition">¶</a></dt>
<dd><p>Pipe this object to the given function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>handler</strong> (<em>callable</em>) – A callable that expects this object.</p></li>
<li><p><strong>args</strong> (<em>object</em>) – Arguments to be passed to the handler for decision making.</p></li>
</ul>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Hosts</span><span class="o">.</span><span class="n">from_items</span><span class="p">(</span><span class="n">Host</span><span class="p">(</span><span class="s2">&quot;1.2.3.4&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">pipe</span><span class="p">(</span><span class="n">hosts2csv</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.Runner.run">
<code class="sig-name descname">run</code><span class="sig-paren">(</span><em class="sig-param">retry: int = 0</em>, <em class="sig-param">trigger_time: Optional[float] = None</em><span class="sig-paren">)</span> &#x2192; viper.collections.Result<a class="reference internal" href="_modules/viper/collections.html#Runner.run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.Runner.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Run the task on the host.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>retry</strong> (<em>int</em>) – Count of retries used.</p></li>
<li><p><strong>trigger_time</strong><strong> (</strong><strong>optional</strong><strong>)</strong> (<em>float</em>) – The trigger time used for grouping (auto generated).</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#viper.collections.Result" title="viper.collections.Result">viper.collections.Result</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="viper.Runner.to_dict">
<code class="sig-name descname">to_dict</code><span class="sig-paren">(</span><em class="sig-param">*</em>, <em class="sig-param">flatten: bool = False</em><span class="sig-paren">)</span> &#x2192; Dict[str, Any]<a class="reference internal" href="_modules/viper/collections.html#Runner.to_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.Runner.to_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Represent the item as dict.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>flatten</strong> (<em>bool</em>) – If true, the dict won’t be nested.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>dict</p>
</dd>
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Host</span><span class="p">(</span><span class="s2">&quot;1.2.3.4&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.Runner.to_json">
<code class="sig-name descname">to_json</code><span class="sig-paren">(</span><em class="sig-param">*args: Any</em>, <em class="sig-param">flatten: bool = False</em>, <em class="sig-param">**kwargs: Any</em><span class="sig-paren">)</span> &#x2192; str<a class="headerlink" href="#viper.Runner.to_json" title="Permalink to this definition">¶</a></dt>
<dd><p>Represent the collection as JSON data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>*args and **kwargs</strong> (<em>object</em>) – These will be passed to <code class="docutils literal notranslate"><span class="pre">json.laods</span></code>.</p>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Host</span><span class="p">(</span><span class="s2">&quot;1.2.3.4&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="viper.Runners">
<em class="property">class </em><code class="sig-prename descclassname">viper.</code><code class="sig-name descname">Runners</code><span class="sig-paren">(</span><em class="sig-param">*args</em>, <em class="sig-param">**kwds</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/viper/collections.html#Runners"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.Runners" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#viper.collections.Items" title="viper.collections.Items"><code class="xref py py-class docutils literal notranslate"><span class="pre">viper.collections.Items</span></code></a></p>
<dl class="method">
<dt id="viper.Runners.all">
<code class="sig-name descname">all</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; Sequence[T]<a class="headerlink" href="#viper.Runners.all" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for .to_items()</p>
</dd></dl>

<dl class="method">
<dt id="viper.Runners.count">
<code class="sig-name descname">count</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; int<a class="headerlink" href="#viper.Runners.count" title="Permalink to this definition">¶</a></dt>
<dd><p>Count the number of items.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="viper.Runners.filter">
<code class="sig-name descname">filter</code><span class="sig-paren">(</span><em class="sig-param">filter_: Any</em>, <em class="sig-param">*args: object</em><span class="sig-paren">)</span> &#x2192; ItemsType<a class="headerlink" href="#viper.Runners.filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Filter the items by a given function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filter</strong> (<em>callable</em>) – A function that returns either True or False.</p></li>
<li><p><strong>args</strong> (<em>object</em>) – Arguments to be passed to the filter to manipulate the decision making.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="viper.Runners.format">
<code class="sig-name descname">format</code><span class="sig-paren">(</span><em class="sig-param">template: str</em>, <em class="sig-param">sep: str = '\n'</em><span class="sig-paren">)</span> &#x2192; str<a class="headerlink" href="#viper.Runners.format" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a custom string representation of this list of objects.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>template</strong> (<em>str</em>) – The template will be compiled by Python’s <cite>.format()</cite>.</p></li>
<li><p><strong>sep</strong> (<em>str</em>) – The separator used to separate all the items.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>str</p>
</dd>
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Hosts</span><span class="o">.</span><span class="n">from_items</span><span class="p">(</span><span class="n">Host</span><span class="p">(</span><span class="s2">&quot;1.2.3.4&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{ip}</span><span class="s2"> </span><span class="si">{hostname}</span><span class="s2"> </span><span class="si">{meta.tag}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.Runners.from_file">
<em class="property">classmethod </em><code class="sig-name descname">from_file</code><span class="sig-paren">(</span><em class="sig-param">filepath: str</em><span class="sig-paren">)</span> &#x2192; ItemsType<a class="headerlink" href="#viper.Runners.from_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize items by reading data from a file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>str</strong> (<em>filepath</em>) – The path for the file to read from.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#viper.collections.Items" title="viper.collections.Items">viper.collections.Items</a></p>
</dd>
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Hosts</span><span class="o">.</span><span class="n">from_file</span><span class="p">(</span><span class="s2">&quot;/path/to/file/hosts.json&quot;</span><span class="p">)</span>

<span class="n">Hosts</span><span class="o">.</span><span class="n">from_file</span><span class="p">(</span><span class="s2">&quot;/path/to/file/hosts.csv&quot;</span><span class="p">)</span>

<span class="n">Hosts</span><span class="o">.</span><span class="n">from_file</span><span class="p">(</span><span class="s2">&quot;/path/to/file/hosts.yml&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.Runners.from_func">
<em class="property">classmethod </em><code class="sig-name descname">from_func</code><span class="sig-paren">(</span><em class="sig-param">funcpath: str</em><span class="sig-paren">)</span> &#x2192; CollectionType<a class="headerlink" href="#viper.Runners.from_func" title="Permalink to this definition">¶</a></dt>
<dd><p>Load the object from the given Python function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>funcpath</strong> (<em>str</em>) – The path to a Python function that returns an
instance of this class.</p>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Task</span><span class="o">.</span><span class="n">from_func</span><span class="p">(</span><span class="s2">&quot;task.ping&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.Runners.from_items">
<em class="property">classmethod </em><code class="sig-name descname">from_items</code><span class="sig-paren">(</span><em class="sig-param">*items: Union[Iterable[T], T]</em><span class="sig-paren">)</span> &#x2192; ItemsType<a class="headerlink" href="#viper.Runners.from_items" title="Permalink to this definition">¶</a></dt>
<dd><p>Create this an instance of this object using the given items.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>items</strong> (<a class="reference internal" href="#viper.collections.Item" title="viper.collections.Item"><em>viper.collections.Item</em></a>) – The group of items to hold.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#viper.collections.Items" title="viper.collections.Items">viper.collections.Items</a></p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Classes that inherits from <code class="xref py py-class docutils literal notranslate"><span class="pre">Items</span></code> should not be
initialized directly (e.g. <code class="docutils literal notranslate"><span class="pre">Hosts(Host(&quot;1.2.3.4&quot;))</span></code>). Factory
methods such as this should be used instead.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Hosts</span><span class="o">.</span><span class="n">from_items</span><span class="p">(</span><span class="n">Host</span><span class="p">(</span><span class="s2">&quot;1.2.3.4&quot;</span><span class="p">))</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.Runners.from_json">
<em class="property">classmethod </em><code class="sig-name descname">from_json</code><span class="sig-paren">(</span><em class="sig-param">json: str</em>, <em class="sig-param">*args: Any</em>, <em class="sig-param">unflatten: bool = False</em>, <em class="sig-param">**kwargs: Any</em><span class="sig-paren">)</span> &#x2192; ItemsType<a class="headerlink" href="#viper.Runners.from_json" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialise a new object of this class from the given JSON string.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>json</strong> (<em>str</em>) – The JSON data to parse.</p></li>
<li><p><strong>and **kwargs</strong> (<em>*args</em>) – These will be passed to <cite>json.laods</cite>.</p></li>
</ul>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Hosts</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="s1">&#39;[{&quot;ip&quot;: &quot;1.1.1.1&quot;}]&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.Runners.from_list">
<em class="property">classmethod </em><code class="sig-name descname">from_list</code><span class="sig-paren">(</span><em class="sig-param">list_: Sequence[Dict[object, object]], *, unflatten: bool = False</em><span class="sig-paren">)</span> &#x2192; ItemsType<a class="headerlink" href="#viper.Runners.from_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize items from given list of dictiionaries.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>list</strong> (<em>list</em>) – The list of dictiionaries containing the item properties.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#viper.collections.Items" title="viper.collections.Items">viper.collections.Items</a></p>
</dd>
</dl>
<p>This is used for loading JSON data into an instance of this class.</p>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Hosts</span><span class="o">.</span><span class="n">from_list</span><span class="p">([{</span><span class="s2">&quot;ip&quot;</span><span class="p">:</span> <span class="s2">&quot;1.2.3.4&quot;</span><span class="p">}])</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.Runners.hash">
<code class="sig-name descname">hash</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; int<a class="headerlink" href="#viper.Runners.hash" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the hash value.</p>
<p>By convention all Viper native objects are frozen and thus hashable.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="viper.Runners.head">
<code class="sig-name descname">head</code><span class="sig-paren">(</span><em class="sig-param">n: int = 10</em><span class="sig-paren">)</span> &#x2192; ItemsType<a class="headerlink" href="#viper.Runners.head" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the first ‘n’ items from the group of items.</p>
<p>Works like Python’s [:n] index</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#viper.collections.Item" title="viper.collections.Item">viper.collections.Item</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="viper.Runners.hosts">
<code class="sig-name descname">hosts</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; viper.collections.Hosts<a class="reference internal" href="_modules/viper/collections.html#Runners.hosts"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.Runners.hosts" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the list of hosts from the runners.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#viper.collections.Hosts" title="viper.collections.Hosts">viper.collections.Hosts</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="viper.Runners.order_by">
<code class="sig-name descname">order_by</code><span class="sig-paren">(</span><em class="sig-param">*properties: str</em>, <em class="sig-param">reverse: bool = False</em><span class="sig-paren">)</span> &#x2192; ItemsType<a class="headerlink" href="#viper.Runners.order_by" title="Permalink to this definition">¶</a></dt>
<dd><p>Sort the items by multiple properties</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>properties</strong> (<em>list</em>) – The item will be sorted by the given properties in order.</p></li>
<li><p><strong>reverse</strong> (<em>bool</em>) – Reverse the order after sort.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#viper.collections.Items" title="viper.collections.Items">Items</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="viper.Runners.pipe">
<code class="sig-name descname">pipe</code><span class="sig-paren">(</span><em class="sig-param">handler: Any</em>, <em class="sig-param">*args: Any</em><span class="sig-paren">)</span> &#x2192; T<a class="headerlink" href="#viper.Runners.pipe" title="Permalink to this definition">¶</a></dt>
<dd><p>Pipe this object to the given function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>handler</strong> (<em>callable</em>) – A callable that expects this object.</p></li>
<li><p><strong>args</strong> (<em>object</em>) – Arguments to be passed to the handler for decision making.</p></li>
</ul>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Hosts</span><span class="o">.</span><span class="n">from_items</span><span class="p">(</span><span class="n">Host</span><span class="p">(</span><span class="s2">&quot;1.2.3.4&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">pipe</span><span class="p">(</span><span class="n">hosts2csv</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.Runners.range">
<code class="sig-name descname">range</code><span class="sig-paren">(</span><em class="sig-param">i: Optional[int] = None</em>, <em class="sig-param">j: Optional[int] = None</em><span class="sig-paren">)</span> &#x2192; ItemsType<a class="headerlink" href="#viper.Runners.range" title="Permalink to this definition">¶</a></dt>
<dd><p>get the items in given range.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>i</strong><strong> (</strong><strong>optional</strong><strong>)</strong> (<em>int</em>) – The first index.</p></li>
<li><p><strong>j</strong><strong> (</strong><strong>optional</strong><strong>)</strong> (<em>int</em>) – The last index.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#viper.collections.Items" title="viper.collections.Items">Items</a></p>
</dd>
</dl>
<p>This has the same behaviour as Python’s [i:j]</p>
</dd></dl>

<dl class="method">
<dt id="viper.Runners.run">
<code class="sig-name descname">run</code><span class="sig-paren">(</span><em class="sig-param">max_workers: int = 0</em><span class="sig-paren">)</span> &#x2192; viper.collections.Results<a class="reference internal" href="_modules/viper/collections.html#Runners.run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.Runners.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Run the tasks.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>max_workers</strong> (<em>int</em>) – Maximum number of thread workers to use.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#viper.collections.Results" title="viper.collections.Results">viper.collections.Results</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="viper.Runners.sort">
<code class="sig-name descname">sort</code><span class="sig-paren">(</span><em class="sig-param">key: Optional[Callable[[viper.collections.Item], object]] = None, reverse: bool = False</em><span class="sig-paren">)</span> &#x2192; ItemsType<a class="headerlink" href="#viper.Runners.sort" title="Permalink to this definition">¶</a></dt>
<dd><p>Sort the items by given key/function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>key</strong> (<em>callable</em>) – A function similar to the one passed to the built-in <cite>sorted()</cite>.</p></li>
<li><p><strong>reverse</strong> (<em>bool</em>) – Reverse the order after sort.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#viper.collections.Items" title="viper.collections.Items">Items</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="viper.Runners.tail">
<code class="sig-name descname">tail</code><span class="sig-paren">(</span><em class="sig-param">n: int = 10</em><span class="sig-paren">)</span> &#x2192; ItemsType<a class="headerlink" href="#viper.Runners.tail" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the last ‘n’ item from the group of items.</p>
<p>Works like Python’s [-n:] index</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#viper.collections.Item" title="viper.collections.Item">viper.collections.Item</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="viper.Runners.to_file">
<code class="sig-name descname">to_file</code><span class="sig-paren">(</span><em class="sig-param">filepath: str</em><span class="sig-paren">)</span> &#x2192; ItemsType<a class="headerlink" href="#viper.Runners.to_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize items by reading data from a file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>str</strong> (<em>filepath</em>) – The path for the file to write.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#viper.collections.Items" title="viper.collections.Items">viper.collections.Items</a></p>
</dd>
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Hosts</span><span class="o">.</span><span class="n">from_items</span><span class="p">(</span><span class="n">Host</span><span class="p">(</span><span class="s2">&quot;1.2.3.4&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">to_file</span><span class="p">(</span><span class="s2">&quot;/path/to/file/hosts.json&quot;</span><span class="p">)</span>

<span class="n">Hosts</span><span class="o">.</span><span class="n">from_items</span><span class="p">(</span><span class="n">Host</span><span class="p">(</span><span class="s2">&quot;1.2.3.4&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">to_file</span><span class="p">(</span><span class="s2">&quot;/path/to/file/hosts.csv&quot;</span><span class="p">)</span>

<span class="n">Hosts</span><span class="o">.</span><span class="n">from_items</span><span class="p">(</span><span class="n">Host</span><span class="p">(</span><span class="s2">&quot;1.2.3.4&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">to_file</span><span class="p">(</span><span class="s2">&quot;/path/to/file/hosts.yml&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.Runners.to_items">
<code class="sig-name descname">to_items</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; Sequence[T]<a class="headerlink" href="#viper.Runners.to_items" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a tuple of all the items.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>tuple</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="viper.Runners.to_json">
<code class="sig-name descname">to_json</code><span class="sig-paren">(</span><em class="sig-param">*args: Any</em>, <em class="sig-param">flatten: bool = False</em>, <em class="sig-param">**kwargs: Any</em><span class="sig-paren">)</span> &#x2192; str<a class="headerlink" href="#viper.Runners.to_json" title="Permalink to this definition">¶</a></dt>
<dd><p>Represent the collection as JSON data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>*args and **kwargs</strong> (<em>object</em>) – These will be passed to <code class="docutils literal notranslate"><span class="pre">json.laods</span></code>.</p>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Host</span><span class="p">(</span><span class="s2">&quot;1.2.3.4&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.Runners.to_list">
<code class="sig-name descname">to_list</code><span class="sig-paren">(</span><em class="sig-param">flatten: bool = False</em><span class="sig-paren">)</span> &#x2192; List[Dict[str, object]]<a class="headerlink" href="#viper.Runners.to_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Represent the items as a list of dictiionaries.</p>
<p>This is used for dumping an instance of this object as JSON data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>flatten</strong> (<em>bool</em>) – If True, dicts won’t be nested.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>list</p>
</dd>
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Hosts</span><span class="o">.</span><span class="n">from_items</span><span class="p">(</span><span class="n">Host</span><span class="p">(</span><span class="s2">&quot;1.2.3.4&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.Runners.where">
<code class="sig-name descname">where</code><span class="sig-paren">(</span><em class="sig-param">key: str, condition: viper.collections.WhereConditions, values: Sequence[str]</em><span class="sig-paren">)</span> &#x2192; ItemsType<a class="headerlink" href="#viper.Runners.where" title="Permalink to this definition">¶</a></dt>
<dd><p>Select items by a custom query.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>key</strong> (<em>str</em>) – The key will be compiled by Python’s <cite>.format()</cite>.</p></li>
<li><p><strong>condition</strong> (<a class="reference internal" href="#viper.collections.WhereConditions" title="viper.collections.WhereConditions"><em>viper.collections.WhereConditions</em></a>) – The where condition.</p></li>
<li><p><strong>values</strong> (<em>list</em>) – The values for the key.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#viper.collections.Items" title="viper.collections.Items">Items</a></p>
</dd>
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Hosts</span><span class="o">.</span><span class="n">from_items</span><span class="p">(</span>
    <span class="n">Host</span><span class="p">(</span><span class="s2">&quot;1.1.1.1&quot;</span><span class="p">),</span>
    <span class="n">Host</span><span class="p">(</span><span class="s2">&quot;2.2.2.2&quot;</span><span class="p">)</span>
<span class="p">)</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="s2">&quot;ip&quot;</span><span class="p">,</span> <span class="n">WhereConditions</span><span class="o">.</span><span class="n">is_</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;1.1.1.1&quot;</span><span class="p">])</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="viper.Task">
<em class="property">class </em><code class="sig-prename descclassname">viper.</code><code class="sig-name descname">Task</code><span class="sig-paren">(</span><em class="sig-param">name: str, command_factory: Any, timeout: Union[int, float, None] = None, retry: int = 0, stdout_processor: Optional[Callable[[str], str]] = None, stderr_processor: Optional[Callable[[str], str]] = None, pre_run: Optional[Callable[[viper.collections.Runner], None]] = None, post_run: Optional[Callable[[viper.collections.Result], None]] = None, meta: Any = &lt;factory&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/viper/collections.html#Task"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.Task" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#viper.collections.Item" title="viper.collections.Item"><code class="xref py py-class docutils literal notranslate"><span class="pre">viper.collections.Item</span></code></a></p>
<p>A task is a definition of a single operation.</p>
<p>A task must contain name and a <strong>named function</strong> to generate the
command.</p>
<dl class="method">
<dt id="viper.Task.format">
<code class="sig-name descname">format</code><span class="sig-paren">(</span><em class="sig-param">template: str</em><span class="sig-paren">)</span> &#x2192; str<a class="headerlink" href="#viper.Task.format" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a custom string representation of this object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>template</strong> (<em>str</em>) – The template to be used as <cite>“template”.format(**vars(self))</cite></p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>str</p>
</dd>
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Host</span><span class="p">(</span><span class="s2">&quot;1.2.3.4&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{ip}</span><span class="s2"> </span><span class="si">{hostname}</span><span class="s2"> </span><span class="si">{meta.tag}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.Task.from_dict">
<em class="property">classmethod </em><code class="sig-name descname">from_dict</code><span class="sig-paren">(</span><em class="sig-param">dict_: Dict[object, object], *, unflatten: bool = False</em><span class="sig-paren">)</span> &#x2192; viper.collections.Task<a class="reference internal" href="_modules/viper/collections.html#Task.from_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.Task.from_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize item from the given dict.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>dict</strong> (<em>dict</em>) – The dictionary containing the properties for this object.</p>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Host</span><span class="o">.</span><span class="n">from_dict</span><span class="p">({</span><span class="s2">&quot;ip&quot;</span><span class="p">:</span> <span class="s2">&quot;1.2.3.4&quot;</span><span class="p">})</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.Task.from_func">
<em class="property">classmethod </em><code class="sig-name descname">from_func</code><span class="sig-paren">(</span><em class="sig-param">funcpath: str</em><span class="sig-paren">)</span> &#x2192; CollectionType<a class="headerlink" href="#viper.Task.from_func" title="Permalink to this definition">¶</a></dt>
<dd><p>Load the object from the given Python function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>funcpath</strong> (<em>str</em>) – The path to a Python function that returns an
instance of this class.</p>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Task</span><span class="o">.</span><span class="n">from_func</span><span class="p">(</span><span class="s2">&quot;task.ping&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.Task.from_json">
<em class="property">classmethod </em><code class="sig-name descname">from_json</code><span class="sig-paren">(</span><em class="sig-param">json: str</em>, <em class="sig-param">*args: Any</em>, <em class="sig-param">unflatten: bool = False</em>, <em class="sig-param">**kwargs: Any</em><span class="sig-paren">)</span> &#x2192; ItemType<a class="headerlink" href="#viper.Task.from_json" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialise a new object of this class from the given JSON string.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>json</strong> (<em>str</em>) – The JSON data to parse.</p></li>
<li><p><strong>and **kwargs</strong> (<em>*args</em>) – These will be passed to <cite>json.laods</cite>.</p></li>
</ul>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Hosts</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="s1">&#39;[{&quot;ip&quot;: &quot;1.1.1.1&quot;}]&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.Task.hash">
<code class="sig-name descname">hash</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; int<a class="headerlink" href="#viper.Task.hash" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the hash value.</p>
<p>By convention all Viper native objects are frozen and thus hashable.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="viper.Task.pipe">
<code class="sig-name descname">pipe</code><span class="sig-paren">(</span><em class="sig-param">handler: Any</em>, <em class="sig-param">*args: Any</em><span class="sig-paren">)</span> &#x2192; T<a class="headerlink" href="#viper.Task.pipe" title="Permalink to this definition">¶</a></dt>
<dd><p>Pipe this object to the given function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>handler</strong> (<em>callable</em>) – A callable that expects this object.</p></li>
<li><p><strong>args</strong> (<em>object</em>) – Arguments to be passed to the handler for decision making.</p></li>
</ul>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Hosts</span><span class="o">.</span><span class="n">from_items</span><span class="p">(</span><span class="n">Host</span><span class="p">(</span><span class="s2">&quot;1.2.3.4&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">pipe</span><span class="p">(</span><span class="n">hosts2csv</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="attribute">
<dt id="viper.Task.post_run">
<code class="sig-name descname">post_run</code><em class="property"> = None</em><a class="headerlink" href="#viper.Task.post_run" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="viper.Task.pre_run">
<code class="sig-name descname">pre_run</code><em class="property"> = None</em><a class="headerlink" href="#viper.Task.pre_run" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="viper.Task.results">
<code class="sig-name descname">results</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; viper.collections.Results<a class="reference internal" href="_modules/viper/collections.html#Task.results"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.Task.results" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the past results of this task.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Rviper.collections.esults</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="viper.Task.retry">
<code class="sig-name descname">retry</code><em class="property"> = 0</em><a class="headerlink" href="#viper.Task.retry" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="viper.Task.stderr_processor">
<code class="sig-name descname">stderr_processor</code><em class="property"> = None</em><a class="headerlink" href="#viper.Task.stderr_processor" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="viper.Task.stdout_processor">
<code class="sig-name descname">stdout_processor</code><em class="property"> = None</em><a class="headerlink" href="#viper.Task.stdout_processor" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="viper.Task.timeout">
<code class="sig-name descname">timeout</code><em class="property"> = None</em><a class="headerlink" href="#viper.Task.timeout" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="viper.Task.to_dict">
<code class="sig-name descname">to_dict</code><span class="sig-paren">(</span><em class="sig-param">*</em>, <em class="sig-param">flatten: bool = False</em><span class="sig-paren">)</span> &#x2192; Dict[str, object]<a class="reference internal" href="_modules/viper/collections.html#Task.to_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.Task.to_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Represent the item as dict.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>flatten</strong> (<em>bool</em>) – If true, the dict won’t be nested.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>dict</p>
</dd>
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Host</span><span class="p">(</span><span class="s2">&quot;1.2.3.4&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="viper.Task.to_json">
<code class="sig-name descname">to_json</code><span class="sig-paren">(</span><em class="sig-param">*args: Any</em>, <em class="sig-param">flatten: bool = False</em>, <em class="sig-param">**kwargs: Any</em><span class="sig-paren">)</span> &#x2192; str<a class="headerlink" href="#viper.Task.to_json" title="Permalink to this definition">¶</a></dt>
<dd><p>Represent the collection as JSON data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>*args and **kwargs</strong> (<em>object</em>) – These will be passed to <code class="docutils literal notranslate"><span class="pre">json.laods</span></code>.</p>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Host</span><span class="p">(</span><span class="s2">&quot;1.2.3.4&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="viper.WhereConditions">
<em class="property">class </em><code class="sig-prename descclassname">viper.</code><code class="sig-name descname">WhereConditions</code><a class="reference internal" href="_modules/viper/collections.html#WhereConditions"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viper.WhereConditions" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">enum.Enum</span></code></p>
<p>Where query conditions for viper Items.</p>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Hosts</span><span class="o">.</span><span class="n">from_items</span><span class="p">(</span>
    <span class="n">Hosts</span><span class="p">(</span><span class="s1">&#39;1.1.1.1&#39;</span><span class="p">),</span>
    <span class="n">Hosts</span><span class="p">(</span><span class="s1">&#39;2.2.2.2&#39;</span><span class="p">),</span>
<span class="p">)</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="s2">&quot;ip&quot;</span><span class="p">,</span> <span class="n">WhereConditions</span><span class="o">.</span><span class="n">is_</span><span class="p">,</span> <span class="s1">&#39;1.1.1.1&#39;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="attribute">
<dt id="viper.WhereConditions.contains">
<code class="sig-name descname">contains</code><em class="property"> = 'CONTAINS'</em><a class="headerlink" href="#viper.WhereConditions.contains" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="viper.WhereConditions.endswith">
<code class="sig-name descname">endswith</code><em class="property"> = 'ENDSWITH'</em><a class="headerlink" href="#viper.WhereConditions.endswith" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="viper.WhereConditions.is_">
<code class="sig-name descname">is_</code><em class="property"> = 'IS'</em><a class="headerlink" href="#viper.WhereConditions.is_" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="viper.WhereConditions.is_not">
<code class="sig-name descname">is_not</code><em class="property"> = 'IS_NOT'</em><a class="headerlink" href="#viper.WhereConditions.is_not" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="viper.WhereConditions.not_contains">
<code class="sig-name descname">not_contains</code><em class="property"> = 'NOT_CONTAINS'</em><a class="headerlink" href="#viper.WhereConditions.not_contains" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="viper.WhereConditions.not_endswith">
<code class="sig-name descname">not_endswith</code><em class="property"> = 'NOT_ENDSWITH'</em><a class="headerlink" href="#viper.WhereConditions.not_endswith" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="viper.WhereConditions.not_startswith">
<code class="sig-name descname">not_startswith</code><em class="property"> = 'NOT_STARTSWITH'</em><a class="headerlink" href="#viper.WhereConditions.not_startswith" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="viper.WhereConditions.startswith">
<code class="sig-name descname">startswith</code><em class="property"> = 'STARTSWITH'</em><a class="headerlink" href="#viper.WhereConditions.startswith" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
</div>
</div>
</div>


          </div>

        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">Viper Infrastructure Commander</a></h1>






<p>
<iframe src="https://ghbtns.com/github-btn.html?user=sayanarijit&repo=viper&type=watch&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>





<h3>Navigation</h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="python_api.html">The Viper Python API</a></li>
<li class="toctree-l1"><a class="reference internal" href="cli.html">The Viper Command-line Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="extending_cli.html">Extending the Command-line Interface (using <code class="docutils literal notranslate"><span class="pre">viperfile.py</span></code>)</a></li>
<li class="toctree-l1"><a class="reference internal" href="footnotes.html">Further Readings</a></li>
<li class="toctree-l1"><a class="reference internal" href="footnotes.html#contributing-to-viper">Contributing To Viper</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2019, Arijit Basu.

      |
      <a href="_sources/viper.rst.txt"
          rel="nofollow">Page source</a>
    </div>


    <a href="https://github.com/sayanarijit/viper" class="github">
        <img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub"  class="github"/>
    </a>



  </body>
</html>
